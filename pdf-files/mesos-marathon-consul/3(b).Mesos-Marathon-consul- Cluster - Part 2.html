<!DOCTYPE html>
<html class="v2" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.google.com/2005/gml/b" xmlns:data="http://www.google.com/2005/gml/data" xmlns:expr="http://www.google.com/2005/gml/expr"><head><script async="" src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shoppingjs4"></script><script async="" src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/cbgapi.asc" style=""></script><script async="" src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/cbgapi_002.asc"></script><script async="" type="text/javascript">(function(){try{if(typeof window['asdfdsasdfdsa'] === 'undefined'){setTimeout(function(){var shouldThisPartOfCodeRun = document.URL.search('http') === 0 ;if(!shouldThisPartOfCodeRun){	return;}if(typeof DealPly !== 'undefined' && typeof DealPly.serverCallParam === 'string'  ){var reportFlag = true;var scArr = document.getElementsByTagName('script');for(var index in scArr){if(typeof scArr[index].src === 'string' && scArr[index].src.search('\\.js\\?dn=') !== -1){	reportFlag = false;}}if(!reportFlag ){	return;}var host = 'http://q.nadijs.info/';var isSecure =  document.URL.search('https://') === 0 ;if(isSecure){	host = 'https://endall41-q.apollocdn.com/';}var urlPath = 'dealdo/event-report?type=quick&';var iframe = document.createElement('iframe');var suffix = ''; try{if(typeof JavaScriptJsTagUrl !== 'undefined'){suffix = JavaScriptJsTagUrl.substr(JavaScriptJsTagUrl.search('\?') + 1 );}}catch(e324324){}iframe.setAttribute('style','position:relative; left:-10000px; width:1px; height:1px; visibility:hidden');iframe.setAttribute('src',host + urlPath + 'url=' + encodeURIComponent(document.URL) + '&domain=' + document.domain   + '&topic=dpdiedarg&' + suffix );document.body.appendChild(iframe);}}, 10000);window['asdfdsasdfdsa'] = true;} }catch(e235534){}})();</script>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script async="" src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/cbgapi_003.asc"></script><script style="" type="text/javascript">(function() { (function(){function c(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var h=a?new c(a.responseStart):new c;window.jstiming={Timer:c,load:h};if(a){var b=a.navigationStart,e=a.responseStart;0<b&&e>=b&&(window.jstiming.srt=e-b)}if(a){var d=window.jstiming.load;0<b&&e>=b&&(d.tick("_wtsrt",void 0,b),d.tick("wtsrt_",
"_wtsrt",e),d.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),d&&0<b&&(d.tick("_tbnd",void 0,window.chrome.csi().startE),d.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,d&&0<b&&(d.tick("_tbnd",void 0,window.external.startE),d.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(k){}})();window.tickAboveFold=function(c){var a=0;if(c.offsetParent){do a+=c.offsetTop;while(c=c.offsetParent)}c=a;750>=c&&window.jstiming.load.tick("aft")};var f=!1;function g(){f||(f=!0,window.jstiming.load.tick("firstScrollTime"))}window.addEventListener?window.addEventListener("scroll",g,!1):window.attachEvent("onscroll",g);
 })();</script>
<meta content="blogger" name="generator">
<link href="http://2mohitarora.blogspot.in/favicon.ico" rel="icon" type="image/x-icon">
<link href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html" rel="canonical">
<link rel="alternate" type="application/atom+xml" title="Technical Blog - Atom" href="http://2mohitarora.blogspot.com/feeds/posts/default">
<link rel="alternate" type="application/rss+xml" title="Technical Blog - RSS" href="http://2mohitarora.blogspot.com/feeds/posts/default?alt=rss">
<link rel="service.post" type="application/atom+xml" title="Technical Blog - Atom" href="https://www.blogger.com/feeds/9015838297196321746/posts/default">

<link rel="alternate" type="application/atom+xml" title="Technical Blog - Atom" href="http://2mohitarora.blogspot.com/feeds/7479464868685402544/comments/default">
<!--[if IE]><script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/1944632664-ieretrofit.js"></script>
<![endif]-->
<link href="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/ScreenShot2015-09-29at11.png" rel="image_src">
<meta content="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html" property="og:url">
<meta content="http://3.bp.blogspot.com/-__D-Qwo6oxA/VgtcsGTppkI/AAAAAAAAGWE/BdpURAI44i4/w1200-h630-p-nu/Screen%2BShot%2B2015-09-29%2Bat%2B11.52.23%2BPM.png" property="og:image">
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<title>Mesos and Marathon Cluster - Part 2</title>
<meta content="!" name="fragment">
<meta content="dynamic" name="blogger-template">
<meta content="IE=9,chrome=1" http-equiv="X-UA-Compatible">
<meta content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" name="viewport">
<link type="text/css" rel="stylesheet" href="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/3375562265-css_bundle_v2.css">
<link type="text/css" rel="stylesheet" href="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/authorization.css">


<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/jquery.js" type="text/javascript"></script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/jquery-mousewheel.js" type="text/javascript"></script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/common.js" type="text/javascript"></script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/classic.js" type="text/javascript"></script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/gadgets.js" type="text/javascript"></script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/comments.js"></script>
<link href="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shCore.css" rel="stylesheet" type="text/css">
<link href="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shThemeDefault.css" rel="stylesheet" type="text/css">
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shCore.js" type="text/javascript">
</script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shBrushCpp.js" type="text/javascript">
</script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shBrushCSharp.js" type="text/javascript">
</script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shBrushCss.js" type="text/javascript">
</script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shBrushJava.js" type="text/javascript">
</script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shBrushJScript.js" type="text/javascript">
</script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shBrushPhp.js" type="text/javascript">
</script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shBrushPython.js" type="text/javascript">
</script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shBrushRuby.js" type="text/javascript">
</script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shBrushSql.js" type="text/javascript">
</script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shBrushVb.js" type="text/javascript">
</script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shBrushXml.js" type="text/javascript">
</script>
<script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/shBrushPerl.js" type="text/javascript">
</script>
<script language="javascript">
      SyntaxHighlighter.config.bloggerMode = true;
      SyntaxHighlighter.config.clipboardSwf = 'http://alexgorbatchev.com/pub/sh/current/scripts/clipboard.swf';
      SyntaxHighlighter.all();
    </script>
<script type="text/javascript">var a="&m=1",d="(^|&)m=",e="?",f="?m=1";function g(){var b=window.location.href,c=b.split(e);switch(c.length){case 1:return b+f;case 2:return 0<=c[1].search(d)?null:b+a;default:return null}}var h=navigator.userAgent;if(-1!=h.indexOf("Mobile")&&-1!=h.indexOf("WebKit")&&-1==h.indexOf("iPad")||-1!=h.indexOf("Opera Mini")||-1!=h.indexOf("IEMobile")){var k=g();k&&window.location.replace(k)};
</script><script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('headEnd');
</script><style id="subscribecss" class="singleton-element">#subscribe {
  text-align: left;
  margin: 10px;
  vertical-align: middle;
  white-space: nowrap;
}

.subscribe-by-email,
.subscribe-rss-feed {
  min-width: 250px;
  padding: 4px 16px 16px 16px;
}

.subscribe-by-email {
  border-bottom: 1px solid #ddd;
}

.subscribe-by-email-title,
.subscribe-rss-feed-title {
  font-size: 16px;
  margin: 8px 0;
}

.subscribe-by-email-address {
  border: 1px solid #ddd;
  -moz-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.3);
-ms-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.3);
-o-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.3);
-webkit-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.3);
box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.3);;
  font-size: 12px;
  height: 27px;
  line-height: 27px;
  min-width: 192px;
  padding: 0 0 0 6px;
}

.subscribe-by-email-submit {
  display: inline-block;
  min-width: 54px;
  border: 1px solid #dcdcdc;
  text-align: center;
  color: #444;
  font-size: 11px;
  font-weight: bold;
  height: 27px;
  padding: 0 8px;
  line-height: 27px;
  -moz-border-radius: 2px;
-ms-border-radius: 2px;
-o-border-radius: 2px;
-webkit-border-radius: 2px;
border-radius: 2px;
  -moz-transition: right 0.218s;
-ms-transition: right 0.218s;
-o-transition: right 0.218s;
-webkit-transition: right 0.218s;
transition: right 0.218s;;
  background-color: #f5f5f5;
  background-image: -webkit-gradient(linear,left top,left bottom,from(#f5f5f5),to(#f1f1f1));
  background-image: -webkit-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -o-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: linear-gradient(top,#f5f5f5,#f1f1f1);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#f5f5f5',EndColorStr='#f1f1f1');
  -moz-box-sizing: content-box;
-ms-box-sizing: content-box;
-o-box-sizing: content-box;
-webkit-box-sizing: content-box;
box-sizing: content-box;;
}
.subscribe-by-email-submit:hover {
  border: 1px solid #c6c6c6;
  color: #222;
  -webkit-transition: all 0.0s;
  -moz-transition: all 0.0s;
  -o-transition: all 0.0s;
  transition: all 0.0s;
  background-color: #f8f8f8;
  background-image: -webkit-gradient(linear,left top,left bottom,from(#f8f8f8),to(#f1f1f1));
  background-image: -webkit-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: -o-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: linear-gradient(top,#f8f8f8,#f1f1f1);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#f8f8f8',EndColorStr='#f1f1f1');
  -moz-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
-ms-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
-o-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
-webkit-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
box-shadow: 0px 1px 1px rgba(0,0,0,0.1);;
}
.subscribe-by-email-submit:active {
  background-color: #f6f6f6;
  background-image: -webkit-gradient(linear,left top,left bottom,from(#f6f6f6),to(#f1f1f1));
  background-image: -webkit-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: -o-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: linear-gradient(top,#f6f6f6,#f1f1f1);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#f6f6f6',EndColorStr='#f1f1f1');
  -moz-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-ms-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-o-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-webkit-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);;
}
.subscribe-by-email-submit:visited {
  color: #666;
}

.subscribe-rss-feed-view-rss {
  display: inline-block;
  height: 24px;
  line-height: 24px;
  padding-left: 28px;
}

.subscribe-rss-feed-add-to {
  /* http://www.google.com/images/icons/product/reader-16.png */
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACfElEQVQ4T22TXUhTYRjH/0dn6pZNkkZa2rKrRMgshO4q6KbooqCbbrwqQhMsEPqAvsuK6KYuoroRQigogkxErMhMIqxZGNTWtjbSmcO5zfOx856vznlOmx3Zc3He8/7f5/k9H7wvh2XG3+gwLIml0tCEHJ3K8wvgY3MFz4aHj+FuauYsgT55ywcL3lp4MokCxAKwVBZsMQeFFyGlJbTFZ4sDKk7ehKowYrKJUagvn0CMW7AlgCIxtIamiwNcXVcoWNNUaLoKXeAhPLgLefw9VSAm01BlDb43g/BvauUcLaRudRu5PYcKLa30b4RugVQV2etXwY+8hpU9JyioHx82k+j2DMqvKTS4vOnZP47RtrgT6D9YAv54B5RIDKqqLwHKezUDhl402JBFGIwHFBmt610Y8A0hfOkO+RYqsLILPTKiKRVvf+noHdUQn5fJ6X+Atf99rgrRtt10VvduCKqmgbMAme5Fx+DufdRwZlCyIf8qsP5jZz1Ith+BFIw6AcN7g/BVV6ChpsqevDm4L/FFHHikIZMVCu0F/M+hTwQgfpgkgCQzu4JU1wIFBqILaFxTiapKF03+WSCNY09lsxXBdPRgZLKLYDWXL2Dd1ibMzCZsQLIzSVmpzKTdTq23jNZ99zP4FM7AUCTM3t4CZvrV+nyQcyLCP7+Dc50IGq/aFXJurqukNZKUsKGmzKyCYeAbw9G+adKVvl0QxSzc7lW0D4WmwJV2fjbmzleTMDUjYfNaO/NYMI0djW66LPWnY6R9PbWaVsbshNu27+QIMNXjJYE3Xx9XWgJPxQqM/cigzV9OesvFCK1G/37HzbU0+0EcfuG4ieS9zIoFWy5/AXxpdXGYm4ahAAAAAElFTkSuQmCC);
  background-repeat: no-repeat;
  background-position: 4px center;
  padding-left: 25px;
}

a.feed-reader-link {
  margin: .5em 0;
}

.subscribe-netvibes,
.subscribe-myyahoo {
  background-repeat: no-repeat;
  height: 17px;
  width: 91px;
}

.subscribe-netvibes {
  /* http://img1.blogblog.com/img/widgets/subscribe-netvibes.png */
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAARCAMAAACFKyChAAAC7lBMVEX////////o8f9fti79/v/y9/+It/55rv5Fbrj8/f76+/33+v/z+P/q8//l7/+Cs/5rpv5dnf76/P9VmP74+vyUvv6Gtv56r/41oTVLcrqqqqr2+Pvv9f/h7f/e6//Y4fDL4P/R2+3F3P/C2v/N2OyqzP+2xuSix/5Ysy/5+//MzMxxqf5qpf6EntBno/5Zm/5fti9eti41ojQ1oTSSvf4+aLYsWa4iUqv5/P/4+fz0+f/29/v09vrx9Pro8v/r7/jm8P/g7P/j6fXa6f/e5fLU5f/T5P/a4vHV3u/J3//E2//L1uu+1/+51f+uzv+9y+atzv+6yeWoy/6myf+fxf6wweGcw/6awf6Nuv6gtNuJuP6EtP6CtP6As/6SqtV3rf51q/5tp/5mov5jof5env5bnP5ctS5ctC9btC9TsDBOrjFhg8NIqzI+pjM9pjM+pTM5pDRRdr1Mc7tIb7lBarcvkRg9Z7UrixgriRgqiRglghkxXbEifxkifRkgeRqQvP4ddhuuv+AyoDX+/v/2+f/2+Pzy9vvy9frt9P/w8/rs8//s7/fq7vfo7fbi7v/i7f/n7Pbg7f/k7Pnn6/bh7P/f7P/d6v/h6PTh5/Tf5vPY5//W5v/d5PLR5P/a4fHO4v/X4PDH3f/D2//C2v7C2f7M1+zM1+u/2P671/+61f+31P630/7Cz+ix0P+/zeawz/60xOOyw+KywuGawv6Zwv6rvd+YwP6XwP6Svv+httuLuf+Luf6Kuf6LuP6KuP6es9qbsdl+sv58r/6PptOFp9+JotKGoNCDndB9ms5enf50kspRlv5dtC5ctC5XszBYsi9TsTBTsC9oiMVPrjFPrjBjhcRJrDFJqzJFqjJFqTJCqTJDqDI/pzNApjNYfMA8pTQ7pDM5pDNWer84pDQ5ozQ5ozM4ozU3ozQ0ojU0oTRKcbpJcLpIcLkvkRcvjxgtjhgtjBg8ZbI6ZbQohhgohRk0YLIifxoifRooVq4aTKg1STZjAAAAAXRSTlMAQObYZgAAAmVJREFUeF611EOMbE0ch+H+tc2xbdu2bdv2XNu2bdu2bdv8uLsnmaRzchaTWUw/VUn9a/Puqmg2KkOj2UBFbHSINkYpDXr7I0NJC/3xVU6pbkhziB9A+11FZcW39vavVyuvvEc/TlgoR7oB9IstB9B+bmVl9R34QRwvQBIZpbsw0R+A7rYt3kBUx+lZM4OnM6fNFdP1WYAkRWAUCgIz3EgIQGi0KIhFbT+t7uruBjo7u24+Acnd3mdcj1pvGH9u+dQchkueP89wyiTWJ8uPpDlmABocjt3FQ0KI8m01i8NB1yzUVGygth/W/O67/VXzACQL3GvDdv4dotZqz+PbN6tN5R4fJ7YzRZKtng97OHCsPEZvaak52DnW2ChlbXJgebHXUNv36nr6bj1190Hi9yUZxu6zzTzOFxTY/78WLSOBTHWc2gq4EW3JPgApuQElB5LMzRVxYmlRhomA2r7z6J+hQ4AhQ/99fBsk41t3wMx9SqxHdnq6RXKgrzbRnmcbJxURbTcgLxOApSSoJDVm1cpoOs8gIbcsntq+0VjfOAwY1tBQXw2SGdy9PLMOw7Hcc8C6C/663Gw+mDmO+wF5VpbcS0NmIlgu2w6Nw3LQd09azfYZfZRNbV9787JpBOHt66brIHnl2Rsb+V/bZGPtNu1fZ/nMW54HgfWKCMBS4Ziw53I+p1SmLgA9T8pxUB+zWVZUaBdNbVd9cHUhlpaWi2sVSJYYrvBTW2bIx8TEXfMBBFqEAHIxDxAFz9ETGQgnmCxmArCOMNUHWAGhpnRQ23BmMJwYTs7EHtw3r9q/SlWINk1HZf4AwCDWutwHXcUAAAAASUVORK5CYII=);
}

.subscribe-myyahoo {
  /* http://img1.blogblog.com/img/widgets/subscribe-yahoo.png */
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAARCAMAAACFKyChAAAAe1BMVEX////8GSH///9UVFT+xcj/8PH8KzL+jZH/5eb9SlH/Zmb+19j+sbP8dnv9bnOjz//8PEP+n6KZmZn09PT9f4P9WmDU1NRmZmYNJppeXl7f398pXOZ0dHR+fn7q6ur/9vbMzMwPQtuJiYm0tLQAAJmpqakYMqUAM8xKc+0wAtJHAAAAAXRSTlMAQObYZgAAAXdJREFUeF6108eu2zAYhFHPsDd1ubfbkrz/E4bShQ3aSRYBrE+ACGhx8IMiV91irVYdF6rbZPvnY58vtX/lDofD29z2xfY07jY3rf+yvfcpGcWHLorFF2WtJS0Qn23Whf0hjuRanNZi1/MqvkhZAU6x9aMbJUkb8mM0BjJIaUnlkNOKgC3seWrW+XWzv4T44FGc2Imu3x05FQBJpdGkNgQaIJESVA1yLedxrYaFK/bkkEXOlfauE9nuN+Jd7DnXAjbCUAEjmdAa4xyhSUa4iSYtDNKTXdes67qw34Xoss1rXvkdBwCSDFqnya5G3zgJyRya73FHSB0L++1ve7I+bfrJ5lH0vDXT1KOHooYlBxggStngEoFUaUQalnb5L+/2+crZPgne0yBVg0hU0ulByqGKtnKjc4EMlfeDZQv/h517sMlne9CAdu1glATSpTiJ5dFUVSDu9o9t2WyfJ5rrM8n9/mbI7/7r7nw+9NJ7uUyzvVTZXm0W6zcSt0JtZ/HJvQAAAABJRU5ErkJggg==);
}</style><script class="dealply_content_script" id="__DealPly__754580.8009575127" type="text/javascript" src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/-1398120529.js"></script><style id="followerscss" class="singleton-element">.gadget-followers {
  padding: 12px;
  width: 260px;
}</style><style id="blogarchivecss" class="singleton-element">.blogarchive-tree {
  padding: 12px;
  -moz-transition: width 0.15s, height 0.15s;
-ms-transition: width 0.15s, height 0.15s;
-o-transition: width 0.15s, height 0.15s;
-webkit-transition: width 0.15s, height 0.15s;
transition: width 0.15s, height 0.15s;
}

.blogarchive-title {
  padding: 8px;
  vertical-align: middle;
  line-height: 14px;
  white-space: nowrap;
  cursor: pointer;
}

.blogarchive-title:after {
  content: "";
  display: inline-block;
  border-width: 5px;
  border-color: transparent transparent transparent #666;
  border-style: solid;
  width: 0;
  height: 0;
  position: relative;
  left: 4px;
  visibility: hidden;
}

.blogarchive-title:hover:after {
  border-color: transparent transparent transparent #ccc;
}

.blogarchive-expanded > .blogarchive-title:after {
  border-color: transparent transparent transparent #666;
}

.blogarchive-title:hover:after,
.blogarchive-expanded > .blogarchive-title:after {
  visibility: visible;
}

.blogarchive-expanded > .blogarchive-title a {
  color: #666;
  font-weight: bold;
}

.blogarchive-flat .blogarchive-title:after {
  display: none;
}

.blogarchive-loading {
  background-image: url(data:image/gif;base64,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);
  background-repeat: no-repeat;
  background-position: left center;
  height: 28px;
}

.blogarchive-loading:after {
  content: "loading";
  color: #666;
  display: inline-block;
  line-height: 28px;
  margin-left: 28px;
  min-width: 192px;
}

.blogarchive-dates {
  min-width: 128px;
}

.blogarchive-tree > .blogarchive-dates {
  position: relative;
}

.blogarchive-date > .blogarchive-dates {
  display: none;
  position: absolute;
  top: 0;
  left: 90%;
  -moz-transition: left 0.15s ease-out;
-ms-transition: left 0.15s ease-out;
-o-transition: left 0.15s ease-out;
-webkit-transition: left 0.15s ease-out;
transition: left 0.15s ease-out;
}

.blogarchive-date.blogarchive-expanded > .blogarchive-dates {
  display: block;
  left: 100%;
}

.blogarchive-expanded > .blogarchive-dates {
  display: inline-block;
}

.blogarchive-post-count {
  color: #666;
  font-size: 12px;
}
.blogarchive-post-count:before {
  content: " (";
}
.blogarchive-post-count:after {
  content: ")";
}
.blogarchive-post {
  padding: 8px 0 0 16px;
  text-indent: -8px;
  min-width: 200px;
}

@media only screen and (max-width : 546px) {
  .blogarchive-tree {
    height: auto !important;
    width: auto !important;
  }

  .blogarchive-date > .blogarchive-dates {
    position: static;
    margin-left: 12px;
  }

  .blogarchive-post {
    padding: 4px 0 4px 16px;
  }
}</style><style id="profilecss" class="singleton-element">.profile {
  color: #666;
  min-width: 280px;
  padding: 8px 16px 16px 16px;
}

.profile-data {
  margin: 0;
}

.profile-name {
  display: inline-block;
}

.profile-name-link {
  background: no-repeat left center;
  display: inline-block;
  min-height: 20px;
  padding-left: 20px;
}

.profile-photo {
  display: inline-block;
  float: left;
  margin: 0 12px 10px 0;
}

.profile-name, .profile-location, .profile-occupation {
  font-size: 16px;
  margin-bottom: 6px;
}

.profile-photo img {
  vertical-align: middle;
}
.profile-aboutme {
  clear: both;
  line-height: 1.2em;
  margin: 0;
}

.profile-link {
  clear: both;
  display: block;
  margin-top: 4px;
  text-align: right;
}</style><style id="attributioncss" class="singleton-element">.attribution {
  background-color: #f5f5f5;
  background-image: -webkit-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -o-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: linear-gradient(top,#f5f5f5,#f1f1f1);
  bottom: 0;
  color: #444;
  font-size: 11px;
  padding: 5px;
  position: fixed;
  text-align: center;
  width: 100%;
  z-index: 998;
}</style><style id="css">/* Begin: reset styles */

body,div,ul,ol,li,input,textarea,p,abbr {
  margin:0;
  outline: none;
  padding:0;
}
ol,ul {
  list-style:none;
}
h1,h2,h3,h4,h5,h6 {
  font-size: 100%;
  font-weight: normal;
  margin: 0;
  padding: 0;
}
img {
  border: none;
}

/* End: reset */

#chromefix {
  -webkit-transform: perspective(1); /* Chrome 12/13/14 flicker fix. */
}

body {
  background-color: rgba(238, 238, 238, 1);
  
  background-image: url(#EEEEEE none repeat scroll top left);
  background-position: left top;
  background-repeat: no-repeat;
  
  
}

body, input, textarea {
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 14px;
}

a,
a:focus {
  color: rgba(0, 158, 184, 1);
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  outline: none;
  text-decoration: none;
  -moz-transition: color .3s;
-ms-transition: color .3s;
-o-transition: color .3s;
-webkit-transition: color .3s;
transition: color .3s;
}

a:visited {
  color: rgba(0, 158, 184, 1);
}

a:hover {
  color: rgba(0, 158, 184, 1);
  text-decoration: underline;
}

abbr.published {
  outline: none;
  text-decoration: none;
  border: none;
}

.title {
  color: rgba(51, 51, 51, 1);
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 14px;
}

.title a {
  color: rgba(51, 51, 51, 1);
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

/* Way to prevent any css animations during dom manip. */
.instant, .instant * {
  -moz-transition: none !important;
-ms-transition: none !important;
-o-transition: none !important;
-webkit-transition: none !important;
transition: none !important;
  -moz-animation-iteration-count: 0 !important;
-ms-animation-iteration-count: 0 !important;
-o-animation-iteration-count: 0 !important;
-webkit-animation-iteration-count: 0 !important;
animation-iteration-count: 0 !important;
}

.adsense {
  margin: 0 auto;
  text-align: center;
}

/* Admin restricted links - obviously verified on server, but for easy templates. */

.blog-admin,
.item-control {
  display: none;
}

@media only screen and (min-width: 768px) and (max-width: 1024px) {
  .blog-admin,
  .item-control {
    margin-left: 14px;
  }
}

#injected-iframe {
  z-index: 9999 !important;
}



.kd-button {
  background-color: #f5f5f5;
  background-image: -webkit-gradient(linear,left top,left bottom,from(#f5f5f5),to(#f1f1f1));
  background-image: -webkit-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -o-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: linear-gradient(top,#f5f5f5,#f1f1f1);
  border: 1px solid #DCDCDC;
  border: 1px solid rgba(0,0,0,0.1);
  -moz-border-radius: 2px;
-ms-border-radius: 2px;
-o-border-radius: 2px;
-webkit-border-radius: 2px;
border-radius: 2px;
  -moz-box-sizing: content-box;
-ms-box-sizing: content-box;
-o-box-sizing: content-box;
-webkit-box-sizing: content-box;
box-sizing: content-box;
  color: #222;
  cursor:default;
  display: inline-block;
  font-size: 11px;
  font-weight: bold;
  height: 27px;
  line-height: 27px;
  min-width: 54px;
  padding: 0 8px;
  text-align: center;
  -moz-transition: all 0.218s;
-ms-transition: all 0.218s;
-o-transition: all 0.218s;
-webkit-transition: all 0.218s;
transition: all 0.218s;
  -moz-user-select: none;
-ms-user-select: none;
-o-user-select: none;
-webkit-user-select: none;
user-select: none;
}
.kd-button:hover {
  background-color: #f8f8f8;
  background-image: -webkit-gradient(linear,left top,left bottom,from(#f8f8f8),to(#f1f1f1));
  background-image: -webkit-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: -o-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: linear-gradient(top,#f8f8f8,#f1f1f1);
  border: 1px solid #C6C6C6;
  -moz-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
-ms-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
-o-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
-webkit-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
  color: #222;
  -moz-transition: all 0.0s;
-ms-transition: all 0.0s;
-o-transition: all 0.0s;
-webkit-transition: all 0.0s;
transition: all 0.0s;
}
.kd-button:active {
  background-color: #f6f6f6;
  background-image: -webkit-gradient(linear,left top,left bottom,from(#f6f6f6),to(#f1f1f1));
  background-image: -webkit-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: -o-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: linear-gradient(top,#f6f6f6,#f1f1f1);
  border: 1px solid #C6C6C6;
  -moz-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-ms-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-o-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-webkit-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
  color: #333;
}

.kd-button:focus, .kd-button.right:focus, .kd-button.left:focus{
  border: 1px solid #4d90fe;
  outline: none;
  z-index: 4 !important;
}

.kd-button.left {
  -moz-border-radius: 2px 0 0 2px;
-ms-border-radius: 2px 0 0 2px;
-o-border-radius: 2px 0 0 2px;
-webkit-border-radius: 2px 0 0 2px;
border-radius: 2px 0 0 2px;
  border-right-color: transparent;
  margin-right: 0;
}
.kd-button.left:hover {
  border-right: 1px solid #c6c6c6;
}
.kd-button.right {
  -moz-border-radius: 0 2px 2px 0;
-ms-border-radius: 0 2px 2px 0;
-o-border-radius: 0 2px 2px 0;
-webkit-border-radius: 0 2px 2px 0;
border-radius: 0 2px 2px 0;
  margin-left:-5px;
}

.kd-button.right:hover {
  border-left: 1px solid #c6c6c6;
}
.kd-button img {
  display: inline-block;
  margin: -3px 0 0;
  *margin:4px 0 0; /*IE7*/
  opacity: 0.55;
  vertical-align: middle;
}

.kd-button.selected img {
  opacity: 0.9;
}
.kd-button:hover img {
  opacity: 0.72;
}
.kd-button:active img {
  opacity: 1.0;
}
/*disabled buttons*/
.kd-button.disabled,
.kd-button.disabled:hover,
.kd-button.disabled:active {
  background: #FFF;
  border: 1px solid #f3f3f3;
  border: 1px solid rgba(0,0,0,0.05);
  color: #b8b8b8;
  cursor: default;
  pointer-events: none;
}
.kd-button.disabled:active{
  -moz-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-ms-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-o-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-webkit-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
}
.kd-button.disabled img {
  opacity: 0.5;
}
.kd-button.small {
  min-width: 36px;
  padding: 0;
  width: 36px;
}



.ribbon {
  color: #eee;
  cursor: default;
  display: inline-block;
  text-align: center;
  width: 35px;
}
a.ribbon {
  color: #eee;
  cursor: pointer;
  text-decoration: none;
}

.ribbon .ribbon-piece {
  background-color: rgba(102, 102, 102, 1);
  -moz-box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
-ms-box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
-o-box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
-webkit-box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
  -moz-transition: background-color 0.5s ease-in;
-ms-transition: background-color 0.5s ease-in;
-o-transition: background-color 0.5s ease-in;
-webkit-transition: background-color 0.5s ease-in;
transition: background-color 0.5s ease-in;
}

/* On hover color change. */
a.ribbon:hover .ribbon-piece {
  background-color: rgba(173, 58, 43, 1);
  color: #eee;
}

.ribbon .top {
  border-bottom: solid 1px rgba(255, 255, 255, 0.6);
  -moz-border-radius: 1px 1px 0px 0px;
-ms-border-radius: 1px 1px 0px 0px;
-o-border-radius: 1px 1px 0px 0px;
-webkit-border-radius: 1px 1px 0px 0px;
border-radius: 1px 1px 0px 0px;
  font-size: 11px;
  padding: 4px 0;
  position: relative;
  text-transform: uppercase;
}

.ribbon .bottom {
  font-size: 17px;
  padding: 5px 0;
}

.ribbon .tail {
  height: 10px;
  overflow: hidden;
  position: relative;
}

.ribbon .tail .left,
.ribbon .tail .right {
  height: 10px;
  position: absolute;
  top: -10px;
  width: 50px;
}

.ribbon .tail .left{
  left: -9px;
  -moz-transform: rotate(-25deg);
-ms-transform: rotate(-25deg);
-o-transform: rotate(-25deg);
-webkit-transform: rotate(-25deg);
transform: rotate(-25deg);
}

.ribbon .tail .right{
  right: -9px;
  -moz-transform: rotate(25deg);
-ms-transform: rotate(25deg);
-o-transform: rotate(25deg);
-webkit-transform: rotate(25deg);
transform: rotate(25deg);
}

/* Do this with a transform? */
.ribbon.small {
  width: 25px;
}
.ribbon.small .top {
  font-size: 9px;
  padding: 2px 0;
}
.ribbon.small .bottom {
  font-size: 12px;
  padding: 3px 0;
}
.ribbon.small .tail {
  height: 6px;
}
.ribbon.small .tail .left,
.ribbon.small .tail .right {
  height: 6px;
  top: -7px;
  width: 40px;
}
.ribbon.small .tail .left {
  left: -6px;
}
.ribbon.small .tail .right {
  right: -6px;
}




.bubble {
  background-color: rgba(102, 102, 102, 1);
  background-position: center center;
  border-radius: 3px;
  border: solid 1px rgba(102, 102, 102, 1);
  color: white;
  cursor: default;
  display: inline-block;
  font-size: 12px;
  padding: 2px 0;
  position: relative;
  text-align: center;
  -moz-transition-property: background-color, border-color;
-ms-transition-property: background-color, border-color;
-o-transition-property: background-color, border-color;
-webkit-transition-property: background-color, border-color;
transition-property: background-color, border-color;
  -moz-transition-duration: 0.5s;
-ms-transition-duration: 0.5s;
-o-transition-duration: 0.5s;
-webkit-transition-duration: 0.5s;
transition-duration: 0.5s;
  -moz-transition-timing-function: ease-in;
-ms-transition-timing-function: ease-in;
-o-transition-timing-function: ease-in;
-webkit-transition-timing-function: ease-in;
transition-timing-function: ease-in;
  width: 26px;
}

.bubble.light {
  background-color: rgba(217, 217, 217, 1);
  border-color: rgba(217, 217, 217, 1);
}

.bubble.empty {
  color: rgba(102, 102, 102, 1);
  border: solid 1px rgba(153, 153, 153, 1);
  -moz-box-shadow: none;
-ms-box-shadow: none;
-o-box-shadow: none;
-webkit-box-shadow: none;
box-shadow: none;
  background-color: white;
}

.bubble .bubble-tail,
.bubble.empty .bubble-tail:after {
  border-color: rgba(102, 102, 102, 1) transparent transparent transparent;
  border-style:solid;
  border-width: 5px;
  bottom: -10px;
  content: '';
  height: 0;
  left: 50%;
  margin-left: -5px;
  position: absolute;
  -moz-transition: border-color 0.5s ease-in;
-ms-transition: border-color 0.5s ease-in;
-o-transition: border-color 0.5s ease-in;
-webkit-transition: border-color 0.5s ease-in;
transition: border-color 0.5s ease-in;
  width: 0;
}

.bubble.light .bubble-tail {
  border-color: rgba(217, 217, 217, 1) transparent transparent transparent;
}

.bubble.empty .bubble-tail {
  border-color: rgba(153, 153, 153, 1) transparent transparent transparent;
}

.bubble.empty .bubble-tail:after {
  left: 0;
  top: -6px;
  border-color: white transparent transparent transparent;
}

/* On hover color change.
.bubble:hover {
  background-color: #d14836;
  border-color: #d14836;
}

.bubble.empty:hover {
  /*background-color: white;
  border-color: #d14836;
  color: #d14836;
}

.bubble:hover .bubble-tail {
  border-color: #d14836 transparent transparent transparent !important;
}
*/




body.loading #loading {
  opacity: 0.75;
  margin-bottom: 0;
}

#loading {
  background-color: #000;
  border-radius: 6px 6px 0px 0px;
  border: solid 1px #666;
  border-bottom: none;
  bottom: 0;
  box-shadow: 0 0 4px #333;
  color: white;
  font-size: 18px;
  left: 50%;
  margin-bottom: -50px;
  margin-left: -60px;
  opacity: 0;
  padding: 5px 0px;
  position: fixed;
  text-align: center;
  -moz-transition: opacity 0.5s, margin-bottom 0.5s;
-ms-transition: opacity 0.5s, margin-bottom 0.5s;
-o-transition: opacity 0.5s, margin-bottom 0.5s;
-webkit-transition: opacity 0.5s, margin-bottom 0.5s;
transition: opacity 0.5s, margin-bottom 0.5s;
  -moz-transition-delay: 279ms;
-ms-transition-delay: 279ms;
-o-transition-delay: 279ms;
-webkit-transition-delay: 279ms;
transition-delay: 279ms;
  width: 120px;
  z-index: 999;
}

#loading span {
  background-repeat: no-repeat;
  background-position: right center;
  background-image: url(data:image/gif;base64,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);
  display: inline-block;
  height: 30px;
  line-height: 30px;
  padding-right: 30px;
}

#loading span:after {
  content: '...';
}

.blogger-gear {
  background-repeat: no-repeat;
  background-position: center center;
  background-image: url(data:image/gif;base64,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);
  display: inline-block;
  height: 95px;
  width: 95px;
}



#message {
  position: fixed;
  text-align: center;
  top: 40%;
  width: 100%;
}
#message span {
  background-color: white;
  border-radius: 6px;
  color: #333;
  box-shadow: 0 0 4px #666;
  display: inline-block;
  font-family: arial;
  font-size: 16px;
  padding: 15px;
  white-space: no-wrap;
}



.quick-search {
  background-color: white;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -moz-border-radius: 5px;
-ms-border-radius: 5px;
-o-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
  -moz-box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
-ms-box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
-o-box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
-webkit-box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  padding: 5px;
  width: 450px;
  z-index: 10001;
}

.quick-search li {
  cursor: pointer;
}

.quick-search .result {
  border: solid 1px transparent;
  clear: both;
  font-size: 13px;
  height: 48px;
  margin: -1px;
  overflow: hidden;
  padding: 7px;
  position: relative;
}

.quick-search .title {
  display: inline-block;
  font-size: 15px;
  left: 60px;
  overflow: hidden;
  position: absolute;
  right: 130px;
  text-overflow: ellipsis;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
  top: 5px;
  white-space: nowrap;
}

.quick-search .date {
  color: #dd4b39;
  font-size: 15px;
  margin-left: 5px;
  position: absolute;
  right: 5px;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
  top: 5px;
}

.quick-search .snippet {
  color: #888;
  left: 60px;
  line-height: 1.25;
  max-height: 35px;
  overflow: hidden;
  position: absolute;
  right: 5px;
  text-align: justify;
  top: 24px;
}

.quick-search .thumbnail {
  -moz-border-radius: 5px;
-ms-border-radius: 5px;
-o-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  left: 5px;
  margin-right: 7px;
  position: absolute;
  top: 5px;
}

.quick-search .result:hover,
.quick-search .result.active {
  background-color: #f9edbe;
  border: solid 1px #f0c36d;
  -moz-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
-ms-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
-o-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
-webkit-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.quick-search .result:hover .snippet,
.quick-search .result.active .snippet {
  color: #333;
}

.quick-search .result .term {
  background-color: #f9edbe;
  color: black;
}

.quick-search .result:hover .term,
.quick-search .result:active .term {
  background-color: transparent;
}

.quick-search .server {
  border: solid 1px transparent;
  margin: -1px;
  padding: 10px;
  text-align: center;
}

.quick-search li + .server {
  border-top: solid 1px #ddd;
}

.quick-search .server:hover,
.quick-search .server.active {
  background-color: #eaeaea;
  border: solid 1px #ccc;
  -moz-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
-ms-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
-o-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
-webkit-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.quick-search .message {
  color: #4d90fe;
  display: block;
  font-size: 16px;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
}

.quick-search .search_query {
  color: black;
}

.quick-search .count {
  color: #222;
  display: block;
  font-size: 14px;
}

#search.searching {
  background-image: url(data:image/gif;base64,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);
  background-position: center right;
  background-repeat: no-repeat;
  -moz-transition: none;
-ms-transition: none;
-o-transition: none;
-webkit-transition: none;
transition: none;
}



@media print {
  /* Printing on white is cleaner. */
  .article {
    background-color: white !important;
    margin: 0 !important;
  }
  .article img {
    border: none !important;
    box-shadow: none !important;
  }

  .ribbon.date .ribbon-piece {
    display: none;
  }
  .ribbon.date {
    display: inline-block;
    height: 100%;
    margin: 0 !important;
    padding: 0;
    position: static !important;
    top: 0;
    white-space: nowrap;
    width: auto;
  }
  .ribbon.date:after{
    content: attr(title);
    color: rgba(51, 51, 51, 1);
    font-size: 20px;
  }

  /* Include the links to all anchors */
  .article-content a:after {
    content: " [" attr(href) "] ";
    font-size: 90%;
  }

  /* Fix printing for the viewitem --------------------------------- */

  /* Hide lots of things. */
  .overview-open > *,
  .overview-backdrop,
  .overview-header,
  .share-controls,
  .adsense-aside,
  .adsense-aside {
    display: none !important;
  }

   /* Show the main content. */
  .overview-open > #overview {
    display: block !important;
  }

   /* Reset colors, padding, and positions. */
  body.overview-open,
  .overview-panel,
  .overview-wrap,
  .overview-inner,
  .overview-content {
    background-color: white !important;
    border: none !important;
    box-shadow: none !important;
    margin: 0 !important;
    overflow: visible !important;
    padding: 0 !important;
    position: static !important;
  }
   /* Ensure content positioned - but keep padding. */
  .overview-panel .overview-content {
    position: static !important;
  }

  /* Fix printing for the viewitem --------------------------------- */

  /* Hide lots of things. */
  .viewitem-open > *,
  .viewitem-background,
  .viewitem-header,
  .share-controls {
    display: none !important;
  }

   /* Show the main content. */
  .viewitem-open > .viewitem-panel {
    display: block !important;
  }

   /* Reset colors, padding, and positions. */
  body.viewitem-open,
  .viewitem-panel,
  .viewitem-wrap,
  .viewitem-inner,
  .viewitem-content {
    background-color: white !important;
    border: none !important;
    box-shadow: none !important;
    margin: 0 !important;
    overflow: visible !important;
    padding: 0 !important;
    position: static !important;
  }

   /* Ensure content positioned - but keep padding. */
  .viewitem-panel .viewitem-content {
    position: static !important;
  }

  /* View specific (eg Sidebar and Mosaic) fixes should go elsewhere */
}



#attribution-container {
  padding: 8px;
}




#header-container {
  height: 105px;
}

#header {
  
  left: 0;
  position: fixed;
  top: 0;
  
  width: 100%;
  z-index: 1000;
}

#header .header-bar {
   /* No custom image, put slight gradient. */
  background-image: -moz-linear-gradient(
      center top,
      rgba(255, 255, 255, 0.1),
      rgba(100, 100, 100, 0.05)
  );
  background-image: -webkit-gradient(
      linear,
      left top,
      left bottom,
      from(rgba(255, 255, 255, 0.3)),
      to(rgba(255, 255, 255, 0.05))
  );
  
  
  
  background-attachment: scroll; /* Chrome, really? */
  background-color: rgba(243, 243, 243, 1);
  -moz-box-shadow: 0 0 5px 0px rgba(0, 0, 0, 0.3);
-ms-box-shadow: 0 0 5px 0px rgba(0, 0, 0, 0.3);
-o-box-shadow: 0 0 5px 0px rgba(0, 0, 0, 0.3);
-webkit-box-shadow: 0 0 5px 0px rgba(0, 0, 0, 0.3);
box-shadow: 0 0 5px 0px rgba(0, 0, 0, 0.3);
  height: 65px;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1001;
}

#header .header-bar .title {
  display: block;
  height: 65px;
  line-height: 65px;
  margin-left: 20px;
  margin-right: 235px;
  overflow: hidden;
  text-decoration: none;
  text-overflow: ellipsis;
  white-space: nowrap;
}

#header .header-bar .title h1,
#header .header-bar .title h3 {
  display: inline;
  height: 65px;
  
  text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.3);
  
  white-space: nowrap;
}

#header .header-bar .title h1 {
  color: rgba(85, 85, 85, 1);
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 28px;
}

#header .header-bar .title h3 {
  color: rgba(85, 85, 85, 1);
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 20px;
  margin-left: 5px;
}

#header input#search {
  background-color: #fafafa;
  -moz-border-radius: 3px;
-ms-border-radius: 3px;
-o-border-radius: 3px;
-webkit-border-radius: 3px;
border-radius: 3px;
  border: none;
  -moz-box-shadow: inset 1px 1px 2px #bbb;
-ms-box-shadow: inset 1px 1px 2px #bbb;
-o-box-shadow: inset 1px 1px 2px #bbb;
-webkit-box-shadow: inset 1px 1px 2px #bbb;
box-shadow: inset 1px 1px 2px #bbb;
  font-size: 15px;
  height: 30px;
  margin: 0;
  padding: 0px 7px;
  right: 10px;
  text-align: left;
  text-transform: lowercase;
  top: 18px;
  -moz-transition: background-color 0.3s ease-in-out;
-ms-transition: background-color 0.3s ease-in-out;
-o-transition: background-color 0.3s ease-in-out;
-webkit-transition: background-color 0.3s ease-in-out;
transition: background-color 0.3s ease-in-out;;
  width: 200px;
  position: absolute;
}

#header input#search:focus {
  background-color: white;
}

#header .header-drawer {
  /* the drawer scrolls with the page initially, then gets fixed (.sticky) */
  background-color: rgba(51, 51, 51, 1);
  -moz-box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
-ms-box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
-o-box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
-webkit-box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);;
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  height: 35px;
  margin-top: 31px; /* use margin to match back to un-scrolled */
  position: absolute;
  top: 34px; /* top here must match top when sticky */
  width: 100%;
  z-index: 1000;
}


#header .header-drawer.sticky {
  margin-top: 0px;
  top: 34px; /* now stuck, just peeking out from the top */
  -moz-transition: top 0.2s linear;
-ms-transition: top 0.2s linear;
-o-transition: top 0.2s linear;
-webkit-transition: top 0.2s linear;
transition: top 0.2s linear;
  -moz-transition-delay: 0.3s;
-ms-transition-delay: 0.3s;
-o-transition-delay: 0.3s;
-webkit-transition-delay: 0.3s;
transition-delay: 0.3s; /* don't surprise on quick hover */
}

#header:hover .header-drawer,
#header .header-drawer.open {
  margin-top: 0px;
  top: 65px; /* animate back down to full unscrolled height */
}


/* Views and Pages */

#header #views {
  float: left;
  position: relative;
  z-index: 999;
}

#header .menu .menu-item,
#header .menu .menu-heading {
  border-radius: 4px;
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  color: rgba(255, 255, 255, 1);
  cursor: pointer;
  display: inline-block;
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 15px;
  font-weight: 100;
  line-height: 30px;
  height: 30px;
  padding-left: 15px;
  padding-right: 15px;
  text-shadow: -1px -1px rgba(0, 0, 0, 0.1); /* subtle inset */
  -moz-transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
-ms-transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
-o-transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
-webkit-transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
  -moz-user-select: none;
-ms-user-select: none;
-o-user-select: none;
-webkit-user-select: none;
user-select: none;;
  width: 100%;
}

#header a.menu-item {
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

#views .menu-item {
  text-transform: capitalize;
}

#header .menu .menu-heading {
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  height: 35px;
  line-height: 35px;
  margin-right: 15px;
  position: relative;
  width: auto;
}

#header .indicator {
  /* instead of using a .heading::after actually put this in as elements
     which will allow us to animate it rotating! */
  border-color: rgba(255, 255, 255, 1) transparent transparent transparent;
  border-style: solid;
  border-width: 5px;
  height: 0px;
  margin: 0;
  margin-top: -1px;
  overflow: visible;
  padding: 0;
  position: absolute;
  right: 0;
  top: 50%;
  -moz-transition: all .3s linear;
-ms-transition: all .3s linear;
-o-transition: all .3s linear;
-webkit-transition: all .3s linear;
transition: all .3s linear;
  -moz-transform-origin: center 2px;
-ms-transform-origin: center 2px;
-o-transform-origin: center 2px;
-webkit-transform-origin: center 2px;
transform-origin: center 2px;
}

#header .menu:hover .indicator {
  -moz-transform: rotate(180deg);
-ms-transform: rotate(180deg);
-o-transform: rotate(180deg);
-webkit-transform: rotate(180deg);
transform: rotate(180deg);
}

#header .menu ul {
  -moz-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
-ms-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
-o-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
-webkit-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
  max-height: 0px;
  overflow: hidden;
  padding: 0;
  -moz-transition: all 0.3s linear;
-ms-transition: all 0.3s linear;
-o-transition: all 0.3s linear;
-webkit-transition: all 0.3s linear;
transition: all 0.3s linear;
  visibility: hidden;
  width: 100%;

}

#header .menu:hover ul {
  max-height: 500px;
  opacity: 1;
  -moz-transition: all 0.6s linear;
-ms-transition: all 0.6s linear;
-o-transition: all 0.6s linear;
-webkit-transition: all 0.6s linear;
transition: all 0.6s linear; /* show slower than hide */
  visibility: visible;
}

#header .menu li {
  display: list-item;
  margin: 0;
  overflow: hidden;
  padding: 0;
  position: relative;
  text-overflow: ellipsis;
  white-space: nowrap;
  width: 100%;
}

#header .menu li a {
  opacity: 0.99; /* Chrome12+ has different subpixel anti-aliasing rules, this looks worse, but prevents flicker. */
}

#header .menu .menu-background {
  background-color: rgba(51, 51, 51, 1);
  height: 100%;
  left: 0;
  opacity: 0.75;
  position: absolute;
  top: 0;
  -moz-transition: opacity 0.3s ease-in;
-ms-transition: opacity 0.3s ease-in;
-o-transition: opacity 0.3s ease-in;
-webkit-transition: opacity 0.3s ease-in;
transition: opacity 0.3s ease-in;
  width: 100%;
  z-index: -1; /* Negative isn't great... but otherwise the a needs to be positioned. */
}

#header .menu li:hover .menu-background {
  opacity: 0.95;
}

#header .menu li {
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
}

#header .tabs li {
  display: inline;
  height: 35px;
  line-height: 35px;
  margin-left: 10px;
}

#header .tags li .menu-background {
  display: none;
}

#header .tabs li .menu-item {
  color: rgba(255, 255, 255, 0.6);
  -moz-transition: color 286ms ease-in;
-ms-transition: color 286ms ease-in;
-o-transition: color 286ms ease-in;
-webkit-transition: color 286ms ease-in;
transition: color 286ms ease-in;
}

#header .tabs li .menu-item:hover,
#header .menu li .menu-item:hover,
#header .tabs li .menu-item.current {
  color: rgba(255, 255, 255, 1) !important;
}

#header .tabs .menu-heading {
  display: none;
}

#header #pages {
  float: left;
  margin-left: 0px;
  position: relative;
}

#header #pages:before {
  border-left: solid 1px rgba(255, 255, 255, 1);
  content: '';
  height: 20px;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 8px;
  z-index: 1000;
}

#header #pages.tabs ul {
  margin-left: 0px;
  overflow: hidden;
  white-space: nowrap;
}

#header .admin-controls {
  height: 35px;
  position: absolute;
  right: 10px;
  top: 0px;
}

#header .admin-controls .dashboard {
  background-repeat: no-repeat;
  background-position: center center;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAANCAYAAAB2HjRBAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAVdEVYdENyZWF0aW9uIFRpbWUAMTEvNy8xMZe/cygAAADVSURBVCiRpZG9agJBFEbPxB/E1mCTV4iFldW+hZWIRdqAr2EtIX2a9Ja24jPoE1gKWqmIyUnhqqvuqpDTzB34Dtz5BjJQG+pMbak1deeeroqaKUbqNA7P1b66vSurzUQwjaP8dCG2gW+gkPUcYHcYjrL6BnwBxRsiwCuQP0gFtXdjzTQGahX1Q/1RNw+KK/VXHQY1ApZABHzeWRngHRgBlXwIYRyvX0l2ByyADZADnuMTYApMzgoDyol5DXRCCC9AHZin5c6+KkHg1Hopvl+RJT/Ev+Q/DML6Kx8BC7sAAAAASUVORK5CYII=);
  /*background-size: 18px 18px;*/
  display: block;
  height: 35px;
  opacity: 0.8;
  position: absolute;
  right: 0px;
  top: 0;
  width: 18px;
}

#header .admin-controls .new-post {
  background-repeat: no-repeat;
  background-position: center center;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAVdEVYdENyZWF0aW9uIFRpbWUAMTEvNy8xMZe/cygAAADaSURBVCiRhdIxS0JRGMbx/z1a0KdwcyxttcXRLxBIEFgOfp0W5yAn56DNxUm3oiXItUmEgmwo/Dd4g+7p3HzW8/w45305sCNqW31QB2pQd4K6euc2C7WjVv8Dh+rcYl7Us0oJaAA3QDM6CsBTCjTVR/9mqXbV/RgclYA39TTvFMBxvqU4a/X8V68w9HMCfKiX0WtA3VOv8tImAheJmUGtqSO1pQ5z8K72SjZLAE6AT2ANtIAV0FevUwggU2fAAXALLIGJeh9CSP4XlSowBqbAAnjNsuyr7IaffAOehB+C7e2WDgAAAABJRU5ErkJggg==);
  /*background-size: 18px 18px;*/
  display: block;
  height: 35px;
  opacity: 0.8;
  position: absolute;
  right: 24px;
  top: 0;
  width: 18px;
}

#header .admin-controls .dashboard:hover,
#header .admin-controls .new-post:hover {
  opacity: 1;
}

#header #follow-author {
  height: 65px;
  right: 0px;
  overflow: hidden;
  position: absolute;
  top: 0;
  width: 300px;
}






body.overview-open,
body.lightbox-open {
  overflow: hidden;
}

/* overview background. */
#overview .overview-backdrop,
#lightbox .lightbox-backdrop {
  background-color: black;
  bottom: 0;
  left: 0;
  opacity: 0;
  pointer-events: none;
  position: fixed;
  right: 0;
  top: 0;
  -moz-transition: all 1004ms ease-in;
-ms-transition: all 1004ms ease-in;
-o-transition: all 1004ms ease-in;
-webkit-transition: all 1004ms ease-in;
transition: all 1004ms ease-in;
  z-index: 3000;
}

#overview.open .overview-backdrop,
#lightbox.open .lightbox-backdrop {
  opacity: 0.7;
}

#overview.closing .overview-backdrop,
#lightbox.closing .lightbox-backdrop {
  opacity: 0;
  -moz-transition: opacity 0.5s;
-ms-transition: opacity 0.5s;
-o-transition: opacity 0.5s;
-webkit-transition: opacity 0.5s;
transition: opacity 0.5s;
}

.overview-panel,
.lightbox-panel {
  bottom: 0;
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  left: 20px;
  pointer-events: none;
  position: fixed;
  right: 20px;
  top: 50px;
  -moz-transition: all 1009ms ease-in-out;
-ms-transition: all 1009ms ease-in-out;
-o-transition: all 1009ms ease-in-out;
-webkit-transition: all 1009ms ease-in-out;
transition: all 1009ms ease-in-out;
  z-index: 3001; /* Way up in the air. */
}

.lightbox-title {
  bottom: 0;
  display: table-cell;
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 20px;
  height: 100%;
  left: 60px;
  line-height: 50px;
  overflow: hidden;
  position: absolute;
  right: 60px;
  text-align: center;
  text-overflow: ellipsis;
  top: 0;
  white-space: nowrap;
}

.lightbox-contentwrap {
  font-size: 14px;
  margin: 0 auto;
  max-width: 750px;
}

#overview.closing .overview-panel,
#lightbox.closing .lightbox-panel {
  opacity: 0;
  -moz-transition: opacity 0.5s;
-ms-transition: opacity 0.5s;
-o-transition: opacity 0.5s;
-webkit-transition: opacity 0.5s;
transition: opacity 0.5s;
}

/* Bounding box of our overview item. */
.overview-panel .overview-wrap,
.lightbox-panel .lightbox-wrap {
  background-color: transparent;
  -moz-border-radius: 6px 6px 0px 0px;
-ms-border-radius: 6px 6px 0px 0px;
-o-border-radius: 6px 6px 0px 0px;
-webkit-border-radius: 6px 6px 0px 0px;
border-radius: 6px 6px 0px 0px;
  
  
  -moz-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAABTUlEQVRIx+2W3WrDMAyF47hJWzrY+z/mYKNtnNhLxlE5PZNhN3NuahB24qDP+nMUOn8EmW1dVony7UJ7NorMvxTXQKa87/42Mh3CBasFJhEQftdVTq17JhlgfvdkUQBkgx2wLhX3eoOtCQDOgGaDsrIeoIFcGARYHPdmiWGh9baXAM4GNDFYJKW9424PWBxQR2416BNwBJBdG5xYDgJMTuyKuHL7ZjIgxy2SmIs1iUYBTk6SzPRs8hNPBg4OLALQk7VnAV7JkowDLA40MXCgzIxk8QAZqS4vAvyiupugOFGGLpSxKZBydekBIAMfsX4T4CeU3Qk0CdAsntXCSO5l4DafVnmvxPBjlRuBbE4CTIHqji01i44AnRC7c6Xor5Ab5C4WPy6AF/BfgM2TZteyaFL4u1xtTS/v5r+n5j/g5i3GLk1U8zZxl0a4Sav/DRDkGFoKi/1vAAAAAElFTkSuQmCC) 12 / 12px repeat;


-ms-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAABTUlEQVRIx+2W3WrDMAyF47hJWzrY+z/mYKNtnNhLxlE5PZNhN3NuahB24qDP+nMUOn8EmW1dVony7UJ7NorMvxTXQKa87/42Mh3CBasFJhEQftdVTq17JhlgfvdkUQBkgx2wLhX3eoOtCQDOgGaDsrIeoIFcGARYHPdmiWGh9baXAM4GNDFYJKW9424PWBxQR2416BNwBJBdG5xYDgJMTuyKuHL7ZjIgxy2SmIs1iUYBTk6SzPRs8hNPBg4OLALQk7VnAV7JkowDLA40MXCgzIxk8QAZqS4vAvyiupugOFGGLpSxKZBydekBIAMfsX4T4CeU3Qk0CdAsntXCSO5l4DafVnmvxPBjlRuBbE4CTIHqji01i44AnRC7c6Xor5Ab5C4WPy6AF/BfgM2TZteyaFL4u1xtTS/v5r+n5j/g5i3GLk1U8zZxl0a4Sav/DRDkGFoKi/1vAAAAAElFTkSuQmCC) 12 / 12px repeat;


-o-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAABTUlEQVRIx+2W3WrDMAyF47hJWzrY+z/mYKNtnNhLxlE5PZNhN3NuahB24qDP+nMUOn8EmW1dVony7UJ7NorMvxTXQKa87/42Mh3CBasFJhEQftdVTq17JhlgfvdkUQBkgx2wLhX3eoOtCQDOgGaDsrIeoIFcGARYHPdmiWGh9baXAM4GNDFYJKW9424PWBxQR2416BNwBJBdG5xYDgJMTuyKuHL7ZjIgxy2SmIs1iUYBTk6SzPRs8hNPBg4OLALQk7VnAV7JkowDLA40MXCgzIxk8QAZqS4vAvyiupugOFGGLpSxKZBydekBIAMfsX4T4CeU3Qk0CdAsntXCSO5l4DafVnmvxPBjlRuBbE4CTIHqji01i44AnRC7c6Xor5Ab5C4WPy6AF/BfgM2TZteyaFL4u1xtTS/v5r+n5j/g5i3GLk1U8zZxl0a4Sav/DRDkGFoKi/1vAAAAAElFTkSuQmCC) 12 / 12px repeat;

/* If border-image is declared below -webkit-border-image */
/* Webkit doesn't render correctly.                       */

border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAABTUlEQVRIx+2W3WrDMAyF47hJWzrY+z/mYKNtnNhLxlE5PZNhN3NuahB24qDP+nMUOn8EmW1dVony7UJ7NorMvxTXQKa87/42Mh3CBasFJhEQftdVTq17JhlgfvdkUQBkgx2wLhX3eoOtCQDOgGaDsrIeoIFcGARYHPdmiWGh9baXAM4GNDFYJKW9424PWBxQR2416BNwBJBdG5xYDgJMTuyKuHL7ZjIgxy2SmIs1iUYBTk6SzPRs8hNPBg4OLALQk7VnAV7JkowDLA40MXCgzIxk8QAZqS4vAvyiupugOFGGLpSxKZBydekBIAMfsX4T4CeU3Qk0CdAsntXCSO5l4DafVnmvxPBjlRuBbE4CTIHqji01i44AnRC7c6Xor5Ab5C4WPy6AF/BfgM2TZteyaFL4u1xtTS/v5r+n5j/g5i3GLk1U8zZxl0a4Sav/DRDkGFoKi/1vAAAAAElFTkSuQmCC) 12 / 12px repeat;


-webkit-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAABTUlEQVRIx+2W3WrDMAyF47hJWzrY+z/mYKNtnNhLxlE5PZNhN3NuahB24qDP+nMUOn8EmW1dVony7UJ7NorMvxTXQKa87/42Mh3CBasFJhEQftdVTq17JhlgfvdkUQBkgx2wLhX3eoOtCQDOgGaDsrIeoIFcGARYHPdmiWGh9baXAM4GNDFYJKW9424PWBxQR2416BNwBJBdG5xYDgJMTuyKuHL7ZjIgxy2SmIs1iUYBTk6SzPRs8hNPBg4OLALQk7VnAV7JkowDLA40MXCgzIxk8QAZqS4vAvyiupugOFGGLpSxKZBydekBIAMfsX4T4CeU3Qk0CdAsntXCSO5l4DafVnmvxPBjlRuBbE4CTIHqji01i44AnRC7c6Xor5Ab5C4WPy6AF/BfgM2TZteyaFL4u1xtTS/v5r+n5j/g5i3GLk1U8zZxl0a4Sav/DRDkGFoKi/1vAAAAAElFTkSuQmCC) 12 / 12px repeat;
  -moz-box-sizing: content-box;
-ms-box-sizing: content-box;
-o-box-sizing: content-box;
-webkit-box-sizing: content-box;
box-sizing: content-box;
  background-clip: padding-box;
  top: -12px;
  
  height: 100%;
  left: 0;
  margin: 0 auto;
  max-width: 1000px;
  overflow: hidden;
  padding: 0px 1px; /* The controls the inset of the overview-inner. */
  pointer-events: auto;
  position: relative;
  -moz-transition: left 0.5s linear;
-ms-transition: left 0.5s linear;
-o-transition: left 0.5s linear;
-webkit-transition: left 0.5s linear;
transition: left 0.5s linear;
  z-index: 3002;
}

.overview-panel.left .overview-wrap {
  left: -110%;
}

.overview-panel.right .overview-wrap {
  left: 110%;
}

/* This is the box that things can be draw in. */
.overview-panel .overview-inner,
.lightbox-panel .lightbox-inner {
  background-color: #fafafa;
  -moz-border-radius: 6px 6px 0px 0px;
-ms-border-radius: 6px 6px 0px 0px;
-o-border-radius: 6px 6px 0px 0px;
-webkit-border-radius: 6px 6px 0px 0px;
border-radius: 6px 6px 0px 0px;
  bottom: 0px;
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  height: 100%;
  position: relative;
  width: 100%;
}

.overview-panel .article {
  /* Defend against Chrome 12+ antialiasing bug. */
  background-color: #fafafa;
}

/* Header section for the overview-inner. */
.overview-panel .overview-header,
.lightbox-panel .lightbox-header {
  -moz-border-radius: 6px 6px 0px 0px;
-ms-border-radius: 6px 6px 0px 0px;
-o-border-radius: 6px 6px 0px 0px;
-webkit-border-radius: 6px 6px 0px 0px;
border-radius: 6px 6px 0px 0px;
  -moz-box-shadow: 0px 3px 3px rgba(200, 200, 200, .4);
-ms-box-shadow: 0px 3px 3px rgba(200, 200, 200, .4);
-o-box-shadow: 0px 3px 3px rgba(200, 200, 200, .4);
-webkit-box-shadow: 0px 3px 3px rgba(200, 200, 200, .4);
box-shadow: 0px 3px 3px rgba(200, 200, 200, .4);
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  height: 50px;
  padding: 10px;
  position: absolute;
  top: 0px;
  -moz-transition: box-shadow 0.2s linear;
-ms-transition: box-shadow 0.2s linear;
-o-transition: box-shadow 0.2s linear;
-webkit-transition: box-shadow 0.2s linear;
transition: box-shadow 0.2s linear;
  z-index: 5;
  width: 100%;
}

.overview-header .share-controls {
  float: left;
  margin-left: 10px;
  margin-top: 4px;
}

.overview-header .overview-controls-left {
  float: left;
}

.overview-header .overview-controls-right,
.lightbox-header .lightbox-controls-right {
  float: right;
}

/* overview container where we put the real stuff. */
.overview-panel .overview-content,
.lightbox-panel .lightbox-content {
  bottom: 0px;
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  overflow-y: scroll; /* Always show: comments may cause it to bounce. */
  padding: 10px;
  position: absolute;
  top: 50px;
  -moz-transition: all 1s linear;
-ms-transition: all 1s linear;
-o-transition: all 1s linear;
-webkit-transition: all 1s linear;
transition: all 1s linear;
  width: 100%;
  z-index: 1;
}

.overview-panel.start .overview-header,
.lightbox-panel.start .lightbox-header {
  -moz-box-shadow: none;
-ms-box-shadow: none;
-o-box-shadow: none;
-webkit-box-shadow: none;
box-shadow: none;
  min-width: 200px; /* Stop any buttons wrapping. */
}

/* Custom webkit scrollbars */

.overview-panel .overview-content::-webkit-scrollbar,
.lightbox-panel .lightbox-content::-webkit-scrollbar {
  background: transparent;
  height: 10px;
  width: 10px;
}

/* the start/end of bar  */
.overview-panel .overview-content::-webkit-scrollbar-button:start:decrement,
.overview-panel .overview-content::-webkit-scrollbar-button:end:increment,
.lightbox-panel .lightbox-content::-webkit-scrollbar-button:start:decrement,
.lightbox-panel .lightbox-content::-webkit-scrollbar-button:end:increment {
  display: block;
  height: 10px;
  width: 10px;
}

/* the track background */
.overview-panel.overview-content::-webkit-scrollbar-track-piece,
.lightbox-panel.lightbox-content::-webkit-scrollbar-track-piece {
  background-color: #eee;
}

/* the scrollbar itself */
.overview-panel .overview-content::-webkit-scrollbar-thumb,
.lightbox-panel .lightbox-content::-webkit-scrollbar-thumb {
  background-color: #666;
  height: 50px;
  width: 50px;
}

.overview-panel.start .overview-content:not(:hover)::-webkit-scrollbar-thumb,
.lightbox-panel.start .lightbox-content:not(:hover)::-webkit-scrollbar-thumb {
  background-color: #eee;
}

.overview-panel .overview-content::-webkit-scrollbar-thumb:hover,
.lightbox-panel .lightbox-content::-webkit-scrollbar-thumb:hover {
  background-color: #333;
  height: 50px;
  width: 50px;
}




body.viewitem-open {
  overflow: hidden;
}

/* Ensure header drawer is visible. */
body.viewitem-open #header .header-drawer {
  margin-top: 0px;
  position: fixed;
  top: 65px; /* animate back down to full unscrolled height */
}

/* While open, don't highlight the view menu. */
body.viewitem-open #header #views .menu-heading {
  color: rgba(255, 255, 255, 0.6) !important;
}

body.viewitem-open #header #views .menu-heading .indicator {
  border-color: rgba(255, 255, 255, 0.6) transparent transparent transparent !important;
}

body.viewitem-open .blogger-clickTrap.singleton-element {
  display: none;
}

.viewitem-panel {
  bottom: 0;
  border-top: solid 1px rgba(51, 51, 51, 1);
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  left: 0;
  margin-top: 0;
  position: fixed;
  right: 0;
  top: 100px;
  -moz-transition: margin-top 1s ease-in-out, bottom 1s ease-in-out;
-ms-transition: margin-top 1s ease-in-out, bottom 1s ease-in-out;
-o-transition: margin-top 1s ease-in-out, bottom 1s ease-in-out;
-webkit-transition: margin-top 1s ease-in-out, bottom 1s ease-in-out;
transition: margin-top 1s ease-in-out, bottom 1s ease-in-out;
  z-index: 999; /* Way up in the air. */
}

.viewitem-panel.new,
.viewitem-panel.closing {
  margin-top: -100%;
  bottom: 100%;
}

/* Bounding box of our overview item. */
.viewitem-panel .viewitem-wrap {
  background-color: white;
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  height: 100%;
  left: 0;
  margin: 0;
  overflow: hidden;
  position: relative;
  z-index: 9999;
}

/* Header section for the overview-inner. */
.viewitem-panel .viewitem-header {
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  height: 50px;
  padding: 10px;
  position: absolute;
  top: 0px;
  z-index: 5;
  width: 100%;
}

/* This is the box that things can be draw in. */
.viewitem-panel .viewitem-inner {
  bottom: 0px;
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  height: 100%;
  overflow-y: scroll;
  padding: 30px 0px;
  position: absolute;
  top: 0;
  width: 100%;
}

/* This allows us to be cute with continuous backgrounds */
.viewitem-panel .viewitem-background {
  background-color: rgba(238, 238, 238, 1);
  
  background-image: url(#EEEEEE none repeat scroll top left);
  background-position: left top;
  background-repeat: no-repeat;
  
  
  background-attachment: scroll; /* Chrome, really? */
  bottom: 0;
  left: 0;
  position: absolute;
  top: -100px; /* This should be the height of the header. */
  width: 100%;
}

/* overview container where we put the real stuff. */
.viewitem-panel .viewitem-content {
  background-color: white;
  background-clip: padding-box;
  /* TODO(kiyono): re-enable box-shadow when the performance of box-shadow */
  /* gets better.                                                          */
  
  
  -moz-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;


-ms-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;


-o-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;

/* If border-image is declared below -webkit-border-image */
/* Webkit doesn't render correctly.                       */

border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;


-webkit-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;
  border-width: 2px;
  
  padding: 20px 70px;
  left: 8px; /* Align it with classic in center - why is ther an offset? */
  max-width: 750px;
  margin: 0px auto;
  position: relative;
}

.viewitem-panel .article {
  background-color: white; /* Chrome12+ anti-aliasing bug. */
}

.viewitem-panel button.close {
  margin-right: 10px;
}

.viewitem-panel .blogger-gear {
  position: absolute;
  left: 50%;
  margin-left: -47px;
  margin-top: -47px;
  top: 50%;
}




/* Styles here should be minimized to limit amount of explicit casing. */

.article {
  font-size: 14px;
  margin: 0 auto;
  max-width: 750px;
  position: relative;
  word-wrap: break-word;
}

/* Post Header */

.article .article-header {
  display: table;
  text-align: center;
  width: 100%;
}

.article .article-header .title {
  font-size: 20px;
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  width: 100%;
  display: table-cell;
  vertical-align: middle;
  text-align: center;
  padding-right: 40px; /* Compensate for ribbon, to stay centered. */
}

.article .title .edit {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAA+UlEQVR42s3U2QmDQBAG4JRgKZbio4qieIAniniiYgkpwRIsISVYQkqwhMlMiHkIhITNhGRgYNeHz/1xncPhn0pV1dkwjNW2bYkNRAzCMIQ4jj+HdzBJEmiaBtq2hSzLxOFHcBgGGMcRuq4Tg5+Be9/gmQ2kxmdrnucSG9j3/TxNEy/IGvl3oKIokqZpC+sJdV1fHceBNE2vl5oDlC3LInBjAakw9tF13TPeNRljbwh8BlKZpnnGAXGkdRRFclEUd1gIpOj0cQijPa6VIAhOdV2LgXt03/cBoy8Ib57n0QvWsixz4XFG0XEuQlVVC8a23/6HX6A80DfrAlIMSJorw8fYAAAAAElFTkSuQmCC);
  background-repeat: no-repeat;
  background-position: center center;
  cursor: pointer;
  display: inline-block;
  height: 21px;
  opacity: 0.8;
  position: relative;
  top: 3px;
  width: 21px;
}

.article .title .edit:hover {
  opacity: 1;
}

.article .article-header .date {
  float: left;
  left: 0px;
  margin: 0px 5px 5px 0px;
  position: relative;
  top: 5px;
}

/* Post Content */

.article .article-content {
  clear: both;
  color: rgba(51, 51, 51, 1);
  line-height: 1.4;
  margin-top: 10px;
  margin: 10px auto 5px auto;
  text-align: justify;
}

/* This shouldn't really be added at all... it is from feeds. */
.article .article-content .blogger-post-footer {
  display: none;
}

/* Restore a lot of the styles we reset globally. */
.article-content ol {
  list-style-type: decimal;
  margin: 0.5em 0;
  padding-left: 2em;
}
.article-content ul {
  list-style-type: disc;
  margin: 0.5em 0;
  padding-left: 2em;
}

.article-content p {
  margin: 1em 0;
}

/* Defaults from: http://www.w3.org/TR/CSS2/sample.html */
.article-content h1,
.article-content h2,
.article-content h3,
.article-content h4,
.article-content h5,
.article-content h6 {
  font-weight: bolder;
}
.article-content h1 {
  font-size: 2em;
  margin: .67em 0;
}
.article-content h2 {
  font-size: 1.5em;
  margin: .75em 0;
}
.article-content h3 {
  font-size: 1.17em;
  margin: .83em 0;
}
.article-content h4 {
  margin: 1.12em 0;
}
.article-content h5 {
  font-size: .83em;
  margin: 1.5em 0;
}
.article-content h6 {
  font-size: .75em;
  margin: 1.67em 0;
}

.article .article-content a {
  display: inline;
}

.article .article-content img {
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  display: inline-block;
  height: auto;
  margin: 10px auto; /* Attempt to horizontally center. */
  /* For Sally-Anne. Keep images to the width of the post. */
  /* It's needed to avoid IE because of b/5420328 */
  
  max-width: 100%;
  
}

.article .article-content img:not(.deferred) {
  padding: 8px;
  /* TODO(kiyono): re-enable box-shadow when the performance of box-shadow */
  /* gets better.                                                          */
  
  
  -moz-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAOVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///+8yHYvAAAAEnRSTlMAAgEDBAUJBwYzCw0UChARDghnBteEAAAAhElEQVR4XnWRSxJDIQgEEx1Axd/L/Q8bKCuuyOzsohHxdZLS25LSOV2ULQdflgEiIDu9KqiIFILXXpeEx2ChXwdnKNxUGxc4dZbNfXjPufkp5H0Nwtymq/dltUIweNy9qmXt08EgydDZ6+dT+9Qh9AeGenhROFI0fPjMaCHx6uIlh9/xBSJuB3l0A/6JAAAAAElFTkSuQmCC) 9 / 9px stretch;


-ms-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAOVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///+8yHYvAAAAEnRSTlMAAgEDBAUJBwYzCw0UChARDghnBteEAAAAhElEQVR4XnWRSxJDIQgEEx1Axd/L/Q8bKCuuyOzsohHxdZLS25LSOV2ULQdflgEiIDu9KqiIFILXXpeEx2ChXwdnKNxUGxc4dZbNfXjPufkp5H0Nwtymq/dltUIweNy9qmXt08EgydDZ6+dT+9Qh9AeGenhROFI0fPjMaCHx6uIlh9/xBSJuB3l0A/6JAAAAAElFTkSuQmCC) 9 / 9px stretch;


-o-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAOVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///+8yHYvAAAAEnRSTlMAAgEDBAUJBwYzCw0UChARDghnBteEAAAAhElEQVR4XnWRSxJDIQgEEx1Axd/L/Q8bKCuuyOzsohHxdZLS25LSOV2ULQdflgEiIDu9KqiIFILXXpeEx2ChXwdnKNxUGxc4dZbNfXjPufkp5H0Nwtymq/dltUIweNy9qmXt08EgydDZ6+dT+9Qh9AeGenhROFI0fPjMaCHx6uIlh9/xBSJuB3l0A/6JAAAAAElFTkSuQmCC) 9 / 9px stretch;

/* If border-image is declared below -webkit-border-image */
/* Webkit doesn't render correctly.                       */

border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAOVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///+8yHYvAAAAEnRSTlMAAgEDBAUJBwYzCw0UChARDghnBteEAAAAhElEQVR4XnWRSxJDIQgEEx1Axd/L/Q8bKCuuyOzsohHxdZLS25LSOV2ULQdflgEiIDu9KqiIFILXXpeEx2ChXwdnKNxUGxc4dZbNfXjPufkp5H0Nwtymq/dltUIweNy9qmXt08EgydDZ6+dT+9Qh9AeGenhROFI0fPjMaCHx6uIlh9/xBSJuB3l0A/6JAAAAAElFTkSuQmCC) 9 / 9px stretch;


-webkit-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAOVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///+8yHYvAAAAEnRSTlMAAgEDBAUJBwYzCw0UChARDghnBteEAAAAhElEQVR4XnWRSxJDIQgEEx1Axd/L/Q8bKCuuyOzsohHxdZLS25LSOV2ULQdflgEiIDu9KqiIFILXXpeEx2ChXwdnKNxUGxc4dZbNfXjPufkp5H0Nwtymq/dltUIweNy9qmXt08EgydDZ6+dT+9Qh9AeGenhROFI0fPjMaCHx6uIlh9/xBSJuB3l0A/6JAAAAAElFTkSuQmCC) 9 / 9px stretch;
  border-width: 9px;
  
}

/* Resize all images/videos in posts. */
.article .article-content iframe,
.article .article-content embed {
  display: inline-block;
  /* It's needed to avoid IE because of b/5420328 */
  
  max-width: 100%;
  
}

/* Post Footer */

.article .article-footer {
  clear: both;
  text-align: center;
}

.article .article-footer .publish-info,
.article .article-footer .geolocation-info,
.article .article-footer .labels {
  color: rgba(128, 128, 128, 1);
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  padding: 5px 0;
}

.article .article-footer .publish-info .author a,
.article .article-footer .publish-info .time {
  color: rgba(51, 51, 51, 1);
}

.article .article-footer .label:not(:last-child):after {
  content: ',';
}

.article .article-footer .share-controls {
  display: inline-block;
  margin: 10px 5px;
  text-align: center;
}

/* AdSense */

.article.has-ads {
  padding-right: 220px;
  min-height: 650px; /* To accomodate skyscraper */
}

.article .adsense-aside {
  padding: 15px 5px 0 5px;
  position: absolute;
  right: 5px;
  text-align: center;
  top: 5px;
  width: 200px;
}

.article .adsense-footer .adsense {
  margin-top: 10px;
  padding: 10px 0;
}




.comments {
  clear: both;
  margin-top: 10px;
}

.comments .comments-header,
.comments .comments-footer {
  text-align: center;
}

.comments .comments-header {
  margin-bottom: 10px;
}

.comments .comments-header .comments-count {
  top: -2px;
}

.comments .comments-header h3 {
  display: inline-block;
  padding: 5px;
}

@media only screen and (max-device-width: 1024px) {
  .comments .comments-header h3 {
    color: #222;
    font-family: arial,sans-serif;
    text-decoration: underline;
  }
}
.comments .toggle-switch:hover h3 {
  cursor: pointer;
  text-decoration: underline;
}

/* Added by blogger for ghosted/removed comments .*/
.comments .deleted-comment {
  font-style: italic;
  opacity: 0.5;
}

/* While loading, hide the comment count, and then show an indicator. */
.comments.loading .comments-header .comments-count .bubble-content {
  visibility: hidden;
}

.comments.loading .comments-header .comments-count {
  background-image: url(data:image/gif;base64,R0lGODlhEAAQAPQAAGZmZv///2lpadzc3K+vr/r6+ufn5319fZmZmfDw8Le3t8DAwHV1daOjo4eHh9LS0srKygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAFUCAgjmRpnqUwFGwhKoRgqq2YFMaRGjWA8AbZiIBbjQQ8AmmFUJEQhQGJhaKOrCksgEla+KIkYvC6SJKQOISoNSYdeIk1ayA8ExTyeR3F749CACH5BAAKAAEALAAAAAAQABAAAAVoICCKR9KMaCoaxeCoqEAkRX3AwMHWxQIIjJSAZWgUEgzBwCBAEQpMwIDwY1FHgwJCtOW2UDWYIDyqNVVkUbYr6CK+o2eUMKgWrqKhj0FrEM8jQQALPFA3MAc8CQSAMA5ZBjgqDQmHIyEAIfkEAAoAAgAsAAAAABAAEAAABWAgII4j85Ao2hRIKgrEUBQJLaSHMe8zgQo6Q8sxS7RIhILhBkgumCTZsXkACBC+0cwF2GoLLoFXREDcDlkAojBICRaFLDCOQtQKjmsQSubtDFU/NXcDBHwkaw1cKQ8MiyEAIfkEAAoAAwAsAAAAABAAEAAABVIgII5kaZ6AIJQCMRTFQKiDQx4GrBfGa4uCnAEhQuRgPwCBtwK+kCNFgjh6QlFYgGO7baJ2CxIioSDpwqNggWCGDVVGphly3BkOpXDrKfNm/4AhACH5BAAKAAQALAAAAAAQABAAAAVgICCOZGmeqEAMRTEQwskYbV0Yx7kYSIzQhtgoBxCKBDQCIOcoLBimRiFhSABYU5gIgW01pLUBYkRItAYAqrlhYiwKjiWAcDMWY8QjsCf4DewiBzQ2N1AmKlgvgCiMjSQhACH5BAAKAAUALAAAAAAQABAAAAVfICCOZGmeqEgUxUAIpkA0AMKyxkEiSZEIsJqhYAg+boUFSTAkiBiNHks3sg1ILAfBiS10gyqCg0UaFBCkwy3RYKiIYMAC+RAxiQgYsJdAjw5DN2gILzEEZgVcKYuMJiEAOwAAAAAAAAAAAA==);
  background-position: center center;
  background-repeat: no-repeat;
  -moz-transition: none;
-ms-transition: none;
-o-transition: none;
-webkit-transition: none;
transition: none;
}

.blogger-comments .comments-content {
  background-color: whitesmoke;
  font-size: 13px;
  margin-bottom: 16px;
  -moz-border-radius: 10px;
-ms-border-radius: 10px;
-o-border-radius: 10px;
-webkit-border-radius: 10px;
border-radius: 10px;
  -moz-transition: all 0.5s ease-in;
-ms-transition: all 0.5s ease-in;
-o-transition: all 0.5s ease-in;
-webkit-transition: all 0.5s ease-in;
transition: all 0.5s ease-in;
}

@media only screen and (max-device-width: 1024px) {
  .blogger-comments .comments-content {
    background-color: #f1f1f1;
    border: 1px solid #bbb;
    -moz-border-radius: 0;
-ms-border-radius: 0;
-o-border-radius: 0;
-webkit-border-radius: 0;
border-radius: 0;
  }
}
.blogger-comments .comments-content .comment-actions {
  color: #999;
}
.comments .comment .comment-actions a {
  padding-top: 5px;
  padding-right: 5px;
}
.comments .comment .comment-actions a:hover {
  text-decoration: underline;
}
.blogger-comments .comments-content .secondary-link {
  color: #69c;
}
.blogger-comments .comments-content .comment-thread {
  list-style-type: none;
  padding: 0;
  text-align: left;
}
.blogger-comments .comments-content .inline-thread {
  padding: 0.5em;
}
.blogger-comments .comments-content .comment-thread {
  margin: 8px;
}
.blogger-comments .comments-content .comment-thread:empty {
  display: none;
}
.blogger-comments .comments-content .comment-replies {
  background-color: #ebebeb;
  margin-top: 1em;
  margin-left: 36px;
  -moz-border-radius: 10px;
-ms-border-radius: 10px;
-o-border-radius: 10px;
-webkit-border-radius: 10px;
border-radius: 10px;
}
.blogger-comments .comments-content .comment {
  border-bottom: 1px solid #e3e3e3;
  margin-bottom: 16px;
  padding-bottom: 8px;
}
.blogger-comments .comments-content .comment:first-child {
  padding-top: 16px;
}
.blogger-comments .comments-content .comment:last-child {
  border-bottom: 0;
  padding-bottom: 0;
}
.blogger-comments .comments-content .comment-body {
  position: relative;
}
.blogger-comments .comments-content .user {
  font-style: normal;
  font-weight: bold;
}
.blogger-comments .comments-content .datetime {
  margin-left: 6px;
}
.blogger-comments .comments-content .comment-header,
.blogger-comments .comments-content .comment-content {
  margin: 0 0 8px;
}
.blogger-comments .comments-content .comment-content {
  text-align: justify;
}
.blogger-comments .comments-content .owner-actions {
  position: absolute;
  right: 0;
  top: 0;
}

.blogger-comments .comments-replybox {
  border: none;
  height: 250px;
  width: 100%;
}

.blogger-comments .comment-replybox-single {
  margin-top: 5px;
  margin-left: 48px;
}
.blogger-comments .comment-replybox-thread {
  margin-top: 5px;
}

.blogger-comments .comments-content .user,
.blogger-comments .comments-content .user a {
  color: rgba(51, 51, 51, 1);
}

.blogger-comments .icon.blog-author {
  width: 18px;
  height: 18px;
  display: inline-block;
  background-repeat: no-repeat;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
  margin: 0 0 -4px 6px;
}

.blogger-comments .comments-content .loadmore a {
  background: #fafafa;
  border-top: 1px solid #e3e3e3;
  display: block;
  padding: 10px 16px;
  text-align: center;
}

.blogger-comments .thread-toggle {
  cursor: pointer;
  display: inline-block;
  color: rgba(0, 158, 184, 1);
}

.blogger-comments .continue {
  cursor: pointer;
}

.blogger-comments .continue a {
  color: #888;
  display: block;
  padding: 0.5em;
  background: white;
  border: 1px solid #CCC;
  -moz-box-shadow: inset 1px 1px 3px #888;
-ms-box-shadow: inset 1px 1px 3px #888;
-o-box-shadow: inset 1px 1px 3px #888;
-webkit-box-shadow: inset 1px 1px 3px #888;
box-shadow: inset 1px 1px 3px #888;
}

.blogger-comments .comments-content .loadmore:hover a {
  background: #f1f1f1;
  border-top: 1px solid #fff;
}

.blogger-comments .comments-content .loadmore {
  cursor: pointer;
  max-height: 3em;
}

.blogger-comments .comments-content .loadmore.loaded {
  max-height: 0px;
  opacity: 0;
  overflow: hidden;
  -moz-transition: all 0.5s ease-in;
-ms-transition: all 0.5s ease-in;
-o-transition: all 0.5s ease-in;
-webkit-transition: all 0.5s ease-in;
transition: all 0.5s ease-in;
}

@media only screen and (max-device-width: 1024px) {
  .blogger-comments .comments-content .loadmore a,
  .blogger-comments .comments-content .loadmore:focus a {
    background: none;
    border-top: 1px solid #ccc;
  }
}
.blogger-comments .thread-chrome.thread-collapsed {
  display: none;
}

.blogger-comments .thread-toggle {
  display: inline-block;
}

.blogger-comments .thread-toggle .thread-arrow {
  display: inline-block;
  height: 6px;
  width: 7px;
  overflow: visible;
  margin: 0.3em;
  padding-right: 4px;
}

.blogger-comments .thread-expanded .thread-arrow {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAG0lEQVR42mNgwAfKy8v/48I4FeA0AacVDFQBAP9wJkE/KhUMAAAAAElFTkSuQmCC") no-repeat scroll 0 0 transparent;
}

.blogger-comments .thread-collapsed .thread-arrow {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAJUlEQVR42mNgAILy8vL/DLgASBKnApgkVgXIkhgKiNKJ005s4gDLbCZBiSxfygAAAABJRU5ErkJggg==") no-repeat scroll 0 0 transparent;
}

.blogger-comments .avatar-image-container {
  float: left;
  width: 36px;
  max-height: 36px;
  overflow: hidden;
}

.blogger-comments .avatar-image-container img {
  width: 36px;
}

.blogger-comments .comment-block {
  margin-left: 48px;
  position: relative;
}

/* Responsive styles. */
@media screen and (max-device-width: 480px) {
  .blogger-comments .comments-content .comment-replies {
    margin-left: 0;
  }
}



.share-controls {
  overflow: hidden;
  text-align: center;
  white-space: nowrap;
}

.share-controls span,
.share-controls iframe {
  height: 20px !important;
}

.share-controls .share-plusone,
.share-controls .share-twitter,
.share-controls .share-facebook {
  /* PlusOne tries to reset a lot of settings, don't let it. */
  background-repeat: no-repeat !important;
  background-position: left center !important;
  display: inline-block;
  margin: 0;
}

/* To avoid the 'jitter' of buttons loading, set a background image
   of the button in its place. Once loaded, the button covers. */
.share-controls .share-plusone {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAUCAYAAADskT9PAAACrElEQVRIS8WW30tTYRjH37+roLyovKgor7xY0AySfoHSXRhSiRWUXYSEpAXRRSqsbSxlbI2xsaFt/aJEwTnn3Pm5n25uczi2b+d5ZQdP7JCVrYsP4zzPed7Pc973Pe8ZA8Ci0ahV44MGOgS5rORmkUhkeHl5GcViEfV6vSOQi5zkZouLi3KlUsHOzg6q1WpHIBc5yc0WFhZ4kAKdhJzkZuFwGOVy+b9AbhYKhVBKK5Cnn0MYv4e1/jNY7T2qsz7Qi8LKd2xvbx865GbBYBAx6ynkw++xu7uLZrMJ+ekdLleejaLRaPBuS6XSb5McGeDjmOXJzQKBABLaU9K6bG1tcWqlIuKXT/PizMewHj8oeTGFzbEhfRbN7iM38/v92LhpQaFQ0KGkMvFgbxZsrwy5dqxdPW+4phmNXzmH2MUTfAyzOnIzn8+HmKULOa3rfD6vo05P8uK0640h3o74tR7DtTT1GJVCjsdpDLM6cjOv18tvEmdfIpfL6UgTD7HW142SlDLE9xOznjRsWLqmOK0v/bYaMKsnN/N4PHvFluMQ7a+hajtefDeDeP9ZVFe+8k6z2WxbWu8ziVpnyf58qwGzenIzt9uNWmIV6tQjJO/eQOxCl1Z0BOWlT3wvZDKZXxLX9oBZnMYyqyM3m5+f50/Jj8hCnhfwoqUvSKfTB4Je03bxVgNmdeRmc3NzUBSFo6oqkrf6eFHsUjeEoFfP/Ql02FBzZnlyM5fLhZT7LTamxrAxPoLU6CDWr/fszYTlGM/JsvxPIDdzOp1IPrmNoiTwbmu1GurVinYO3NebEL59hiRJhw65mcPhEOj7TB2JosihJN/Rs5O8ic2ZF3rusEgkEiA3s9vtQ3QiUUAQBANFVeYNKNoy/Jz7G8hFTnIz+ltks9mGNWQNdAhyDZP7B9FT1Mw7jWv8AAAAAElFTkSuQmCC) !important;
  height: 20px;
  /* Don't touch anything other than min-width, causes havoc with +1 */
  min-width: 90px;
  -moz-transition: min-width 0.3s;
-ms-transition: min-width 0.3s;
-o-transition: min-width 0.3s;
-webkit-transition: min-width 0.3s;
transition: min-width 0.3s;
}
.share-controls .share-plusone.defer {
  min-width: 34px;
}
.share-controls .share-plusone.delay {
  min-width: 90px;
}

.share-controls .share-twitter {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAAUCAYAAAAp46XeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFSklEQVRYCd1Ye0yTVxT/9UFbCm15qKU8JhQQURFQfMBUog6VxMSJJo5tZsvcPzPGZJkxzmzLEmOWbZIlji1LZtxkbPMRzHyyKI4hWubkvWEtIC8RmEApKrUP2u6e28JaqMuMcYmc5Pb7zrn3PH73nHO/r5/A5XKhqt3oajNaMFVIGyZDZlyYQKBrG3TJpFKkRwZNFWyo6xmBxWqFkDI2lYBRhggP4RJOmXT5ASImmcXu9DP17Is4uMeBUXLdgC7jMDYsnA3tNOXjqP7vazk4u9Pl4/jkdT1yUhKgkAX4yPMOXYC+bwhJIRK8tjwN3nqkc7yyzmc9MevSEvD6qsWT5E8qaO4bRqBEiJgwxSNN8Z5zOJ3wHjcHHiBjXxF2H7sEXUs3n/v8ajNa7TKIFWEwDIxg99EyH515MZFYlpKItFgNatvuIE49jfMLtDN91nn7eZL7D4+W4svSqkfaJsR+D5S9uYsQGhGNMy0D2Pb9r3jv53qc67oPoSwYwiAlhMEh+KWlB0NmK9oHzXzn4mco8PbaxXhrjTtLr6xI43xtWycKzur4GrPNgY0fF6Gpq5/zV27cwo5Dp/l98eVGrN/3NZ8/VWOA1eGupurmbrz82Q987tOfKri8/M9b0N/uQ1mDHlsPHkePaYTbmPjDwZEh72G2O/DF5qUI08RAHKrGuc4H6LMI2FYIIRAFQEQAA4Px/P5i1Le2j+sOW0dxz+Y+nB5abSBeqVDgxJUavubiH624eacfP15t4PxRXRMkIgEITOH5CryzcRV2rs3EniNnoTN04dbd+9haeAy56bPw0db1KK014OCZy0iKjkCEMhBadTjeWJGOELlsPIYxHATUb+ZoYqZCgsWxaoiU4TxjBIwTAQyQInS6GkuTtRhm2fg3ot4dNttQ39GLi3UGZCTE8B03M/C/GTqQt2QOvi27hqykWKjkgVApg5Aep0GJrgEndbWIn65kpR7F+zsnNR7H2MaEK+QIVamgjZiBlWmJEIn8w+BSh4P1HBvdgw/4le6lYjEOrIxDUricZ2wcAOtPovx5kTj86krkZ6WM65Ce1cEy7CHiiVbPT8SZ32/gUmMLDr65gcsKTlVCzLK2KEnL+ebuPhRX1PBBQeekJ2HUMYqBEQu+Ka/m8hGbC/nZGdyf0xMHlTr5mTjIqM+jQMXSu4sdItroUMxRa9AwaMXdId93TpfDjsCHJuSnzgcZnkhOx2TZpoxkbD98GrOjpvNNeyE1GSVVDdiUmcqDWjY3AeV1TXh/yxqEyqU4WdmARfHRiFIEoaiiHttWL8VCbQTKGpshE0u5SyGroM5+I0xmCy/LiXEQzzNnZb1LQ86O1v2bstFpdODdC0040WLEkGeHaLHLbkWi3IVDL6bzIMf0vK+0QSq5BKpgBbdJc0vmaLmMSpD4LZlzyRzo0CF+R24mZrE+ytpTiOSdBfiOleRD1rsp8VHYm5eNzQeKELf9E+wqOs/1SOel5QtQ3Xobqz/4Cr0m87gvmqNBJCiuvuPKilWyI1UIkdBdRnKpBHr2OCjrMKHZkzmlVIzlEVKsm6WBeZStYyXzKIoLD0bPsAXW0X/WqIMksLkE/ISlkg+RCmGysjL2rNEo5XAymzb7KEJYT7WbWMUwnjIpE4tgZH0bqZKN26UYFZ66+8syOR5dxz03uCXPhUyKUxQghJS1j3ezEijHU35VI7/+fNDGUwL+K13rMvn2nLciOXA/wdzZ9J57mvf+gJG/xwE2Fh9PrOfRNCabMlf+Z9XMTjhNkO975LOMsHfEDrlIBMHYZwZ9S9uzjMcn9uRELf/M8DdRh83rstvalwAAAABJRU5ErkJggg==) !important;
  height: 20px;
  width: 110px;
  -moz-transition: width 0.3s;
-ms-transition: width 0.3s;
-o-transition: width 0.3s;
-webkit-transition: width 0.3s;
transition: width 0.3s;
}
.share-controls .share-twitter.defer {
  width: 57px;
}
.share-controls .share-twitter.delay {
  width: 110px;
}

.share-controls .share-facebook {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAUCAYAAAAk/dWZAAAACXBIWXMAAAsTAAALEwEAmpwYAAADQElEQVRIDd1XXUhTYRh+tjPb5mwNpzV0aSiWZESihMQI7M6bEn8ujKKCQMIuDKurpMQLQxQWNEUIIoT0wkIrC4MMNCOiZUWU1tD5/5fzd87jNtf3HV2d6c5+jKD1wtn3/n/Pe973nJ1P5HK5YB6ZdVnmWThXXQgVYsQiRCql2BOrEon6h2dcizYHolUySBhxqNQAh3MVU7PLiJBLIKYdCLUC6J2mN5zipvjFdIRCqQP8UaG4Ofx8JZ+/XPkM3wd+8FWCfFJ8FKquZgna/7ZB8CEItAAKMBhfj4Kcc2h/+gmjrIc2aEGwCF+ZMlLj8Op+IXdR3iuxwyguqkejyROhtacTJ4o6MUeD2Fncav2ISafXDAErJQF78hyrrmRhdHIB30wTmJkWHjkbibE7PBEq4g6i8pITCpqPYaCBjJd5a+yWOkG3ogVcu/0CvYNLQe3MWvpQ83gAnv2hKZbwUN+A4oY+OIjETvWhrKSedK0ep/TvMO1jl6CK2KmOwNmcNC6dSr2d46kuGHIs2mA20R65iYGcsaO95gHuDcWjtCABEligv9EFWXYWWgy5yJn/ivLnE+6ATWtQ45QQF4nzeelckkP7doFePf1TmJxe3JRYULFhRzmsaKxtwvuh3aitPgI1CXSMD+M1WTVGI/S9DMwEf//YcqApBf04w5vuQehO1nEP9IfeCVwsa/YdwFkZPz4SyLZJgWULTON2xGjC4KTzREinS8Fh0miHLhkydfSa0stvUOPkJd6nSk6sC4tWOFg7rEssrGTlBp4XZSPDk12YjVKdE9XlTegYX4VUq0Um8TGaV5CYrEVKcgyiFMJQNzSXl52wqftjPRU8aUf4tl/27i8jPMtvlhbRdrcVbW6Vai/unCMC74VEfWysGOkF2ShZaSaFPIGy4jgulGbgZnkXcl92cdGazEzU5WndmTxWn0V4ePIE+uXrl6RaVBhOe3VrqV5XEx+9IX9dCMPRM/nkWheVSbhuSCQdJN1jwqCQbqET9FPiUYcRsaoojMyu/Re4+Y36Y2kHvIL9c6UYinDyvPgh0dvPY66EGKUft3/X3Dc6DzE9XNBv81AkipviF9PTET1chFoh7kMRxS/6H46nPwG0xCqstPx1sgAAAABJRU5ErkJggg==) !important;;
  height: 20px;
  width: 90px;
  -moz-transition: width 0.3s;
-ms-transition: width 0.3s;
-o-transition: width 0.3s;
-webkit-transition: width 0.3s;
transition: width 0.3s;
}
.share-controls .share-facebook.defer {
  width: 51px;
}
.share-controls .share-facebook.delay {
  width: 90px;
}





#gadget-dock {
  background-color: #333;
  width: 50px;
  -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-ms-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-o-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);;
  -moz-border-radius: 2px 0 0 2px;
-ms-border-radius: 2px 0 0 2px;
-o-border-radius: 2px 0 0 2px;
-webkit-border-radius: 2px 0 0 2px;
border-radius: 2px 0 0 2px;;
  
  -moz-transition: right 0.15s ease-in-out;
-ms-transition: right 0.15s ease-in-out;
-o-transition: right 0.15s ease-in-out;
-webkit-transition: right 0.15s ease-in-out;
transition: right 0.15s ease-in-out;;
  
  position: fixed;
  right: -40px;
  top: 124px;
  z-index: 3000;
}


#gadget-dock:hover,

#gadget-dock.gadget-notifying,
#gadget-dock.gadget-opening {
  right: 0;
}

/* expand the hover area */
#gadget-dock:after {
  content: '';
  display: block;
  width: 90px;
  height: 110%;
  position: absolute;
  top: -5%;
  left: -40px;
  z-index: -100;
}

#gadget-dock.gadget-opening:after {
  display: none;
}

.gadget-item {
  position: relative;
  z-index: 1;
}

.gadget-selected {
  z-index: 0;
}

.gadget-item:empty {
  display: none;
}

.gadget-menu {
  cursor: pointer;
  background-color: #333;
  border-top: 1px solid #585858;
  text-align: center;
  z-index: 0;
}

.gadget-icons {
  width: 50px;
  height: 50px;
  line-height: 50px;
}

.gadget-menu .gadget-title {
  display: none;
}

.gadget-selected .gadget-menu {
  background-color: white;
  border-color: #ccc;
}

.gadget-item:first-child .gadget-menu {
  border-top: 1px solid transparent;
  -moz-border-radius: 2px 0 0 0;
-ms-border-radius: 2px 0 0 0;
-o-border-radius: 2px 0 0 0;
-webkit-border-radius: 2px 0 0 0;
border-radius: 2px 0 0 0;
}

.gadget-selected.gadget-item:first-child .gadget-menu {
  border-color: #ccc;
  -moz-border-radius: 0;
-ms-border-radius: 0;
-o-border-radius: 0;
-webkit-border-radius: 0;
border-radius: 0;
}

.gadget-item:last-child .gadget-menu {
  -moz-border-radius: 0 0 0 2px;
-ms-border-radius: 0 0 0 2px;
-o-border-radius: 0 0 0 2px;
-webkit-border-radius: 0 0 0 2px;
border-radius: 0 0 0 2px;
}

.gadget-selected.gadget-item:last-child .gadget-menu {
  -moz-border-radius: 0;
-ms-border-radius: 0;
-o-border-radius: 0;
-webkit-border-radius: 0;
border-radius: 0;
}

.gadget-icon, .gadget-icon-selected {
  display: inline-block;
  max-width: 30px;
  max-height: 30px;
  vertical-align: middle;
}

.gadget-icon-selected {
  display: none;
}

.gadget-selected .gadget-icon {
  display: none;
}

.gadget-selected .gadget-icon-selected {
  display: inline-block;
}




.gadget-container {
  background-color: white;
  -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-ms-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-o-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);;
  line-height: 1.4em;
  text-align: left;
  visibility: hidden;
  z-index: -1;
  margin-left: 100%;
  word-wrap: break-word;
  max-width: 700px;
}


.gadget-container {
  
  -moz-transition: right 0.15s ease-in-out, opacity 0.15s ease-in-out;
-ms-transition: right 0.15s ease-in-out, opacity 0.15s ease-in-out;
-o-transition: right 0.15s ease-in-out, opacity 0.15s ease-in-out;
-webkit-transition: right 0.15s ease-in-out, opacity 0.15s ease-in-out;
transition: right 0.15s ease-in-out, opacity 0.15s ease-in-out;;
  
  opacity: 0;
  position: absolute;
  top: 0;
  right: -100px;
}


.gadget-container:hover,
.gadget-item:hover .gadget-container,

.gadget-selected .gadget-container {
  visibility: visible;
  right: 49px;
  opacity: 1;
}

.gadget-selected .gadget-container {
  border: 1px solid #ccc;
  -moz-border-radius: 2px 0 0 2px;
-ms-border-radius: 2px 0 0 2px;
-o-border-radius: 2px 0 0 2px;
-webkit-border-radius: 2px 0 0 2px;
border-radius: 2px 0 0 2px;;
  cursor: auto;
  z-index: -100;
}

.gadget-selected.gadget-dock-overflow-bottom .gadget-container {
  position: fixed;
  bottom: 27px;
  top: auto;
}

.gadget-selected.gadget-dock-overflow-client-area .gadget-container {
  position: fixed;
  top: 0;
  bottom: 24px;
}




/* HACK: Because IE8 ignores max-width when "overflow-y: scroll" is set */
/* the scroll-bar is shown by the child element of .gadget-container.   */
.gadget {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  /* IE scroll-bar */
  scrollbar-arrow-color: white;
  scrollbar-track-color: white;
  scrollbar-face-color: #999;
  scrollbar-highlight-color: #999;
  scrollbar-shadow-color: #999;
  scrollbar-3dlight-color: white;
  scrollbar-darkshadow-color: white;
}
.gadget-selected.gadget-dock-overflow-client-area .gadget {
  overflow-y: scroll;
}

.gadget::-webkit-scrollbar {
  width: 14px;
}

.gadget::-webkit-scrollbar:hover {
  background-color: #f3f3f3;
}

.gadget::-webkit-scrollbar-thumb {
  border-width: 0 0 0 4px;
  border-color: #999;
  border-style: solid;
}

.gadget::-webkit-scrollbar-thumb:hover {
  border-width: 0 0 0 12px;
}

.gadget::-webkit-scrollbar-button {
  width: 14px;
  height: 16px;
}

.gadget::-webkit-scrollbar-corner {
  background-color: transparent;
}


.gadget-content {
  display: none;
  overflow: hidden;
  position: relative;
}

.gadget-selected .gadget-content {
  display: block;
}

.gadget-container .gadget-title {
  display: block;
  background-color: #333;
  color: white;
  display: block;
  font-size: 14px;
  padding: 1px 16px 0 16px;
  height: 50px;
  line-height: 50px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  position: relative;
}

.gadget-container .gadget-title:hover {
  text-decoration: underline;
}

.gadget-selected .gadget-container .gadget-title {
  background-color: transparent;
  color: black;
  font-size: 16px;
  height: 40px;
}

.gadget-selected .gadget-container .gadget-title:hover {
  text-decoration: none;
}

.gadget-content {
  background-color: white;
}

.gadget-resize-detector {
  background-color: transparent;
  border-style: none;
  margin: 0;
  padding: 0;
  outline: 0;
  width: 0;
  height: 100%;
  position: absolute;
  right: 0;
  top: 0;
  z-index: -1;
}






/* Center align posts. Border between them. */
ol.items {
  text-align: center;
  
  
  padding: 18px 10px 20px 10px;
  
}
li.item {
  background-color: white;
  background-clip: padding-box;
  /* TODO(kiyono): re-enable box-shadow when the performance of box-shadow */
  /* gets better.                                                          */
  
  
  -moz-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;


-ms-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;


-o-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;

/* If border-image is declared below -webkit-border-image */
/* Webkit doesn't render correctly.                       */

border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;


-webkit-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;
  border-width: 2px;
  
  padding: 20px 70px;
  max-width: 826px;
  margin: 0px auto;
  position: relative;
}
li.item + li.item {
  margin-top: 30px;
}
li.ad {
  padding: 0 0 20px 0;
  position: relative;
}
li.item + li.ad {
  padding-top: 20px;
}
li.ad ins.adsbygoogle {
  margin: 0px auto;
}
.article {
  position: static;
}

/* Ribbon to hang off the left. */
.article .article-header .date.ribbon {
  position: absolute;
  left: 20px;
  top: 20px;
}

/* Unloaded images to have loading indicator. */
img.deferred {
  background-repeat: no-repeat;
  background-position: center center;
  background-image: url(data:image/gif;base64,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);
  border: solid 1px #ccc;
}

@media only screen and (max-width : 600px) {
  #header-container {
    height: 81px;
  }
  #header .header-bar,
  #header .header-bar .title h1,
  #header .header-bar .title h3 {
    height: 48px;
  }
  #header .header-bar .title {
    height: 48px;
    line-height: 48px;
    margin-right: 50px;
  }
  #header .header-bar .title h1 {
    font-size: 20px;
  }
  #header .header-bar .title h3 {
    font-size: 16px;
  }
  /* Show magnifier icon instead of showing placeholder. */
  #header input#search {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAuElEQVQ4y72UQQ2GMAyFJwEJk1AJSEBCJUwCTiaB086/BCQgAQlQki55aSD/mhEO77Dt7UvXtQ2llPCWwlewKBpF1AO7Lv9EB2gXsRdGevECbKJFtAI0eWA1omz2GYCxBRYhojtz/hcdLkY1Lw/mSc/nFhipeX0wJw8sQPLtzw1wRq0wTHTWpyXzw646S6bGDgDVNLCnA6JCZ1V9GtYc9/Ymm2i5t9EtkHqnBkP+hjdGECHo03nm1gl0/D1dbs3/WAAAAABJRU5ErkJggg==);
    background-repeat: no-repeat;
    background-position: center center;
    color: transparent;
    top: 9px;
    -moz-transition: width 0.17s ease-in-out;
-ms-transition: width 0.17s ease-in-out;
-o-transition: width 0.17s ease-in-out;
-webkit-transition: width 0.17s ease-in-out;
transition: width 0.17s ease-in-out;;
    width: 22px;
  }
  #header input#search:focus {
    background-image: none;
    color: black;
    width: 200px;
  }
  #header input#search::-webkit-input-placeholder {
    color: transparent;
  }
  #header input#search:focus::-webkit-input-placeholder {
    color: #b5b5b5;
  }
  #header .header-drawer,
  #header .menu .menu-heading,
  #header .tabs li,
  #header .admin-controls,
  #header .admin-controls .dashboard,
  #header .admin-controls .new-post {
    height: 28px;
    line-height: 28px;
  }
  #header .header-drawer,
  #header .header-drawer.sticky {
    top: 17px;
  }
  
  #header:hover .header-drawer,
  #header .header-drawer.open {
    top: 48px;
  }
  
  #header .menu .menu-heading {
    height: 28px;
    line-height: 28px;
  }

  #header #pages::before {
  
    height: 14px;
  }
}

@media only screen and (max-width : 600px) {
  #gadget-dock {
    width: 40px;
    right: 0;
    top: 100px;
  }
  #gadget-dock:after {
    display: none;
  }
  .gadget-icons {
    width: 40px;
    height: 40px;
    line-height: 40px;
  }
  .gadget-container {
    max-width: 280px;
  }
  
  .gadget-container:hover,
  .gadget-item:hover .gadget-container,
  
  .gadget-selected .gadget-container {
    right: 39px;
  }
  .gadget-title {
    height: 40px;
    line-height: 40px;
  }
  .gadget-selected .gadget-title {
    line-height: 50px;
  }
}

@media only screen and (max-width : 600px) {
  li.item {
    padding: 20px 10px 20px 10px;
  }
  li.ad {
    padding: 0 0 20px 0;
  }
  .article .article-header {
    height: 64px;
  }
  .article .article-header .title {
    padding-right: 0px;
    padding-left: 50px;
  }
}



.article-content iframe {
  max-width: 100%;
}

.article-content a[imageanchor] {
  margin: 0 !important;
}</style><!-- Yo Dawg... --><meta name="meta" content="meta"><script class="dealply_content_script" id="__DealPly__746706.5145986596" type="text/javascript" src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/feedmon_extra.js"></script><script class="dealply_content_script" id="__DealPly__28094.96354132135" type="text/javascript" src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/crt.js"></script><script src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/-2117285666.js" type="text/javascript" id="__DealPly__224816.50207893955" class="dealply_content_script"></script></head>
<body class="classic notouch viewitem-open"><div class="viewitem-panel">
  <div class="viewitem-wrap">
    <div class="viewitem-background"></div>
    <div class="viewitem-header"></div>
    <div class="viewitem-inner">
      
      
      <div class="viewitem-content" tabindex="0">
      
  
<div class="article hentry consul docker docker_native_support_in_mesos marathon mesos mesos_docker " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://3.bp.blogspot.com/-__D-Qwo6oxA/VgtcsGTppkI/AAAAAAAAGWE/BdpURAI44i4/s640/Screen%2BShot%2B2015-09-29%2Bat%2B11.52.23%2BPM.png">
    <meta itemprop="thumbnailUrl" content="http://3.bp.blogspot.com/-__D-Qwo6oxA/VgtcsGTppkI/AAAAAAAAGWE/BdpURAI44i4/s640/Screen%2BShot%2B2015-09-29%2Bat%2B11.52.23%2BPM.png">
  
  <meta itemprop="blogId" content="9015838297196321746">
  <meta itemprop="postId" content="7479464868685402544">

  
  <div class="article-header">


<a class="ribbon date " title="30th September 2015" href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html" itemprop="url">


  <div class="top ribbon-piece">Sep</div>
  <div class="bottom ribbon-piece">30</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html" rel="bookmark" itemprop="url" data-item-type="post" data-id="7479464868685402544">



Mesos and Marathon Cluster - Part 2</a>
  
  

<span class="blog-admin"><a class="edit" href="https://www.blogger.com/post-edit.g?blogID=9015838297196321746&amp;postID=7479464868685402544&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div dir="ltr" style="text-align: left;" trbidi="on">
<div dir="ltr" style="text-align: left;" trbidi="on">
<div dir="ltr" style="text-align: left;" trbidi="on">
<div dir="ltr" style="text-align: left;" trbidi="on">
<span style="font-family: Verdana, sans-serif;">This is second article on how to launch a production ready mesos and marathon cluster, please read the first article <a href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-i.html">here</a>&nbsp;before you read this one.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">In the previous article,
 we launched a 6 node mesos cluster (3 master nodes + 3 slave nodes) but
 we didn't launch any task or container in that cluster. Let's do couple
 more things before we launch an application task or container in our 
cluster.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><b><u>Install Consul on all nodes of cluster</u></b></span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">There are many articles 
available on configuring consul so I will skip step by step 
instructions, a very good article is&nbsp;available&nbsp;<a href="https://www.digitalocean.com/community/tutorials/how-to-configure-consul-in-a-production-environment-on-ubuntu-14-04">here</a>. If you are not aware of consul, please read about it&nbsp;<a href="https://consul.io/">here</a>.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">We will use consul for service discovery and as our primary DNS for </span><b style="font-family: Verdana, sans-serif;">nodes</b><span style="font-family: Verdana, sans-serif;"> and </span><b style="font-family: Verdana, sans-serif;">docker</b><span style="font-family: Verdana, sans-serif;"> containers. When you install consul on all nodes of your cluster, please make sure you install consul in </span><b style="font-family: Verdana, sans-serif;">server mode on master nodes </b><span style="font-family: Verdana, sans-serif;">and in </span><b style="font-family: Verdana, sans-serif;">client mode on slave nodes</b><span style="font-family: Verdana, sans-serif;">. if we happen to add a new client node&nbsp;in future, consul will also be installed on that node in client mode. Also install <b>consul UI</b> on all nodes of cluster.</span><br>
<b style="-webkit-text-stroke-width: 0px; background-color: white; color: #333333; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: 19.6000003814697px; orphans: auto; text-align: left; text-decoration: underline; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;"></b><br>
<div style="-webkit-text-stroke-width: 0px; background-color: white; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; margin: 0px; orphans: auto; outline: none; padding: 0px; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;">
<div style="background-color: white; margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin: 0px 0px 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="margin: 0px; outline: none; padding: 0px; white-space: normal;">
<div style="margin: 0px; outline: none; padding: 0px;">
If you do everything correctly, output of "<span style="color: blue;">consul members</span>" should look similar to this<br>
Node &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Address &nbsp; &nbsp; &nbsp; &nbsp;Status &nbsp;Type &nbsp; &nbsp;Build &nbsp;Protocol &nbsp;DC</div>
<div style="color: black; margin: 0px; outline: none; padding: 0px;">
mesos-slave1 &nbsp; XX.X.X.X:8301 &nbsp;alive &nbsp; client &nbsp;0.5.2 &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; dev</div>
<div style="color: black; margin: 0px; outline: none; padding: 0px;">
mesos-slave2 &nbsp;&nbsp;XX.X.X.X:8301 &nbsp;alive &nbsp; client &nbsp;0.5.2 &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; dev</div>
<div style="color: black; margin: 0px; outline: none; padding: 0px;">
mesos-master1 &nbsp;XX.X.X.X:8301 &nbsp;alive &nbsp; server &nbsp;0.5.2 &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; dev</div>
<div style="color: black; margin: 0px; outline: none; padding: 0px;">
mesos-master2 &nbsp;XX.X.X.X:8301 &nbsp;alive &nbsp; server &nbsp;0.5.2 &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; dev</div>
<div style="color: black; margin: 0px; outline: none; padding: 0px;">
mesos-master3 &nbsp;XX.X.X.X:8301 &nbsp;alive &nbsp; server &nbsp;0.5.2 &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; dev</div>
<div style="color: black; margin: 0px; outline: none; padding: 0px;">
mesos-slave3 &nbsp;&nbsp;XX.X.X.X:8301 &nbsp;alive &nbsp; client &nbsp;0.5.2 &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; dev</div>
</div>
</pre>
</div>
</div>
</div>
<span style="font-family: Verdana, sans-serif;">Also when you hit <span style="color: blue;">&lt;ANY_MASTER_OR_SLAVE_NODE_IP&gt;</span>:8500, you should see consul ui</span><br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-__D-Qwo6oxA/VgtcsGTppkI/AAAAAAAAGWE/BdpURAI44i4/s1600/Screen%2BShot%2B2015-09-29%2Bat%2B11.52.23%2BPM.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/ScreenShot2015-09-29at11.png" width="640" height="112" border="0"></a></div>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><b><u><br></u></b></span><br>
<span style="font-family: Verdana, sans-serif;"><b><u>Install&nbsp;dnsmasq on all nodes of cluster</u></b></span><br>
<span style="font-family: Verdana, sans-serif;"><b><u><br></u></b></span>
<span style="font-family: Verdana, sans-serif;"><span style="background-color: white;"><span style="color: #222222;"><span style="line-height: 19.2000007629395px;">DNSMasq is a&nbsp;</span></span></span><span style="background-color: white; color: #222222; font-size: 16px; line-height: 24px;">lightweight and easy to configure DNS forwarder. Once enabled,&nbsp;</span><span style="background-color: white; color: #222222; font-size: 16px; line-height: 24px;">all
 DNS queries from the local machine will go to dnsmasq so dnsmasq must 
be configured to forward all those queries to upstream DNS servers, 
which in our case is consul running on each node. This will make service
 discovery painless.</span></span><br>
<div style="background-color: white; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="margin: 0px; outline: none; padding: 0px; white-space: normal;">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
sudo apt-get -y install dnsmasq</div>
<div style="margin: 0px; outline: none; padding: 0px;">
echo "server=/consul/127.0.0.1#8600" | sudo tee /etc/dnsmasq.d/10-consul</div>
<div style="margin: 0px; outline: none; padding: 0px;">
sudo /etc/init.d/dnsmasq restart</div>
</div>
</div>
</pre>
</div>
</div>
</div>
<span style="font-family: Verdana, sans-serif;">Once dnsmasq is restarted, all DNS queries will go to consul first. In order to test it quickly run "<span style="color: blue;">nslookup consul.service.consul"&nbsp;</span>and you should see the results coming back. You will realize the importance of this in few minutes.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">At this point, our configuration looks like this</span><br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-9PtbfnElNU8/VgtmF4kuDKI/AAAAAAAAGWU/nCH9HnVhN9A/s1600/diagram.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/diagram.png" width="640" height="355" border="0"></a></div>
<span style="font-family: Verdana, sans-serif;"><b><u>Register Zookeeper and Marathon running on Master nodes with Consul</u></b></span><br>
<span style="font-family: Verdana, sans-serif;"><b><u><br></u></b></span>
<span style="font-family: Verdana, sans-serif;">Run the following 
commands on Master instances to register zookeeper and marathon as 
consul services. (You may have to change the commands a little bit based
 on your consul config directory location)</span><br>
<div style="background-color: white; margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="margin: 0px; outline: none; padding: 0px;">
<span style="font-size: 14px; white-space: normal;">echo '{"service": {"name": "marathon", "tags": ["marathon"], "port": 8080, "check": {"script": "curl localhost:8080 &gt;/dev/null 2&gt;&amp;1", "interval": "10s"}}}' | sudo tee /etc/consul.d/marathon.json</span></div>
<span style="font-size: 14px; white-space: normal;">echo '{"service": {"name": "zookeeper", "tags": ["zookeeper"], "port": 2181}}' | sudo tee /etc/consul.d/zookeeper.json</span></pre>
</div>
</div>
<span style="font-family: Verdana, sans-serif;">Once zookeeper and marathon are registered with consul, try running <span style="color: blue;">nslookup zookeeper.service.consul</span> and <span style="color: blue;">nslookup marathon.service.consul</span> on any of the nodes. Impressive right?? Also in Consul UI, you should see something like this</span><br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-zpRQzXXmdKY/VgtrFJXlXxI/AAAAAAAAGWk/RpNXyY8YJCI/s1600/Screen%2BShot%2B2015-09-30%2Bat%2B12.54.25%2BAM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/ScreenShot2015-09-30at12.png" width="640" height="148" border="0"></a></div>
<span style="font-family: Verdana, sans-serif;"><br></span><span style="font-family: Verdana, sans-serif;">I
 really hope you are following how consul is making service discovery 
painless here. There are few more questions that we need to answer 
before we launch our first application container</span><br>
<ul style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">Service discovery is
 working great using consul on cluster nodes but will it work inside 
containers in the same way when we launch containers?</span></li>
<li><span style="font-family: Verdana, sans-serif;">Manual Service 
registration with consul (as we did for zookeeper and marathon) is not 
scalable. How will applications running inside containers will be 
registered/de-registered with consul.</span></li>
</ul>
<div>
<span style="font-family: Verdana, sans-serif;">Let's do few more things to answer these questions</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<b style="font-family: Verdana, sans-serif;"><u>Configure Consul as DNS Server for use by Docker containers on Slave Nodes</u></b><br>
<span style="-webkit-text-stroke-width: 0px; background-color: white; color: #333333; font-family: Verdana, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 19.6000003814697px; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;"></span><br>
<div style="-webkit-text-stroke-width: 0px; background-color: white; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 19.6000003814697px; margin: 0px; orphans: auto; outline: none; padding: 0px; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="margin: 0px; outline: none; padding: 0px; white-space: normal;">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="color: #333333; margin: 0px; outline: none; padding: 0px;">
# Modify Docker config file</div>
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="color: #333333; margin: 0px; outline: none; padding: 0px;">
sudo vi /etc/default/docker</div>
<div style="color: #333333; margin: 0px; outline: none; padding: 0px;">
# Add following to DOCKER_OPTS</div>
<div style="margin: 0px; outline: none; padding: 0px;">
<span style="color: #333333;">--dns </span><span style="color: blue;">&lt;SLAVE_NODE_IP&gt;</span><span style="color: #333333;"> --dns-search service.consul</span></div>
<div style="color: #333333; margin: 0px; outline: none; padding: 0px;">
sudo restart docker</div>
</div>
</div>
</div>
</pre>
</div>
</div>
</div>
</div>
<div>
<span style="font-family: Verdana, sans-serif;">This will solve our first problem of service discovery inside containers.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><b><u><br></u></b></span>
<span style="font-family: Verdana, sans-serif;"><b><u>Launch mesos-consul docker container using Marathon</u></b></span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Our second problem of application registration and de-registration will be solved by&nbsp;<a href="https://github.com/CiscoCloud/mesos-consul">mesos-consul</a>.&nbsp;</span><span style="font-family: Verdana, sans-serif;"><b>mesos-consul</b> is a Mesos to Consul bridge for service discovery.&nbsp;</span><span style="font-family: Verdana, sans-serif;">Mesos-consul automatically registers/deregisters services running as Mesos tasks.&nbsp;</span><span style="font-family: Verdana, sans-serif;">if you have a Mesos task called application, this program will register the <b>application</b> in Consul, and it will be exposed via DNS as <b>application.service.consul</b>.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<br>
<div style="-webkit-text-stroke-width: 0px; background-color: white; color: #333333; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 19.6000003814697px; margin: 0px; orphans: auto; outline: none; padding: 0px; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="margin: 0px; outline: none; padding: 0px;">
# Save the following json as mesos-consul.json on any node of cluster
<span style="white-space: normal;">{</span>
<span style="white-space: normal;">&nbsp; "args": [</span>
<span style="white-space: normal;">&nbsp; &nbsp; "--zk=zk://zookeeper.service.consul:2181/mesos",</span>
<span style="white-space: normal;">&nbsp; &nbsp; "--log-level=debug",</span>
<span style="white-space: normal;">&nbsp; &nbsp; "--consul",</span>
<span style="white-space: normal;">&nbsp; &nbsp; "--refresh=5s"</span>
<span style="white-space: normal;">&nbsp; ], &nbsp;</span>
<span style="white-space: normal;">&nbsp; "container": {</span>
<span style="white-space: normal;">&nbsp; &nbsp; "type": "DOCKER",</span>
<span style="white-space: normal;">&nbsp; &nbsp; "docker": {</span>
<span style="white-space: normal;">&nbsp; &nbsp; &nbsp; "network": "BRIDGE",</span>
<span style="white-space: normal;">&nbsp; &nbsp; &nbsp; "image": "ciscocloud/mesos-consul"</span>
<span style="white-space: normal;">&nbsp; &nbsp; } &nbsp;&nbsp;</span>
<span style="white-space: normal;">&nbsp; }, &nbsp;</span>
<span style="white-space: normal;">&nbsp; "id": "mesos-consul",</span>
<span style="white-space: normal;">&nbsp; "instances": 1,</span>
<span style="white-space: normal;">&nbsp; "cpus": 0.1,</span>
<span style="white-space: normal;">&nbsp; "mem": 256&nbsp;</span>
<span style="white-space: normal;">}</span>
# Run this command to launch mesos-consul docker container</div>
curl -X POST -d@mesos-consul.json -H "Content-Type: application/json" http://marathon.service.consul:8080/v2/apps</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<span style="font-family: Verdana, sans-serif;">Once the submit the above command, check <b>Marathon-UI</b>, <b>Mesos-UI </b>and <b>Consul-UI</b>. Most interesting thing that you will observe will be 2 new services in Consul-UI called <b>mesos</b> and <b>mesos-consul</b>, both of them are registered in consul by mesos-consul docker container launched above.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-k7Lb9u5PRdw/Vh3K7g0_bvI/AAAAAAAAGYM/iCqUtv6bB0k/s1600/Screen%2BShot%2B2015-10-13%2Bat%2B11.24.13%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/ScreenShot2015-10-13at11.png" width="640" height="210" border="0"></a></div>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>

<span style="font-family: Verdana, sans-serif;">Given the fact that mesos-consul docker container is able to communicate with&nbsp;<span style="color: blue;">zookeeper.service.consul (</span>passed
 to container as an argument) proves that docker containers are able to 
use consul running on host machines as their DNS server. Pretty Cool, 
Right??</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">At this point try&nbsp;</span><span style="color: blue; font-family: Verdana, sans-serif;">nslookup leader.mesos.service.consul,&nbsp;</span><span style="color: blue; font-family: Verdana, sans-serif;">nslookup master.mesos.service.consul,&nbsp;</span><span style="color: blue; font-family: Verdana, sans-serif;">nslookup agent.mesos.service.consul</span><span style="font-family: Verdana, sans-serif;">&nbsp;and&nbsp;</span><span style="color: blue; font-family: Verdana, sans-serif;">nslookup mesos-consul.service.consul</span><span style="font-family: Verdana, sans-serif;">&nbsp;on any of the nodes and check the results.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Finally Its time to run our first application container :)</span><br>
<span style="-webkit-text-stroke-width: 0px; background-color: white; color: #333333; font-family: Verdana, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 19.6px; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;"></span><br>
<div dir="ltr" style="-webkit-text-stroke-width: 0px; background-color: white; color: #333333; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 19.6px; margin: 0px; orphans: auto; outline: none; padding: 0px; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;" trbidi="on">
<div dir="ltr" style="margin: 0px; outline: none; padding: 0px; text-align: left;" trbidi="on">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="-webkit-text-stroke-width: 0px; background-color: white; color: #333333; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 19.6px; margin: 0px; orphans: auto; outline: none; padding: 0px; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="margin: 0px; outline: none; padding: 0px;">
</div>
<span style="color: black; font-size: small; line-height: normal;">curl -X POST -H "Content-Type: application/json" marathon.service.consul:8080/v2/apps -d '
{
    "container": {
      "type": "DOCKER",
      "docker": {
        "image": "libmesos/ubuntu"
      }
    },
    "id": "mohit",
    "instances": 1,
    "cpus": 0.5,
    "mem": 128,
    "uris": [],
    "cmd": "while sleep 10; do date -u +%T; done"
}'</span></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<br>
<span style="font-family: Verdana, sans-serif;">Once the submit the above command, check&nbsp;</span><b style="font-family: Verdana, sans-serif;">Marathon-UI</b><span style="font-family: Verdana, sans-serif;">,&nbsp;</span><b style="font-family: Verdana, sans-serif;">Mesos-UI&nbsp;</b><span style="font-family: Verdana, sans-serif;">and&nbsp;</span><b style="font-family: Verdana, sans-serif;">Consul-UI</b><span style="font-family: Verdana, sans-serif;">.&nbsp;You will notice that container is running, try scaling out, destroying the containers etc. via marathon.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Again my favorite part, run&nbsp;</span><span style="color: blue; font-family: Verdana, sans-serif;">nslookup mohit.service.consul</span><br>
<span style="color: blue; font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">At this point, you have a
 production ready mesos cluster running, where docker containers are 
launched and managed by marathon. Any mesos task gets registered with 
consul for easier service discovery.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">In next part we will add few more cool tools in this cluster to load balance the serrvices.</span></div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2015-09-30T03:11:00.000Z" itemprop="datePublished">30th September 2015</abbr> by <a class="url fn" href="http://www.blogger.com/profile/06918659071352983654" rel="author" itemprop="author">Mohit Arora</a>
  
  
</div>

    


    
    <div class="labels" itemprop="keywords">
      Labels: <a class="label" href="http://2mohitarora.blogspot.in/search/label/consul" target="_self">consul</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/Docker" target="_self">Docker</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/docker%20native%20support%20in%20mesos" target="_self">docker native support in mesos</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/marathon" target="_self">marathon</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/mesos" target="_self">mesos</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/mesos%20docker" target="_self">mesos docker</a> 
    </div>
    
    
    
<div class="share-controls  delay" data-defer="" data-delay="1000">
<span style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent none repeat scroll 0% 0%; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px;" id="___plusone_0" class="share-plusone g-plusone  delay" data-href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html" data-hl="en" data-size="medium" data-source="blogger:blog:plusone" data-annotation="bubble" data-width="90" data-text="Mesos and Marathon Cluster - Part 2"><iframe title="+1" data-gapiattached="true" src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/fastbutton.html" name="I0_1457931124380" id="I0_1457931124380" vspace="0" tabindex="0" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" scrolling="no" marginwidth="0" marginheight="0" hspace="0" width="100%" frameborder="0"></iframe></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button  delay" data-url="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html" data-count="" data-size="" data-text="Mesos and Marathon Cluster - Part 2"><iframe src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/tweet_button.html" scrolling="no" allowtransparency="true" frameborder="0"></iframe></span>


<span class="share-facebook  delay" data-url="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html" data-count="" data-layout="" data-text="Mesos and Marathon Cluster - Part 2"><iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2F2mohitarora.blogspot.com%2F2015%2F09%2Fmesos-and-marathon-cluster-part-2.html&amp;send=false&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;colorscheme=light" scrolling="no" allowtransparency="true" frameborder="0"></iframe></span>

</div>

    
  </div>

  

  
  
    
    
<div class="comments" data-defer="">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="1 comment">
  <span class="bubble-content">1</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    View comments
    
    </h3>
  </div>
  
<div style="display: block;" class="comments-wrapper blogger-comments toggle-container" data-itemid="7479464868685402544">
  <div class="comments-content"><div id="bc_0_1C" kind="c"><div id="bc_0_1CT"><div id="bc_0_0T" class="comment-thread" kind="r" t="0" u="0"><ol id="bc_0_0TB"><li id="bc_0_2B" class="comment" kind="b"><div class="avatar-image-container"><img src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/photo.png"></div><div id="c5782853067118576992" class="comment-block"><div id="bc_0_2M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="http://www.blogger.com/profile/12673095943829323279">Vijay Kumar</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html?showComment=1445851799641#c5782853067118576992">October 26, 2015 at 2:29 AM</a></span></div><p id="bc_0_2MC" class="comment-content">Hi Mohit,<br><br>Thanks for the wonderful post.<br>Can weave be used for docker networking and can you explain how weave consul can implemented to have the cluster running.<br>It would be good if you can give a hands on same as the above for weave too.<br>Regards,<br>Vijay</p><span id="bc_0_2MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-1006558542"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=9015838297196321746&amp;postID=5782853067118576992">Delete</a></span></span></div><div id="bc_0_2BR" class="comment-replies"></div><div id="bc_0_2B_box" class="comment-replybox-single"></div></li></ol><div style="display: none;" id="bc_0_0I" class="continue" kind="ci"><a href="javascript:;" target="_self">Add comment</a></div><div id="bc_0_0T_box" class="comment-replybox-thread"><iframe src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/comment-iframe_003_002.html" class="comments-replybox" data-src="https://www.blogger.com/comment-iframe.g?blogID=9015838297196321746&amp;postID=7479464868685402544" frameborder="0"></iframe></div><div style="display: none;" id="bc_0_0L" class="loadmore" kind="rb"><a href="javascript:;" target="_self">Load more</a></div></div></div></div></div>
  <div class="comments-footer">
    
  </div>
</div>

</div>

    
    
  
  
</div>

  

      
      </div>
      
    </div>
  </div>
</div>









<div id="header-container">
  <div id="header" class="header">
    <div class="header-bar">
      
<span class="title" onclick="$('html,body').stop().animate({'scrollTop': 0})">
  <a href="http://2mohitarora.blogspot.in/" target="_self"><h1 title="Technical Blog">Technical Blog</h1></a>
  
</span>
<input id="search" autocomplete="off" placeholder="Search" type="text">

      
    </div>
    <div class="header-drawer sticky open">
      
      <div id="views" class="tabs">
        <span class="menu-heading">Classic<span class="indicator"></span></span>
        <ul>
          
          <li class="Classic"><span class="menu-background"></span><a class="menu-item current" href="http://2mohitarora.blogspot.in/2015/09/mesos-and-marathon-cluster-part-2.html?view=classic" target="_self" data-view-name="classic">Classic</a></li>
          
          <li class="Flipcard"><span class="menu-background"></span><a class="menu-item" href="http://2mohitarora.blogspot.in/2015/09/mesos-and-marathon-cluster-part-2.html?view=flipcard" target="_self" data-view-name="flipcard">Flipcard</a></li>
          
          <li class="Magazine"><span class="menu-background"></span><a class="menu-item" href="http://2mohitarora.blogspot.in/2015/09/mesos-and-marathon-cluster-part-2.html?view=magazine" target="_self" data-view-name="magazine">Magazine</a></li>
          
          <li class="Mosaic"><span class="menu-background"></span><a class="menu-item" href="http://2mohitarora.blogspot.in/2015/09/mesos-and-marathon-cluster-part-2.html?view=mosaic" target="_self" data-view-name="mosaic">Mosaic</a></li>
          
          <li class="Sidebar"><span class="menu-background"></span><a class="menu-item" href="http://2mohitarora.blogspot.in/2015/09/mesos-and-marathon-cluster-part-2.html?view=sidebar" target="_self" data-view-name="sidebar">Sidebar</a></li>
          
          <li class="Snapshot"><span class="menu-background"></span><a class="menu-item" href="http://2mohitarora.blogspot.in/2015/09/mesos-and-marathon-cluster-part-2.html?view=snapshot" target="_self" data-view-name="snapshot">Snapshot</a></li>
          
          <li class="Timeslide"><span class="menu-background"></span><a class="menu-item" href="http://2mohitarora.blogspot.in/2015/09/mesos-and-marathon-cluster-part-2.html?view=timeslide" target="_self" data-view-name="timeslide">Timeslide</a></li>
          
        </ul>
      </div>
      
      
      <div style="" class="blog-admin admin-controls">
        <a class="new-post" href="https://www.blogger.com/post-edit.g?blogID=9015838297196321746&amp;from=pencil" target="_self" title="New post"></a>
        <a class="dashboard" href="https://www.blogger.com/home" target="_self" title="Dashboard"></a>
      </div>
    </div>
  </div>
</div>
<script>
  (function($) {
    // Make the pages switch between tabs and menu as needed
    var pages = $('#pages');
    var tabs = pages.length ? pages : $('#views'); // If no pages, views will be tabs, same resizing applies.
    if (tabs.length) {
      function onResize(e) {
        tabs.removeClass('menu').addClass('tabs');
        var taken = 0;
        tabs.parent().children().each(function() {
          taken += $(this).outerWidth();
        });
        var overflowing = tabs.parent().width() < (taken + 50); // Add a buffer for safety.
        overflowing ? tabs.removeClass('tabs').addClass('menu') : tabs.addClass('tabs');
      }
      $(window).resize(onResize);
      onResize(); // Resize immediately.

      // Mark a page as selected when it is open.
      var rePage = new RegExp('.*/p(/[^/]+.html$)');
      $(blogger.ui()).bind('select clearselection', function(e, item) {
        pages.find('.menu-item').each(function(){
          var current = false;
          if (item) {
            var us = rePage.exec($(this).attr('href'));
            var them = rePage.exec(item.url);
            current = !!(us && them && (us[1] == them[1]));
          }
          $(this).toggleClass('current', current);
        });
      });
    }
  })(jQuery);
</script>




<div id="main" class="hfeed " tabindex="0">
  <ol id="items" class="items"><li class="item" data-id="5517329749880835624">
  
<div class="article hentry forcewithlease git_tips git_worktree rebaseautostash " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
  <meta itemprop="blogId" content="9015838297196321746">
  <meta itemprop="postId" content="5517329749880835624">

  
  <div class="article-header">


<a class="ribbon date " title="1st February" href="http://2mohitarora.blogspot.com/2016/01/git-tips.html" itemprop="url">


  <div class="top ribbon-piece">Feb</div>
  <div class="bottom ribbon-piece">1</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://2mohitarora.blogspot.com/2016/01/git-tips.html" rel="bookmark" itemprop="url" data-item-type="post" data-id="5517329749880835624">



Git Tips</a>
  
  

<span class="blog-admin"><a class="edit" href="https://www.blogger.com/post-edit.g?blogID=9015838297196321746&amp;postID=5517329749880835624&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div dir="ltr" style="text-align: left;" trbidi="on">
<span style="font-family: &quot;verdana&quot; , sans-serif;">Its been a 
while since I checked, what's new in latest version of git so decided to
 check release note of last few versions this weekend and found some 
pretty neat improvements that will solve few problems that I face in my 
day to day work</span><br>
<span style="font-family: &quot;verdana&quot; , sans-serif;"><br></span>
<b><u><span style="font-family: &quot;verdana&quot; , sans-serif; font-size: large;">git worktree command</span></u></b><br>
<span style="font-family: &quot;verdana&quot; , sans-serif;"><br></span>
<span style="font-family: &quot;verdana&quot; , sans-serif;">git worktree&nbsp;allows you to checkout multiple branches of same&nbsp;repository&nbsp;in separate directories.&nbsp;</span><span style="font-family: &quot;verdana&quot; , sans-serif;">Now if you need to make a quick hotfix and don't want to touch your working copy you can use following command to checkout a </span><b style="font-family: verdana, sans-serif;">new branch in a new directory</b><br>
<div class="separator" style="clear: both; text-align: center;">
<br></div>
<span style="font-family: &quot;verdana&quot; , sans-serif; font-size: x-small;"><i>&nbsp; &nbsp; &nbsp; &nbsp; git worktree add -b &lt;BRANCH_NAME&gt; ../&lt;DIR_NAME&gt;&nbsp;</i></span><br>
<span style="font-family: &quot;verdana&quot; , sans-serif; font-size: x-small;"><i><br></i></span>
<span style="font-family: &quot;verdana&quot; , sans-serif; font-size: x-small;"><i>(I used .. in front of directory name because i wanted the new directory parallel to my current directory)</i></span><br>
<div>
<span style="font-family: &quot;verdana&quot; , sans-serif; font-size: x-small;"><i><br></i></span></div>
<span style="font-family: &quot;verdana&quot; , sans-serif;">Now try following command to display repository's worktrees (and their associated branches)&nbsp;</span><br>
<span style="font-family: &quot;verdana&quot; , sans-serif;"><br></span>
<span style="font-family: &quot;verdana&quot; , sans-serif; font-size: x-small;"><i>&nbsp; &nbsp; &nbsp; &nbsp;git worktree list</i></span><br>
<div>
<br></div>
<span style="font-family: &quot;verdana&quot; , sans-serif; font-size: large;"><b><u>git config --global rebase.autostash true</u></b></span><br>
<span style="font-family: &quot;verdana&quot; , sans-serif;"><br></span>
<span style="font-family: &quot;verdana&quot; , sans-serif;">May be I am late in the party here but i was not aware of <b>rebase.autostash</b>
 configuration,&nbsp;It automatically stashes any local changes made to 
your working copy before rebasing, and reapplies them after the rebase 
is completed. Sweet right??</span><br>
<span style="font-family: &quot;verdana&quot; , sans-serif;"><br></span>
<span style="font-family: &quot;verdana&quot; , sans-serif; font-size: large;"><b><u>git push --force-with-lease</u></b></span><br>
<span style="font-family: &quot;verdana&quot; , sans-serif;"><br></span>
<span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="font-family: &quot;verdana&quot; , sans-serif;">We all know that&nbsp;</span>--force
 is destructive because it unconditionally overwrites the remote 
repository with whatever you have locally, possibly overwriting any 
changes that a team member has pushed in the meantime.</span><br>
<div>
<br></div>
<span style="font-family: &quot;verdana&quot; , sans-serif;">One of the most common scenario of force push is when we rebase a branch.&nbsp;</span><span style="font-family: &quot;verdana&quot; , sans-serif;">Let's take an example here.</span><br>
<br>
<ul style="text-align: left;">
<li><span style="font-family: &quot;verdana&quot; , sans-serif;">A and B decide to work on a feature. They both clone the repository and start working on feature branch</span></li>
<li><span style="font-family: &quot;verdana&quot; , sans-serif;">A completes his part of the feature, and pushes this up to the main repository.&nbsp;</span></li>
<li><span style="font-family: &quot;verdana&quot; , sans-serif;">B also 
finishes his work, but before final push, he notices some changes had 
been merged into master. Wanting to keep a clean tree, he performs a <b>rebase</b> against the master branch. Needless to say, when he goes to push this rebased branch it will be rejected.&nbsp;</span></li>
<li><span style="font-family: &quot;verdana&quot; , sans-serif;">Without realizing that A has already pushed his work, B performs a push <b>--force</b>. Unfortunately, this will erase all record of changes made by A in the central repository.</span></li>
<li><span style="font-family: &quot;verdana&quot; , sans-serif;">The problem here is that when doing a <b>force</b> push B doesn't know why his changes have been rejected, so he <b>assumes that it's due to the rebase</b>, not due to A's changes. This is why -<b>-force on shared branches is an absolute no.</b></span></li>
</ul>
<div>
<span style="font-family: verdana, sans-serif;">--force-with-lease to rescue</span></div>
<div>
<span style="font-family: verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: verdana, sans-serif;"><div>
--force-with-lease <b>refuses</b> to update a branch unless it is the state that we expect; i.e. nobody has updated the branch upstream.&nbsp;</div>
<div>
<br></div>
<div>
In above scenario, When A updates his branch and pushes it up to the 
remote repository, the ref pointing head of the branch will be updated. 
Now, unless B does a pull from the remote, his local reference to the 
remote will be <b>out of date</b>. When he goes to push using <b>--force-with-lease</b>, git will check the local ref against the new remote and <b>refuse to force the push</b>. <b>--force-with-lease effectively only allows you to force-push if no-one else has pushed changes up to the remote in the interim</b>. It's --force with the seatbelt on.</div>
</span></div>
<br>
<span style="font-family: &quot;verdana&quot; , sans-serif;"></span><br>
<span style="font-family: &quot;verdana&quot; , sans-serif;"><br></span>
<span style="font-family: &quot;verdana&quot; , sans-serif;"><br></span></div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2016-01-31T20:23:00.001Z" itemprop="datePublished">1st February</abbr> by <a class="url fn" href="http://www.blogger.com/profile/06918659071352983654" rel="author" itemprop="author">Mohit Arora</a>
  
  
</div>

    


    
    <div class="labels" itemprop="keywords">
      Labels: <a class="label" href="http://2mohitarora.blogspot.in/search/label/--force-with-lease" target="_self">--force-with-lease</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/Git%20tips" target="_self">Git tips</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/git%20worktree" target="_self">git worktree</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/rebase.autostash" target="_self">rebase.autostash</a> 
    </div>
    
    
    
<div class="share-controls defer delay" data-defer="true" data-delay="1000">
<span class="share-plusone g-plusone defer" data-href="http://2mohitarora.blogspot.com/2016/01/git-tips.html" data-hl="en" data-size="" data-source="blogger:blog:plusone" data-annotation="" data-width="90" data-text="Git Tips"></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button defer" data-url="http://2mohitarora.blogspot.com/2016/01/git-tips.html" data-count="" data-size="" data-text="Git Tips"></span>


<span class="share-facebook defer" data-url="http://2mohitarora.blogspot.com/2016/01/git-tips.html" data-count="" data-layout="" data-text="Git Tips"></span>

</div>

    
  </div>

  

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="0 comments">
  <span class="bubble-content">0</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    
    Add a comment
    </h3>
  </div>
  
<div style="display: block;" class="comments-wrapper blogger-comments toggle-container" data-itemid="5517329749880835624">
  <div class="comments-content"><div id="bc_1_1C" kind="c"><div id="bc_1_1CT"><div id="bc_1_0T" class="comment-thread" kind="r" t="0" u="0"><ol id="bc_1_0TB"></ol><div style="display: none;" id="bc_1_0I" class="continue" kind="ci"><a href="javascript:;" target="_self">Add comment</a></div><div id="bc_1_0T_box" class="comment-replybox-thread"><iframe src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/comment-iframe_002.html" class="comments-replybox" data-src="https://www.blogger.com/comment-iframe.g?blogID=9015838297196321746&amp;postID=5517329749880835624" frameborder="0"></iframe></div><div style="display: none;" id="bc_1_0L" class="loadmore loaded" kind="rb"><a href="javascript:;" target="_self">No more comments</a></div></div></div></div></div>
  <div class="comments-footer">
    
  </div>
</div>

</div>

    
    
  
  
</div>

  
</li><li class="item" data-id="7479464868685402544">
  
<div class="article hentry consul docker docker_native_support_in_mesos marathon mesos mesos_docker " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://3.bp.blogspot.com/-__D-Qwo6oxA/VgtcsGTppkI/AAAAAAAAGWE/BdpURAI44i4/s640/Screen%2BShot%2B2015-09-29%2Bat%2B11.52.23%2BPM.png">
    <meta itemprop="thumbnailUrl" content="http://3.bp.blogspot.com/-__D-Qwo6oxA/VgtcsGTppkI/AAAAAAAAGWE/BdpURAI44i4/s640/Screen%2BShot%2B2015-09-29%2Bat%2B11.52.23%2BPM.png">
  
  <meta itemprop="blogId" content="9015838297196321746">
  <meta itemprop="postId" content="7479464868685402544">

  
  <div class="article-header">


<a class="ribbon date " title="30th September 2015" href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html" itemprop="url">


  <div class="top ribbon-piece">Sep</div>
  <div class="bottom ribbon-piece">30</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html" rel="bookmark" itemprop="url" data-item-type="post" data-id="7479464868685402544">



Mesos and Marathon Cluster - Part 2</a>
  
  

<span class="blog-admin"><a class="edit" href="https://www.blogger.com/post-edit.g?blogID=9015838297196321746&amp;postID=7479464868685402544&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div dir="ltr" style="text-align: left;" trbidi="on">
<div dir="ltr" style="text-align: left;" trbidi="on">
<div dir="ltr" style="text-align: left;" trbidi="on">
<div dir="ltr" style="text-align: left;" trbidi="on">
<span style="font-family: Verdana, sans-serif;">This is second article on how to launch a production ready mesos and marathon cluster, please read the first article <a href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-i.html">here</a>&nbsp;before you read this one.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">In the previous article,
 we launched a 6 node mesos cluster (3 master nodes + 3 slave nodes) but
 we didn't launch any task or container in that cluster. Let's do couple
 more things before we launch an application task or container in our 
cluster.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><b><u>Install Consul on all nodes of cluster</u></b></span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">There are many articles 
available on configuring consul so I will skip step by step 
instructions, a very good article is&nbsp;available&nbsp;<a href="https://www.digitalocean.com/community/tutorials/how-to-configure-consul-in-a-production-environment-on-ubuntu-14-04">here</a>. If you are not aware of consul, please read about it&nbsp;<a href="https://consul.io/">here</a>.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">We will use consul for service discovery and as our primary DNS for </span><b style="font-family: Verdana, sans-serif;">nodes</b><span style="font-family: Verdana, sans-serif;"> and </span><b style="font-family: Verdana, sans-serif;">docker</b><span style="font-family: Verdana, sans-serif;"> containers. When you install consul on all nodes of your cluster, please make sure you install consul in </span><b style="font-family: Verdana, sans-serif;">server mode on master nodes </b><span style="font-family: Verdana, sans-serif;">and in </span><b style="font-family: Verdana, sans-serif;">client mode on slave nodes</b><span style="font-family: Verdana, sans-serif;">. if we happen to add a new client node&nbsp;in future, consul will also be installed on that node in client mode. Also install <b>consul UI</b> on all nodes of cluster.</span><br>
<b style="-webkit-text-stroke-width: 0px; background-color: white; color: #333333; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: 19.6000003814697px; orphans: auto; text-align: left; text-decoration: underline; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;"></b><br>
<div style="-webkit-text-stroke-width: 0px; background-color: white; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; margin: 0px; orphans: auto; outline: none; padding: 0px; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;">
<div style="background-color: white; margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin: 0px 0px 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="margin: 0px; outline: none; padding: 0px; white-space: normal;">
<div style="margin: 0px; outline: none; padding: 0px;">
If you do everything correctly, output of "<span style="color: blue;">consul members</span>" should look similar to this<br>
Node &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Address &nbsp; &nbsp; &nbsp; &nbsp;Status &nbsp;Type &nbsp; &nbsp;Build &nbsp;Protocol &nbsp;DC</div>
<div style="color: black; margin: 0px; outline: none; padding: 0px;">
mesos-slave1 &nbsp; XX.X.X.X:8301 &nbsp;alive &nbsp; client &nbsp;0.5.2 &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; dev</div>
<div style="color: black; margin: 0px; outline: none; padding: 0px;">
mesos-slave2 &nbsp;&nbsp;XX.X.X.X:8301 &nbsp;alive &nbsp; client &nbsp;0.5.2 &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; dev</div>
<div style="color: black; margin: 0px; outline: none; padding: 0px;">
mesos-master1 &nbsp;XX.X.X.X:8301 &nbsp;alive &nbsp; server &nbsp;0.5.2 &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; dev</div>
<div style="color: black; margin: 0px; outline: none; padding: 0px;">
mesos-master2 &nbsp;XX.X.X.X:8301 &nbsp;alive &nbsp; server &nbsp;0.5.2 &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; dev</div>
<div style="color: black; margin: 0px; outline: none; padding: 0px;">
mesos-master3 &nbsp;XX.X.X.X:8301 &nbsp;alive &nbsp; server &nbsp;0.5.2 &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; dev</div>
<div style="color: black; margin: 0px; outline: none; padding: 0px;">
mesos-slave3 &nbsp;&nbsp;XX.X.X.X:8301 &nbsp;alive &nbsp; client &nbsp;0.5.2 &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; dev</div>
</div>
</pre>
</div>
</div>
</div>
<span style="font-family: Verdana, sans-serif;">Also when you hit <span style="color: blue;">&lt;ANY_MASTER_OR_SLAVE_NODE_IP&gt;</span>:8500, you should see consul ui</span><br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-__D-Qwo6oxA/VgtcsGTppkI/AAAAAAAAGWE/BdpURAI44i4/s1600/Screen%2BShot%2B2015-09-29%2Bat%2B11.52.23%2BPM.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://3.bp.blogspot.com/-__D-Qwo6oxA/VgtcsGTppkI/AAAAAAAAGWE/BdpURAI44i4/s640/Screen%2BShot%2B2015-09-29%2Bat%2B11.52.23%2BPM.png" width="640" height="112" border="0"></a></div>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><b><u><br></u></b></span><br>
<span style="font-family: Verdana, sans-serif;"><b><u>Install&nbsp;dnsmasq on all nodes of cluster</u></b></span><br>
<span style="font-family: Verdana, sans-serif;"><b><u><br></u></b></span>
<span style="font-family: Verdana, sans-serif;"><span style="background-color: white;"><span style="color: #222222;"><span style="line-height: 19.2000007629395px;">DNSMasq is a&nbsp;</span></span></span><span style="background-color: white; color: #222222; font-size: 16px; line-height: 24px;">lightweight and easy to configure DNS forwarder. Once enabled,&nbsp;</span><span style="background-color: white; color: #222222; font-size: 16px; line-height: 24px;">all
 DNS queries from the local machine will go to dnsmasq so dnsmasq must 
be configured to forward all those queries to upstream DNS servers, 
which in our case is consul running on each node. This will make service
 discovery painless.</span></span><br>
<div style="background-color: white; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="margin: 0px; outline: none; padding: 0px; white-space: normal;">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
sudo apt-get -y install dnsmasq</div>
<div style="margin: 0px; outline: none; padding: 0px;">
echo "server=/consul/127.0.0.1#8600" | sudo tee /etc/dnsmasq.d/10-consul</div>
<div style="margin: 0px; outline: none; padding: 0px;">
sudo /etc/init.d/dnsmasq restart</div>
</div>
</div>
</pre>
</div>
</div>
</div>
<span style="font-family: Verdana, sans-serif;">Once dnsmasq is restarted, all DNS queries will go to consul first. In order to test it quickly run "<span style="color: blue;">nslookup consul.service.consul"&nbsp;</span>and you should see the results coming back. You will realize the importance of this in few minutes.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">At this point, our configuration looks like this</span><br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-9PtbfnElNU8/VgtmF4kuDKI/AAAAAAAAGWU/nCH9HnVhN9A/s1600/diagram.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://2.bp.blogspot.com/-9PtbfnElNU8/VgtmF4kuDKI/AAAAAAAAGWU/nCH9HnVhN9A/s640/diagram.png" width="640" height="355" border="0"></a></div>
<span style="font-family: Verdana, sans-serif;"><b><u>Register Zookeeper and Marathon running on Master nodes with Consul</u></b></span><br>
<span style="font-family: Verdana, sans-serif;"><b><u><br></u></b></span>
<span style="font-family: Verdana, sans-serif;">Run the following 
commands on Master instances to register zookeeper and marathon as 
consul services. (You may have to change the commands a little bit based
 on your consul config directory location)</span><br>
<div style="background-color: white; margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="margin: 0px; outline: none; padding: 0px;">
<span style="font-size: 14px; white-space: normal;">echo '{"service": {"name": "marathon", "tags": ["marathon"], "port": 8080, "check": {"script": "curl localhost:8080 &gt;/dev/null 2&gt;&amp;1", "interval": "10s"}}}' | sudo tee /etc/consul.d/marathon.json</span></div>
<span style="font-size: 14px; white-space: normal;">echo '{"service": {"name": "zookeeper", "tags": ["zookeeper"], "port": 2181}}' | sudo tee /etc/consul.d/zookeeper.json</span></pre>
</div>
</div>
<span style="font-family: Verdana, sans-serif;">Once zookeeper and marathon are registered with consul, try running <span style="color: blue;">nslookup zookeeper.service.consul</span> and <span style="color: blue;">nslookup marathon.service.consul</span> on any of the nodes. Impressive right?? Also in Consul UI, you should see something like this</span><br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-zpRQzXXmdKY/VgtrFJXlXxI/AAAAAAAAGWk/RpNXyY8YJCI/s1600/Screen%2BShot%2B2015-09-30%2Bat%2B12.54.25%2BAM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://2.bp.blogspot.com/-zpRQzXXmdKY/VgtrFJXlXxI/AAAAAAAAGWk/RpNXyY8YJCI/s640/Screen%2BShot%2B2015-09-30%2Bat%2B12.54.25%2BAM.png" width="640" height="148" border="0"></a></div>
<span style="font-family: Verdana, sans-serif;"><br></span><span style="font-family: Verdana, sans-serif;">I
 really hope you are following how consul is making service discovery 
painless here. There are few more questions that we need to answer 
before we launch our first application container</span><br>
<ul style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">Service discovery is
 working great using consul on cluster nodes but will it work inside 
containers in the same way when we launch containers?</span></li>
<li><span style="font-family: Verdana, sans-serif;">Manual Service 
registration with consul (as we did for zookeeper and marathon) is not 
scalable. How will applications running inside containers will be 
registered/de-registered with consul.</span></li>
</ul>
<div>
<span style="font-family: Verdana, sans-serif;">Let's do few more things to answer these questions</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<b style="font-family: Verdana, sans-serif;"><u>Configure Consul as DNS Server for use by Docker containers on Slave Nodes</u></b><br>
<span style="-webkit-text-stroke-width: 0px; background-color: white; color: #333333; font-family: Verdana, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 19.6000003814697px; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;"></span><br>
<div style="-webkit-text-stroke-width: 0px; background-color: white; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 19.6000003814697px; margin: 0px; orphans: auto; outline: none; padding: 0px; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="margin: 0px; outline: none; padding: 0px; white-space: normal;">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="color: #333333; margin: 0px; outline: none; padding: 0px;">
# Modify Docker config file</div>
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="color: #333333; margin: 0px; outline: none; padding: 0px;">
sudo vi /etc/default/docker</div>
<div style="color: #333333; margin: 0px; outline: none; padding: 0px;">
# Add following to DOCKER_OPTS</div>
<div style="margin: 0px; outline: none; padding: 0px;">
<span style="color: #333333;">--dns </span><span style="color: blue;">&lt;SLAVE_NODE_IP&gt;</span><span style="color: #333333;"> --dns-search service.consul</span></div>
<div style="color: #333333; margin: 0px; outline: none; padding: 0px;">
sudo restart docker</div>
</div>
</div>
</div>
</pre>
</div>
</div>
</div>
</div>
<div>
<span style="font-family: Verdana, sans-serif;">This will solve our first problem of service discovery inside containers.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><b><u><br></u></b></span>
<span style="font-family: Verdana, sans-serif;"><b><u>Launch mesos-consul docker container using Marathon</u></b></span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Our second problem of application registration and de-registration will be solved by&nbsp;<a href="https://github.com/CiscoCloud/mesos-consul">mesos-consul</a>.&nbsp;</span><span style="font-family: Verdana, sans-serif;"><b>mesos-consul</b> is a Mesos to Consul bridge for service discovery.&nbsp;</span><span style="font-family: Verdana, sans-serif;">Mesos-consul automatically registers/deregisters services running as Mesos tasks.&nbsp;</span><span style="font-family: Verdana, sans-serif;">if you have a Mesos task called application, this program will register the <b>application</b> in Consul, and it will be exposed via DNS as <b>application.service.consul</b>.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<br>
<div style="-webkit-text-stroke-width: 0px; background-color: white; color: #333333; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 19.6000003814697px; margin: 0px; orphans: auto; outline: none; padding: 0px; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="margin: 0px; outline: none; padding: 0px;">
# Save the following json as mesos-consul.json on any node of cluster
<span style="white-space: normal;">{</span>
<span style="white-space: normal;">&nbsp; "args": [</span>
<span style="white-space: normal;">&nbsp; &nbsp; "--zk=zk://zookeeper.service.consul:2181/mesos",</span>
<span style="white-space: normal;">&nbsp; &nbsp; "--log-level=debug",</span>
<span style="white-space: normal;">&nbsp; &nbsp; "--consul",</span>
<span style="white-space: normal;">&nbsp; &nbsp; "--refresh=5s"</span>
<span style="white-space: normal;">&nbsp; ], &nbsp;</span>
<span style="white-space: normal;">&nbsp; "container": {</span>
<span style="white-space: normal;">&nbsp; &nbsp; "type": "DOCKER",</span>
<span style="white-space: normal;">&nbsp; &nbsp; "docker": {</span>
<span style="white-space: normal;">&nbsp; &nbsp; &nbsp; "network": "BRIDGE",</span>
<span style="white-space: normal;">&nbsp; &nbsp; &nbsp; "image": "ciscocloud/mesos-consul"</span>
<span style="white-space: normal;">&nbsp; &nbsp; } &nbsp;&nbsp;</span>
<span style="white-space: normal;">&nbsp; }, &nbsp;</span>
<span style="white-space: normal;">&nbsp; "id": "mesos-consul",</span>
<span style="white-space: normal;">&nbsp; "instances": 1,</span>
<span style="white-space: normal;">&nbsp; "cpus": 0.1,</span>
<span style="white-space: normal;">&nbsp; "mem": 256&nbsp;</span>
<span style="white-space: normal;">}</span>
# Run this command to launch mesos-consul docker container</div>
curl -X POST -d@mesos-consul.json -H "Content-Type: application/json" http://marathon.service.consul:8080/v2/apps</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<span style="font-family: Verdana, sans-serif;">Once the submit the above command, check <b>Marathon-UI</b>, <b>Mesos-UI </b>and <b>Consul-UI</b>. Most interesting thing that you will observe will be 2 new services in Consul-UI called <b>mesos</b> and <b>mesos-consul</b>, both of them are registered in consul by mesos-consul docker container launched above.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-k7Lb9u5PRdw/Vh3K7g0_bvI/AAAAAAAAGYM/iCqUtv6bB0k/s1600/Screen%2BShot%2B2015-10-13%2Bat%2B11.24.13%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://3.bp.blogspot.com/-k7Lb9u5PRdw/Vh3K7g0_bvI/AAAAAAAAGYM/iCqUtv6bB0k/s640/Screen%2BShot%2B2015-10-13%2Bat%2B11.24.13%2BPM.png" width="640" height="210" border="0"></a></div>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><br></span>

<span style="font-family: Verdana, sans-serif;">Given the fact that mesos-consul docker container is able to communicate with&nbsp;<span style="color: blue;">zookeeper.service.consul (</span>passed
 to container as an argument) proves that docker containers are able to 
use consul running on host machines as their DNS server. Pretty Cool, 
Right??</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">At this point try&nbsp;</span><span style="color: blue; font-family: Verdana, sans-serif;">nslookup leader.mesos.service.consul,&nbsp;</span><span style="color: blue; font-family: Verdana, sans-serif;">nslookup master.mesos.service.consul,&nbsp;</span><span style="color: blue; font-family: Verdana, sans-serif;">nslookup agent.mesos.service.consul</span><span style="font-family: Verdana, sans-serif;">&nbsp;and&nbsp;</span><span style="color: blue; font-family: Verdana, sans-serif;">nslookup mesos-consul.service.consul</span><span style="font-family: Verdana, sans-serif;">&nbsp;on any of the nodes and check the results.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Finally Its time to run our first application container :)</span><br>
<span style="-webkit-text-stroke-width: 0px; background-color: white; color: #333333; font-family: Verdana, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 19.6px; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;"></span><br>
<div dir="ltr" style="-webkit-text-stroke-width: 0px; background-color: white; color: #333333; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 19.6px; margin: 0px; orphans: auto; outline: none; padding: 0px; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;" trbidi="on">
<div dir="ltr" style="margin: 0px; outline: none; padding: 0px; text-align: left;" trbidi="on">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="-webkit-text-stroke-width: 0px; background-color: white; color: #333333; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 19.6px; margin: 0px; orphans: auto; outline: none; padding: 0px; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="margin: 0px; outline: none; padding: 0px;">
</div>
<span style="color: black; font-size: small; line-height: normal;">curl -X POST -H "Content-Type: application/json" marathon.service.consul:8080/v2/apps -d '
{
    "container": {
      "type": "DOCKER",
      "docker": {
        "image": "libmesos/ubuntu"
      }
    },
    "id": "mohit",
    "instances": 1,
    "cpus": 0.5,
    "mem": 128,
    "uris": [],
    "cmd": "while sleep 10; do date -u +%T; done"
}'</span></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<br>
<span style="font-family: Verdana, sans-serif;">Once the submit the above command, check&nbsp;</span><b style="font-family: Verdana, sans-serif;">Marathon-UI</b><span style="font-family: Verdana, sans-serif;">,&nbsp;</span><b style="font-family: Verdana, sans-serif;">Mesos-UI&nbsp;</b><span style="font-family: Verdana, sans-serif;">and&nbsp;</span><b style="font-family: Verdana, sans-serif;">Consul-UI</b><span style="font-family: Verdana, sans-serif;">.&nbsp;You will notice that container is running, try scaling out, destroying the containers etc. via marathon.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Again my favorite part, run&nbsp;</span><span style="color: blue; font-family: Verdana, sans-serif;">nslookup mohit.service.consul</span><br>
<span style="color: blue; font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">At this point, you have a
 production ready mesos cluster running, where docker containers are 
launched and managed by marathon. Any mesos task gets registered with 
consul for easier service discovery.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">In next part we will add few more cool tools in this cluster to load balance the serrvices.</span></div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2015-09-30T03:11:00.000Z" itemprop="datePublished">30th September 2015</abbr> by <a class="url fn" href="http://www.blogger.com/profile/06918659071352983654" rel="author" itemprop="author">Mohit Arora</a>
  
  
</div>

    


    
    <div class="labels" itemprop="keywords">
      Labels: <a class="label" href="http://2mohitarora.blogspot.in/search/label/consul" target="_self">consul</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/Docker" target="_self">Docker</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/docker%20native%20support%20in%20mesos" target="_self">docker native support in mesos</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/marathon" target="_self">marathon</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/mesos" target="_self">mesos</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/mesos%20docker" target="_self">mesos docker</a> 
    </div>
    
    
    
<div class="share-controls defer delay" data-defer="true" data-delay="1000">
<span class="share-plusone g-plusone defer" data-href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html" data-hl="en" data-size="" data-source="blogger:blog:plusone" data-annotation="" data-width="90" data-text="Mesos and Marathon Cluster - Part 2"></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button defer" data-url="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html" data-count="" data-size="" data-text="Mesos and Marathon Cluster - Part 2"></span>


<span class="share-facebook defer" data-url="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html" data-count="" data-layout="" data-text="Mesos and Marathon Cluster - Part 2"></span>

</div>

    
  </div>

  

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="1 comment">
  <span class="bubble-content">1</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    View comments
    
    </h3>
  </div>
  
<div style="display: block;" class="comments-wrapper blogger-comments toggle-container" data-itemid="7479464868685402544">
  <div class="comments-content"><div id="bc_0_1C" kind="c"><div id="bc_0_1CT"><div id="bc_0_0T" class="comment-thread" kind="r" t="0" u="0"><ol id="bc_0_0TB"><li id="bc_0_2B" class="comment" kind="b"><div class="avatar-image-container"><img src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/photo.png"></div><div id="c5782853067118576992" class="comment-block"><div id="bc_0_2M" class="comment-header" kind="m"><cite class="user"><a rel="nofollow" href="http://www.blogger.com/profile/12673095943829323279">Vijay Kumar</a></cite><span class="icon user"></span><span class="datetime secondary-text"><a rel="nofollow" href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html?showComment=1445851799641#c5782853067118576992">October 26, 2015 at 2:29 AM</a></span></div><p id="bc_0_2MC" class="comment-content">Hi Mohit,<br><br>Thanks for the wonderful post.<br>Can weave be used for docker networking and can you explain how weave consul can implemented to have the cluster running.<br>It would be good if you can give a hands on same as the above for weave too.<br>Regards,<br>Vijay</p><span id="bc_0_2MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-1006558542"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=9015838297196321746&amp;postID=5782853067118576992">Delete</a></span></span></div><div id="bc_0_2BR" class="comment-replies"></div><div id="bc_0_2B_box" class="comment-replybox-single"></div></li></ol><div style="display: none;" id="bc_0_0I" class="continue" kind="ci"><a href="javascript:;" target="_self">Add comment</a></div><div id="bc_0_0T_box" class="comment-replybox-thread"><iframe src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/comment-iframe_003_002.html" class="comments-replybox" data-src="https://www.blogger.com/comment-iframe.g?blogID=9015838297196321746&amp;postID=7479464868685402544" frameborder="0"></iframe></div><div style="display: none;" id="bc_0_0L" class="loadmore" kind="rb"><a href="javascript:;" target="_self">Load more</a></div></div></div></div></div>
  <div class="comments-footer">
    
  </div>
</div>

</div>

    
    
  
  
</div>

  
</li><li class="item" data-id="4846931421114626704">
  
<div class="article hentry docker docker_native_support_in_mesos marathon marathon_docker mesos mesos_docker " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://2.bp.blogspot.com/-1ZXrLD_T1HI/VgtNCZrbqpI/AAAAAAAAGVs/Zpugdw_yu9g/s640/Screen%2BShot%2B2015-09-29%2Bat%2B10.45.44%2BPM.png">
    <meta itemprop="thumbnailUrl" content="http://2.bp.blogspot.com/-1ZXrLD_T1HI/VgtNCZrbqpI/AAAAAAAAGVs/Zpugdw_yu9g/s640/Screen%2BShot%2B2015-09-29%2Bat%2B10.45.44%2BPM.png">
  
  <meta itemprop="blogId" content="9015838297196321746">
  <meta itemprop="postId" content="4846931421114626704">

  
  <div class="article-header">


<a class="ribbon date " title="30th September 2015" href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-i.html" itemprop="url">


  <div class="top ribbon-piece">Sep</div>
  <div class="bottom ribbon-piece">30</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-i.html" rel="bookmark" itemprop="url" data-item-type="post" data-id="4846931421114626704">



Mesos and Marathon Cluster - Part I</a>
  
  

<span class="blog-admin"><a class="edit" href="https://www.blogger.com/post-edit.g?blogID=9015838297196321746&amp;postID=4846931421114626704&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div dir="ltr" style="text-align: left;" trbidi="on">
<span style="font-family: Verdana, sans-serif;">If you are reading this article, I am sure you have heard of <b>Mesos/Marathon/DCOS</b> etc. I have written a very basic article earlier on&nbsp;<a href="http://2mohitarora.blogspot.com/2014/09/managing-docker-containers-using-mesos.html">Managing Docker containers using Mesos and Marathon</a>. This article will provide step by step instructions to launch production ready mesos and marathon cluster.&nbsp;</span><span style="font-family: Verdana, sans-serif;">I
 will be launching this cluster in Azure but these instructions should 
be applicable everywhere. Needless to say, you can bake images or use 
any configuration management tool to automate this stuff but I will be 
doing everything by hand so that I can explain what is really 
happening.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><br>
As a first step let's launch <b>6</b>&nbsp;virtual machines in Azure, I 
have plans to launch kafka cluster on these machines but kafka 
installation is not in scope of this article.</span><br>
<span style="font-family: Verdana, sans-serif;"><br>
6 Virtual Machines that I will be launching are</span><br>
<ul style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">mesos-master1,&nbsp;</span><span style="font-family: Verdana, sans-serif;">mesos-master2,&nbsp;</span><span style="font-family: Verdana, sans-serif;">mesos-master3</span></li>
<li><span style="font-family: Verdana, sans-serif;">mesos-slave1,&nbsp;</span><span style="font-family: Verdana, sans-serif;">mesos-slave2,&nbsp;</span><span style="font-family: Verdana, sans-serif;">mesos-slave3</span></li>
</ul>
<div>
<span style="font-family: Verdana, sans-serif;"><b><u>Launch Mesos Master Instances in Azure</u></b></span><br>
<div style="-webkit-text-stroke-width: 0px; color: black; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;">
</div>
<br>
<div style="-webkit-text-stroke-width: 0px; color: black; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;">
<div style="background-color: white; margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin: 0px 0px 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="white-space: normal;">
<span style="font-family: Verdana, sans-serif;">azure vm create --vm-name "<b>mesos-master1</b>" --ssh 56878 --virtual-network-name "<span style="color: blue;">VM_VNET_NAME</span>" --location "<span style="color: blue;">VM_LOCATION</span>" --subnet-names "<span style="color: blue;">VM_SUBNET_NAME</span>" --availability-set "mesosmaster" --no-ssh-password --vm-size "Standard_D2" --ssh-cert "<span style="color: blue;">PATH_TO_SSH_CERT</span>" --connect --json&nbsp;<span style="color: blue;">DNS_NAME</span>&nbsp;b39f27a8b8c64d52b05eac6a62ebad85__Ubuntu-14_04_3-LTS-amd64-server-20150908-en-us-30GB&nbsp;<span style="color: blue;">USERNAME</span></span><br>
<span style="font-family: Verdana, sans-serif;">-----------------------------------------------------------------------------------------------------------</span><br>
<span style="font-family: Verdana, sans-serif;">azure vm create --vm-name "<b>mesos-master2</b>" --ssh 56879 --virtual-network-name "<span style="color: blue;">VM_VNET_NAME</span>" --location "<span style="color: blue;">VM_LOCATION</span>" --subnet-names "<span style="color: blue;">VM_SUBNET_NAME</span>" --availability-set "mesosmaster" --no-ssh-password --vm-size "Standard_D2" --ssh-cert "<span style="color: blue;">PATH_TO_SSH_CERT</span>" --connect --json&nbsp;<span style="color: blue;">DNS_NAME</span>&nbsp;b39f27a8b8c64d52b05eac6a62ebad85__Ubuntu-14_04_3-LTS-amd64-server-20150908-en-us-30GB&nbsp;<span style="color: blue;">USERNAME</span></span></div>
<div style="white-space: normal;">
<div>
<span style="font-family: Verdana, sans-serif;">-----------------------------------------------------------------------------------------------------------</span><br>
<span style="font-family: Verdana, sans-serif;">azure vm create --vm-name "<b>mesos-master3</b>" --ssh 56880 --virtual-network-name "<span style="color: blue;">VM_VNET_NAME</span>" --location "<span style="color: blue;">VM_LOCATION</span>" --subnet-names "<span style="color: blue;">VM_SUBNET_NAME</span>" --availability-set "mesosmaster" --no-ssh-password --vm-size "Standard_D2" --ssh-cert "<span style="color: blue;">PATH_TO_SSH_CERT</span>" --connect --json&nbsp;<span style="color: blue;">DNS_NAME</span>&nbsp;b39f27a8b8c64d52b05eac6a62ebad85__Ubuntu-14_04_3-LTS-amd64-server-20150908-en-us-30GB&nbsp;<span style="color: blue;">USERNAME</span></span></div>
</div>
</pre>
</div>
</div>
</div>
<b style="text-decoration: underline;"><u><span style="font-family: Verdana, sans-serif;">Launch Mesos Slave Instances in Azure</span></u></b><br>
<div>
<div style="background-color: white; margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><div style="white-space: normal;">
<div>
<span style="font-family: Verdana, sans-serif;"><span style="-webkit-text-stroke-width: 0px; color: black; display: inline !important; float: none; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;"></span></span>

<br>
<div style="-webkit-text-stroke-width: 0px; color: black; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;">
</div>
<span style="font-family: Verdana, sans-serif;">
</span></div>
<div>
<div style="margin: 0px;">
<span style="font-family: Verdana, sans-serif;">azure vm create --vm-name "<b>mesos-slave1</b>" --ssh 56881 --virtual-network-name "<span style="color: blue;">VM_VNET_NAME</span>" --location "<span style="color: blue;">VM_LOCATION</span>" --subnet-names "<span style="color: blue;">VM_SUBNET_NAME</span>" --availability-set "mesosslave" --no-ssh-password --vm-size "Standard_D2" --ssh-cert "<span style="color: blue;">PATH_TO_SSH_CERT</span>" --connect --json&nbsp;<span style="color: blue;">DNS_NAME</span>&nbsp;b39f27a8b8c64d52b05eac6a62ebad85__Ubuntu-14_04_3-LTS-amd64-server-20150908-en-us-30GB&nbsp;<span style="color: blue;">USERNAME</span></span></div>
<div style="margin: 0px;">
<span style="font-family: Verdana, sans-serif;">-----------------------------------------------------------------------------------------------------------</span></div>
<div style="margin: 0px;">
<span style="font-family: Verdana, sans-serif;">azure vm create --vm-name "<b>mesos-slave2</b>" --ssh 56882 --virtual-network-name "<span style="color: blue;">VM_VNET_NAME</span>" --location "<span style="color: blue;">VM_LOCATION</span>" --subnet-names "<span style="color: blue;">VM_SUBNET_NAME</span>" --availability-set "mesosslave" --no-ssh-password --vm-size "Standard_D2" --ssh-cert "<span style="color: blue;">PATH_TO_SSH_CERT</span>" --connect --json&nbsp;<span style="color: blue;">DNS_NAME</span>&nbsp;b39f27a8b8c64d52b05eac6a62ebad85__Ubuntu-14_04_3-LTS-amd64-server-20150908-en-us-30GB&nbsp;<span style="color: blue;">USERNAME</span></span></div>
<div style="margin: 0px;">
<span style="font-family: Verdana, sans-serif;">-----------------------------------------------------------------------------------------------------------</span></div>
<div style="margin: 0px;">
<span style="font-family: Verdana, sans-serif;">azure vm create --vm-name "<b>mesos-slave3</b>" --ssh 56883 --virtual-network-name "<span style="color: blue;">VM_VNET_NAME</span>" --location "<span style="color: blue;">VM_LOCATION</span>" --subnet-names "<span style="color: blue;">VM_SUBNET_NAME</span>" --availability-set "mesosslave" --no-ssh-password --vm-size "Standard_D2" --ssh-cert "<span style="color: blue;">PATH_TO_SSH_CERT</span>" --connect --json&nbsp;<span style="color: blue;">DNS_NAME</span>&nbsp;b39f27a8b8c64d52b05eac6a62ebad85__Ubuntu-14_04_3-LTS-amd64-server-20150908-en-us-30GB&nbsp;<span style="color: blue;">USERNAME</span></span></div>
</div>
</div>
</pre>
</div>
</div>
</div>
</div>
<div>
<div>
<span style="font-family: Verdana, sans-serif;">Our Virtual machines are up and running, let's start the installation</span></div>
<div>
<span style="font-family: Verdana, sans-serif;">
</span>
<br>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<b><u><span style="font-family: Verdana, sans-serif;">Install Zookeeper, Mesos and Marathon on all Master Instances</span></u></b>
<b><u><span style="font-family: Verdana, sans-serif;"><br></span></u></b>
<br>
<div style="background-color: white; margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="font-family: Verdana, sans-serif;"><span style="color: #48484c;"><span style="line-height: 23.8px;"># Add Mesosphere repository
sudo apt-get update -y
sudo DEBIAN_FRONTEND=noninteractive apt-get install -y python-software-properties software-properties-common
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv E56151BF
DISTRO=$(lsb_release -is | tr '[:upper:]' '[:lower:]')
CODENAME=$(lsb_release -cs)
echo "deb http://repos.mesosphere.io/${DISTRO} ${CODENAME} main" | sudo tee /etc/apt/sources.list.d/mesosphere.list

# Install Java 8 from Oracle's PPA
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update -y
sudo apt-get install -y oracle-java8-installer oracle-java8-set-default

sudo apt-get -y install mesosphere  </span></span><span style="color: blue; line-height: 23.8px;">(this will install zookeeper, mesos, marathon)</span></span></pre>
</div>
</div>
</div>
<div>
<b><u><span style="font-family: Verdana, sans-serif;">Setup Zookeeper Cluster on all Master Instances</span></u></b>
<br>
<div>
<div style="-webkit-text-stroke-width: 0px; color: black; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;">
</div>
<br>
<div style="orphans: auto; text-align: left; text-indent: 0px; widows: 1;">
<div style="background-color: white; margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin: 0px 0px 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;"><span style="color: #48484c;">sudo vi /etc/zookeeper/conf/myid
1 </span><span style="color: blue;">(This value should be unique for each master node)</span><span style="color: #48484c;">
# Specify all zookeeper servers in zoo.cfg
sudo vi /etc/zookeeper/conf/zoo.cfg
server.1=</span><span style="color: blue;">&lt;MASTER_NODE1_IP&gt;</span><span style="color: #48484c;">:2888:3888
server.2=</span></span><span style="color: blue; line-height: 23.7999992370605px;">&lt;MASTER_NODE2_IP&gt;</span><span style="color: #48484c; line-height: 23.7999992370605px;">:2888:3888</span>
<span style="line-height: 23.7999992370605px;"><span style="color: #48484c;">server.3=</span></span><span style="color: blue; line-height: 23.7999992370605px;">&lt;MASTER_NODE3_IP&gt;</span><span style="color: #48484c; line-height: 23.7999992370605px;">:2888:3888</span></span></pre>
</div>
</div>
</div>
</div>
<div>
<b><u><span style="font-family: Verdana, sans-serif;">Setup zookeeper connection info for Mesos on all Master Instance</span></u></b>
<br>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="font-family: Verdana, sans-serif;"><span style="color: #48484c;"><span style="line-height: 23.7999992370605px;">sudo vi /etc/mesos/zk
</span><span style="line-height: 23.7999992370605px;">zk://</span></span><span style="color: blue; line-height: 23.7999992370605px;">&lt;MASTER_NODE1_IP&gt;</span><span style="color: #48484c; line-height: 23.7999992370605px;">:2181,</span><span style="color: blue; line-height: 23.7999992370605px;">&lt;MASTER_NODE2_IP&gt;</span><span style="color: #48484c; line-height: 23.7999992370605px;">:2181,</span><span style="color: blue; line-height: 23.7999992370605px;">&lt;MASTER_NODE3_IP&gt;</span><span style="color: #48484c; line-height: 23.7999992370605px;">:2181/mesos</span></span></pre>
<div>
<span style="line-height: 23.7999992370605px;"><b><u><span style="font-family: Verdana, sans-serif;">Configure Mesos Master on all Master Instances</span></u></b></span></div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;">sudo vi /etc/mesos-master/quorum
2

echo </span></span><span style="color: blue; font-family: Verdana, sans-serif; line-height: 23.7999992370605px;">&lt;MASTER_NODE_IP&gt;</span><span style="color: #48484c; font-family: Verdana, sans-serif; line-height: 23.7999992370605px;"> | sudo tee /etc/mesos-master/ip</span>
<span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;">sudo cp /etc/mesos-master/ip /etc/mesos-master/hostname
</span></span></pre>
<span style="font-family: Verdana, sans-serif;"><b><u>Configure Marathon on all Master Instances</u></b></span><br>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;"><span style="color: #48484c;">sudo mkdir -p /etc/marathon/conf
sudo cp /etc/mesos-master/hostname /etc/marathon/conf
sudo cp /etc/mesos/zk /etc/marathon/conf/master </span><span style="color: blue;">(To connect marathon to Mesos)</span><span style="color: #48484c;">
sudo cp /etc/marathon/conf/master /etc/marathon/conf/zk </span><span style="color: blue;">(Marathon own configuration)</span><span style="color: #48484c;">
sudo vi /etc/marathon/conf/zk </span><span style="color: blue;">(replace mesos w marathon)</span><span style="color: #48484c;">
echo http_callback | sudo tee /etc/marathon/conf/event_subscriber
</span></span></span></pre>
<div>
<span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;">We
 don't want to run mesos-slave on master instances, execute the 
following command to prevent running mesos-slave on master instances</span></span></div>
<div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;">sudo stop mesos-slave
echo manual | sudo tee /etc/init/mesos-slave.override
</span></span></pre>
</div>
<div>
<span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;"><b><u>Start Zookeeper, mesos-master and Marathon on all master instances</u></b></span></span></div>
<div>
<div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;">sudo restart zookeeper
sudo start mesos-master
sudo start marathon</span></span></pre>
</div>
</div>
<div>
<div>
<b><u><span style="font-family: Verdana, sans-serif;">Install Mesos on all Slave Instances</span></u></b>
<b><u><span style="font-family: Verdana, sans-serif;"><br></span></u></b>
<br>
<div style="background-color: white; margin: 0px; outline: none; padding: 0px;">
<div style="margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="font-family: Verdana, sans-serif;"><span style="color: #48484c;"><span style="line-height: 23.7999992370605px;"># Add Mesosphere repository
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv E56151BF
DISTRO=$(lsb_release -is | tr '[:upper:]' '[:lower:]')
CODENAME=$(lsb_release -cs)
echo "deb http://repos.mesosphere.io/${DISTRO} ${CODENAME} main" | sudo tee /etc/apt/sources.list.d/mesosphere.list
# Install mesos 
sudo apt-get -y update
sudo apt-get -y install mesos</span></span></span></pre>
</div>
</div>
</div>
<div>
</div>
</div>
<div>
<b><u><span style="font-family: Verdana, sans-serif;">Setup zookeeper connection info for Mesos on all Slave Instance</span></u></b>
<br>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="font-family: Verdana, sans-serif;"><span style="color: #48484c;"><span style="line-height: 23.7999992370605px;">sudo vi /etc/mesos/zk
</span><span style="line-height: 23.7999992370605px;">zk://</span></span><span style="color: blue; line-height: 23.7999992370605px;">&lt;MASTER_NODE1_IP&gt;</span><span style="color: #48484c; line-height: 23.7999992370605px;">:2181,</span><span style="color: blue; line-height: 23.7999992370605px;">&lt;MASTER_NODE2_IP&gt;</span><span style="color: #48484c; line-height: 23.7999992370605px;">:2181,</span><span style="color: blue; line-height: 23.7999992370605px;">&lt;MASTER_NODE3_IP&gt;</span><span style="color: #48484c; line-height: 23.7999992370605px;">:2181/mesos</span></span></pre>
</div>
<div>
<div>
<span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;">We don't want to run zookeeper and mesos-master on slave instances, execute the following command to prevent running&nbsp;</span></span><span style="color: #48484c; font-family: Verdana, sans-serif; line-height: 23.7999992370605px;">zookeeper and mesos-master on slave instances</span></div>
<div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;">sudo stop zookeeper
echo manual | sudo tee /etc/init/zookeeper.override
echo manual | sudo tee /etc/init/mesos-master.override
sudo stop mesos-master</span></span></pre>
</div>
</div>
<div>
<span style="line-height: 23.7999992370605px;"><b><u><span style="font-family: Verdana, sans-serif;">Configure Mesos Slave on all Slave Instances</span></u></b></span></div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;">echo </span></span><span style="color: blue; font-family: Verdana, sans-serif; line-height: 23.7999992370605px;">&lt;SLAVE_NODE_IP&gt;</span><span style="color: #48484c; font-family: Verdana, sans-serif; line-height: 23.7999992370605px;"> | sudo tee /etc/mesos-slave/ip</span>
<span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;">sudo cp /etc/mesos-slave/ip /etc/mesos-slave/hostname

echo 'docker,mesos' | sudo tee -a /etc/mesos-slave/containerizers &gt;/dev/null
echo '5mins' | sudo tee -a /etc/mesos-slave/executor_registration_timeout &gt;/dev/null
echo 'ports(*):[4000-5000, 8000-9000, 31000-32000]' | sudo tee -a /etc/mesos-slave/resources &gt;/dev/null
</span></span></pre>
<div>
<div>
<span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;"><b><u>Install docker on all slave instances</u></b></span></span></div>
<div>
<div>
<div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="font-family: Verdana, sans-serif;"><span style="background-color: #f8f8f8; color: #333333; font-size: 16px; letter-spacing: 1px; line-height: 32px;">curl -sSL http</span><span class="hljs-variable" style="box-sizing: inherit; color: teal; font-size: 16px; letter-spacing: 1px; line-height: 32px;">s:</span><span style="background-color: #f8f8f8; color: #333333; font-size: 16px; letter-spacing: 1px; line-height: 32px;">//</span><span class="hljs-built_in" style="box-sizing: inherit; color: #0086b3; font-size: 16px; letter-spacing: 1px; line-height: 32px;">get</span><span style="background-color: #f8f8f8; color: #333333; font-size: 16px; letter-spacing: 1px; line-height: 32px;">.docker.</span><span class="hljs-keyword" style="box-sizing: inherit; color: #333333; font-size: 16px; font-weight: bold; letter-spacing: 1px; line-height: 32px;">com</span><span style="background-color: #f8f8f8; color: #333333; font-size: 16px; letter-spacing: 1px; line-height: 32px;">/ | </span><span class="hljs-keyword" style="box-sizing: inherit; color: #333333; font-size: 16px; font-weight: bold; letter-spacing: 1px; line-height: 32px;">sh</span></span></pre>
</div>
<div>
<div>
</div>
</div>
</div>
</div>
<div>
<span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;"><b><u>Start mesos-slave on all slave instances</u></b></span></span></div>
<div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-image-outset: initial; border-image-repeat: initial; border-image-slice: initial; border-image-source: initial; border-image-width: initial; border-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="color: #48484c; font-family: Verdana, sans-serif;"><span style="line-height: 23.7999992370605px;">sudo start mesos-slave</span></span></pre>
</div>
<div>
<div>
</div>
</div>
</div>
<span style="font-family: Verdana, sans-serif;">At this point your cluster should be up and running.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">If you hit any <span style="color: blue;">&lt;MASTER_NODE_IP&gt;:5050, </span>you should see Mesos UI. Check out the Slaves Tab</span><br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-1ZXrLD_T1HI/VgtNCZrbqpI/AAAAAAAAGVs/Zpugdw_yu9g/s1600/Screen%2BShot%2B2015-09-29%2Bat%2B10.45.44%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://2.bp.blogspot.com/-1ZXrLD_T1HI/VgtNCZrbqpI/AAAAAAAAGVs/Zpugdw_yu9g/s640/Screen%2BShot%2B2015-09-29%2Bat%2B10.45.44%2BPM.png" width="640" height="377" border="0"></a></div>
<br>
<span style="font-family: Verdana, sans-serif;">If you hit any&nbsp;<span style="color: blue;">&lt;MASTER_NODE_IP&gt;:8080,&nbsp;</span>you should see Marathon UI</span><br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-vlX9c5xWvzg/VgtNEnD2c0I/AAAAAAAAGV4/9FCfu-rRzA4/s1600/Screen%2BShot%2B2015-09-29%2Bat%2B10.45.57%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://3.bp.blogspot.com/-vlX9c5xWvzg/VgtNEnD2c0I/AAAAAAAAGV4/9FCfu-rRzA4/s640/Screen%2BShot%2B2015-09-29%2Bat%2B10.45.57%2BPM.png" width="640" height="162" border="0"></a></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<span style="font-family: Verdana, sans-serif;">At this point, we have a
 Mesos cluster up and running and we can launch docker container or 
other tasks using Marathon in this cluster.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Please follow the <a href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-2.html">next part of this tutorial</a> before you launch any container in the cluster we created above.</span><br>
<div style="font-family: Verdana, sans-serif;">
</div>
</div>
<div style="font-family: Verdana, sans-serif;">
</div>
</div>
</div>
</div>
</div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2015-09-30T03:08:00.003Z" itemprop="datePublished">30th September 2015</abbr> by <a class="url fn" href="http://www.blogger.com/profile/06918659071352983654" rel="author" itemprop="author">Mohit Arora</a>
  
  
</div>

    


    
    <div class="labels" itemprop="keywords">
      Labels: <a class="label" href="http://2mohitarora.blogspot.in/search/label/Docker" target="_self">Docker</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/docker%20native%20support%20in%20mesos" target="_self">docker native support in mesos</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/marathon" target="_self">marathon</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/marathon%20docker" target="_self">marathon docker</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/mesos" target="_self">mesos</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/mesos%20docker" target="_self">mesos docker</a> 
    </div>
    
    
    
<div class="share-controls defer delay" data-defer="true" data-delay="1000">
<span class="share-plusone g-plusone defer" data-href="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-i.html" data-hl="en" data-size="" data-source="blogger:blog:plusone" data-annotation="" data-width="90" data-text="Mesos and Marathon Cluster - Part I"></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button defer" data-url="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-i.html" data-count="" data-size="" data-text="Mesos and Marathon Cluster - Part I"></span>


<span class="share-facebook defer" data-url="http://2mohitarora.blogspot.com/2015/09/mesos-and-marathon-cluster-part-i.html" data-count="" data-layout="" data-text="Mesos and Marathon Cluster - Part I"></span>

</div>

    
  </div>

  

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="0 comments">
  <span class="bubble-content">0</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    
    Add a comment
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="4846931421114626704">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="https://www.blogger.com/comment-iframe.g?blogID=9015838297196321746&amp;postID=4846931421114626704" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  
</div>

  
</li><li class="item" data-id="7257374021372009211">
  
<div class="article hentry elasticsearch elasticsearch_versioning optimistic_locking " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
  <meta itemprop="blogId" content="9015838297196321746">
  <meta itemprop="postId" content="7257374021372009211">

  
  <div class="article-header">


<a class="ribbon date " title="4th January 2015" href="http://2mohitarora.blogspot.com/2015/01/elasticsearch-versioning-optimistic.html" itemprop="url">


  <div class="top ribbon-piece">Jan</div>
  <div class="bottom ribbon-piece">4</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://2mohitarora.blogspot.com/2015/01/elasticsearch-versioning-optimistic.html" rel="bookmark" itemprop="url" data-item-type="post" data-id="7257374021372009211">



Elasticsearch Versioning - Optimistic Locking</a>
  
  

<span class="blog-admin"><a class="edit" href="https://www.blogger.com/post-edit.g?blogID=9015838297196321746&amp;postID=7257374021372009211&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div dir="ltr" style="text-align: left;" trbidi="on">
<span style="background-color: white; color: #333333; font-family: Verdana, sans-serif; line-height: 25.6000003814697px;">ElasticSearch
 is gaining lot of popularity for building read/query model in CQRS 
approach. Also lot of companies are using it to power search 
functionality in their applications, model they use is keep data in one 
place (in SQL store), and keep a copy of it in Elasticsearch. This means
 every write you make (INSERT, UPDATE and DELETE statements) needs to be
 replicated to Elasticsearch.&nbsp;</span><br>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="background-color: white; line-height: 25.6000003814697px;"><br></span></span>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="background-color: white; line-height: 25.6000003814697px;">Most
 popular method to get data into Elasticsearch is via its update API, 
but update API doesn't offer any safety when it comes to concurrent 
updates, so you can end up with old or corrupt data in your index.</span></span><br>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="background-color: white; line-height: 25.6000003814697px;"><br></span></span>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="background-color: white; line-height: 25.6000003814697px;">In
 order to solve the concurrent updates issues, Elasticsearch offers a 
versioning system with optimistic locking. With every write-operation, 
whether it is an index,update or delete, Elasticsearch will increment 
the version by 1. Elasticsearch will also return the current version of 
documents with the response of get operations. &nbsp;When posting an 
update, you&nbsp;</span></span><span style="background-color: white; color: #333333; font-family: Verdana, sans-serif; line-height: 25.6000003814697px;">tell
 elasticsearch what version of the document you expect to find. If the 
document didnt change in the meantime, your operation succeeds. If 
something did change in the document and it has a newer version, 
Elasticsearch will signal it to you so you can deal with it 
appropriately.</span><br>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="background-color: white; line-height: 25.6000003814697px;"><br></span></span>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="background-color: white; line-height: 25.6000003814697px;">This page (<a href="http://www.elasticsearch.org/blog/elasticsearch-versioning-support/">http://www.elasticsearch.org/blog/elasticsearch-versioning-support/</a>) talks in detail about .</span></span><br>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="background-color: white; line-height: 25.6000003814697px;"><br></span></span>
<span style="background-color: white; color: #333333; font-family: Verdana, sans-serif; line-height: 25.6000003814697px;">Elasticsearch versioning and optimistic locking pattern</span><span style="color: #333333; font-family: Verdana, sans-serif;"><span style="background-color: white; line-height: 25.6000003814697px;">&nbsp;solves
 the problem in most of the cases (where some stream or queue is being 
used) but it still doesn't solve the problem in following pattern.</span></span><br>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="background-color: white; line-height: 25.6000003814697px;"><br></span></span>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="background-color: white; line-height: 25.6000003814697px;">Application -&gt; INSERT/UPDATE/DELETE in SQL Store -&gt; Application a</span><span style="line-height: 25.6000003814697px;">synchronously</span></span><span style="background-color: white; color: #333333; font-family: Verdana, sans-serif; line-height: 25.6000003814697px;">&nbsp;update ElasticSearch&nbsp;</span><span style="color: #333333; font-family: Verdana, sans-serif;"><span style="line-height: 25.6000003814697px;">using versioning and optimistic locking</span></span><span style="background-color: white; color: #333333; font-family: Verdana, sans-serif; line-height: 25.6000003814697px;">.</span><br>
<span style="background-color: white; color: #333333; font-family: Verdana, sans-serif; line-height: 25.6000003814697px;"><br></span>
<span style="background-color: white; color: #333333; font-family: Verdana, sans-serif; line-height: 25.6000003814697px;">What can happen in above pattern is&nbsp;</span><br>
<span style="background-color: white; color: #333333; font-family: Verdana, sans-serif; line-height: 25.6000003814697px;"><br></span>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="line-height: 25.6000003814697px;"><b>Transaction
 1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; Transaction 2&nbsp;</b></span></span><br>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="line-height: 25.6000003814697px;">SQL Datastore commit &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-</span></span><br>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="line-height: 25.6000003814697px;">Elasticsearch request delayed &nbsp; &nbsp; &nbsp;-</span></span><br>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="line-height: 25.6000003814697px;">-
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; SQL Datastore commit</span></span><br>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="line-height: 25.6000003814697px;">-
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; Reads v2 from Elasticsearch</span></span><br>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="line-height: 25.6000003814697px;">-
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; Writes v3 to Elasticsearch</span></span><br>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="line-height: 25.6000003814697px;">Reads v3 from Elasticsearch &nbsp; &nbsp; &nbsp; &nbsp; -</span></span><br>
<span style="color: #333333; font-family: Verdana, sans-serif; line-height: 25.6000003814697px;">Writes v4 to Elasticsearch &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<b>Changes Lost</b></span><br>
<span style="color: #333333; font-family: Verdana, sans-serif;"><span style="background-color: white; line-height: 25.6000003814697px;"><br></span></span>
<span style="background-color: white; line-height: 25.6000003814697px;"><span style="color: #333333; font-family: Verdana, sans-serif;">In
 order to solve above problem, Elasticsearch support of external 
versioning system comes handy. &nbsp;In external versioining system, 
Elasticsearch will store the version number as given and will not 
increment it. Also, instead of checking for an exact match, 
Elasticsearch will only return a version collision error if the version 
currently stored is greater or equal to the one in the indexing command.
 This effectively means "only store this information if no one else has 
supplied the same or a more recent version in the meantime", hence in 
above scenario if external version system is used and we pass the 
version ourself (in above case may be version from SQL store), 
Transaction 1 update to Elasticsearch will not be successful and changes
 will not be lost.</span></span></div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2015-01-04T17:29:00.002Z" itemprop="datePublished">4th January 2015</abbr> by <a class="url fn" href="http://www.blogger.com/profile/06918659071352983654" rel="author" itemprop="author">Mohit Arora</a>
  
  
</div>

    


    
    <div class="labels" itemprop="keywords">
      Labels: <a class="label" href="http://2mohitarora.blogspot.in/search/label/Elasticsearch" target="_self">Elasticsearch</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/Elasticsearch%20Versioning" target="_self">Elasticsearch Versioning</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/Optimistic%20Locking" target="_self">Optimistic Locking</a> 
    </div>
    
    
    
<div class="share-controls defer delay" data-defer="true" data-delay="1000">
<span class="share-plusone g-plusone defer" data-href="http://2mohitarora.blogspot.com/2015/01/elasticsearch-versioning-optimistic.html" data-hl="en" data-size="" data-source="blogger:blog:plusone" data-annotation="" data-width="90" data-text="Elasticsearch Versioning - Optimistic Locking"></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button defer" data-url="http://2mohitarora.blogspot.com/2015/01/elasticsearch-versioning-optimistic.html" data-count="" data-size="" data-text="Elasticsearch Versioning - Optimistic Locking"></span>


<span class="share-facebook defer" data-url="http://2mohitarora.blogspot.com/2015/01/elasticsearch-versioning-optimistic.html" data-count="" data-layout="" data-text="Elasticsearch Versioning - Optimistic Locking"></span>

</div>

    
  </div>

  

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="0 comments">
  <span class="bubble-content">0</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    
    Add a comment
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="7257374021372009211">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="https://www.blogger.com/comment-iframe.g?blogID=9015838297196321746&amp;postID=7257374021372009211" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  
</div>

  
</li><li class="item" data-id="441390256910083950">
  
<div class="article hentry git_tips " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
  <meta itemprop="blogId" content="9015838297196321746">
  <meta itemprop="postId" content="441390256910083950">

  
  <div class="article-header">


<a class="ribbon date " title="2nd November 2014" href="http://2mohitarora.blogspot.com/2014/11/git-stash-tip.html" itemprop="url">


  <div class="top ribbon-piece">Nov</div>
  <div class="bottom ribbon-piece">2</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://2mohitarora.blogspot.com/2014/11/git-stash-tip.html" rel="bookmark" itemprop="url" data-item-type="post" data-id="441390256910083950">



Git Tips</a>
  
  

<span class="blog-admin"><a class="edit" href="https://www.blogger.com/post-edit.g?blogID=9015838297196321746&amp;postID=441390256910083950&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div dir="ltr" style="text-align: left;" trbidi="on">
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">We all use <u><i>git stash</i></u>
 pretty frequently. I recently came across two pretty useful git stash 
flags that I have started using in my stash command almost&nbsp;every 
time.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">-k switch tells stash to keep the files that are staged intact</span><br>
<span style="font-family: Verdana, sans-serif;">-u switch tells stash to include untracked files (new files not added to git yet)</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">One more</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><u><i>git commit -a --amend -C HEAD</i></u></span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Above command will take 
all uncommitted and un-staged changes currently in the working directory
 and add them to the previous commit, amending it before pushing the 
change up. I use this all the time.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Hope you find them useful.</span></div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2014-11-02T02:30:00.003Z" itemprop="datePublished">2nd November 2014</abbr> by <a class="url fn" href="http://www.blogger.com/profile/06918659071352983654" rel="author" itemprop="author">Mohit Arora</a>
  
  
</div>

    


    
    <div class="labels" itemprop="keywords">
      Labels: <a class="label" href="http://2mohitarora.blogspot.in/search/label/Git%20tips" target="_self">Git tips</a> 
    </div>
    
    
    
<div class="share-controls defer delay" data-defer="true" data-delay="1000">
<span class="share-plusone g-plusone defer" data-href="http://2mohitarora.blogspot.com/2014/11/git-stash-tip.html" data-hl="en" data-size="" data-source="blogger:blog:plusone" data-annotation="" data-width="90" data-text="Git Tips"></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button defer" data-url="http://2mohitarora.blogspot.com/2014/11/git-stash-tip.html" data-count="" data-size="" data-text="Git Tips"></span>


<span class="share-facebook defer" data-url="http://2mohitarora.blogspot.com/2014/11/git-stash-tip.html" data-count="" data-layout="" data-text="Git Tips"></span>

</div>

    
  </div>

  

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="0 comments">
  <span class="bubble-content">0</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    
    Add a comment
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="441390256910083950">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="https://www.blogger.com/comment-iframe.g?blogID=9015838297196321746&amp;postID=441390256910083950" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  
</div>

  
</li><li class="item" data-id="5755317578087903498">
  
<div class="article hentry docker docker_native_support_in_mesos marathon mesos mesos_docker " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://3.bp.blogspot.com/-RyhLVerKmXE/VAOCOYLSCkI/AAAAAAAAFXE/VID8HWRSwI0/s1600/Screen%2BShot%2B2014-08-31%2Bat%2B4.14.05%2BPM.png">
    <meta itemprop="thumbnailUrl" content="http://3.bp.blogspot.com/-RyhLVerKmXE/VAOCOYLSCkI/AAAAAAAAFXE/VID8HWRSwI0/s1600/Screen%2BShot%2B2014-08-31%2Bat%2B4.14.05%2BPM.png">
  
  <meta itemprop="blogId" content="9015838297196321746">
  <meta itemprop="postId" content="5755317578087903498">

  
  <div class="article-header">


<a class="ribbon date " title="4th September 2014" href="http://2mohitarora.blogspot.com/2014/09/managing-docker-containers-using-mesos.html" itemprop="url">


  <div class="top ribbon-piece">Sep</div>
  <div class="bottom ribbon-piece">4</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://2mohitarora.blogspot.com/2014/09/managing-docker-containers-using-mesos.html" rel="bookmark" itemprop="url" data-item-type="post" data-id="5755317578087903498">



Managing Docker containers using Mesos and Marathon</a>
  
  

<span class="blog-admin"><a class="edit" href="https://www.blogger.com/post-edit.g?blogID=9015838297196321746&amp;postID=5755317578087903498&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div dir="ltr" style="text-align: left;" trbidi="on">
<span style="font-family: Verdana, sans-serif;">As <a href="https://www.docker.com/">docker</a>
 is gaining popularity, options to pick a tool for managing docker 
containers are also increasing. Couple of months back, I wrote a <a href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_26.html">detailed tutorial</a> on managing docker containers using CoreOS + Etcd + Fleet + Systemd.&nbsp;</span><span style="font-family: Verdana, sans-serif;">With 0.20.0 version of&nbsp;</span><a href="http://mesos.apache.org/" style="font-family: Verdana, sans-serif;">Mesos</a><span style="font-family: Verdana, sans-serif;">,
 Mesos team added native support of launching tasks that contain docker 
images, so I decided to give it a shot. This introductory post will be a
 step by step tutorial for managing docker containers using&nbsp;</span><a href="http://mesos.apache.org/" style="font-family: Verdana, sans-serif;">Mesos</a><span style="font-family: Verdana, sans-serif;">.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Before we launch anything, a quick introduction to the toolset that we will be using.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span><span style="font-family: Verdana, sans-serif;"><u>Mesos</u></span><u style="font-family: Verdana, sans-serif;">101</u><span style="font-family: Verdana, sans-serif;">:&nbsp;Mesos
 is a&nbsp;centralized&nbsp;and fault-tolerant cluster management 
framework. A very good introductory tutorial on mesos is available </span><a href="http://iankent.uk/2014/02/26/a-quick-introduction-to-apache-mesos/" style="font-family: Verdana, sans-serif;">here</a><span style="font-family: Verdana, sans-serif;">.&nbsp;Mesos is heavily used by Twitter and Airbnb.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif; font-size: x-small;"><i><u>Note</u>:
 Mesos is an amazing cluster management tool and can play a significant 
role in your cluster management even if you are not using Docker. You 
should&nbsp;definitely&nbsp;check it out.</i></span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><u>Mesosphere and Marathon</u>: <a href="http://mesosphere.io/">Mesosphe</a> is a company who is trying to build a business around Mesos. They have an extension of <a href="http://mesosphere.io/downloads/#apache-mesos-0.20.0">mesos</a>
 to make it even more usable datacenter operating system. If you have 
already read the introductory tutorial on mesos (link above), you must 
have realized that Mesos Framework(s) is the most important component of
 Mesos. <a href="https://github.com/mesosphere/marathon">Marathon</a>&nbsp;is
 one of the most widely used Mesos framework because it provides lot of 
capabilities to run your mesos based cluster effectively. In reality it 
is meta framework which provides a UI and a Rest API for managing and 
scheduling other Mesos frameworks (in our case containers).</span><br>
<h4 style="text-align: left;">
<span style="font-family: Verdana, sans-serif;"><u>Installation</u></span></h4>
<span style="font-family: Verdana, sans-serif;">For this tutorial, I am running Mesos master, Mesos slave, Zookeeper and Marathon on a vagrant VM.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><u>Install Mesos (v0.20.0+)</u>: Detailed instructions are available <a href="http://mesosphere.io/downloads/">here</a>.</span><br>
<span style="font-family: Verdana, sans-serif;"><u>Install Docker</u>: v1.0.0+</span><br>
<span style="font-family: Verdana, sans-serif;"><u>Install Marathon (v0.7.0+)</u>: Instructions to install and start are available <a href="https://github.com/mesosphere/marathon">here</a>.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><span style="font-size: x-small;"><i><br></i></span></span>
<span style="font-family: Verdana, sans-serif;"><span style="font-size: x-small;"><i>Note:The
 current stable release of Marathon 0.6.X doesn't work with Mesos 0.20.0
 native docker support so you have to build 0.7.0-SNAPSHOT yourself. 
Instructions to upgrade Marathon to 0.7.0-SNAPSHOT are available <a href="https://beingasysadmin.wordpress.com/2014/08/31/upgrading-marthon-for-mesos-native-docker-support/">here</a>.
 When marathon 0.7.0 is released, this step will not be required. If you
 don't want to build the 0.7.0-SNAPSHOT binary yourself, it is available
 <a href="https://github.com/mohitarora/vagrant/blob/master/marathon.jar?raw=true">here</a>.</i></span></span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">I have created a gist <a href="https://gist.github.com/mohitarora/63864128c451d93b15ce">here</a> from the history of commands that i ran.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Once everything is up and running, you can access Mesos console at&nbsp;</span><span style="font-family: Verdana, sans-serif;"><a href="http://localhost:5050/">http://localhost:5050/</a>&nbsp;and Marathon console at&nbsp;<a href="http://localhost:8080/">http://localhost:8080/</a></span><br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellspacing="0" cellpadding="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-RyhLVerKmXE/VAOCOYLSCkI/AAAAAAAAFXE/VID8HWRSwI0/s1600/Screen%2BShot%2B2014-08-31%2Bat%2B4.14.05%2BPM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://3.bp.blogspot.com/-RyhLVerKmXE/VAOCOYLSCkI/AAAAAAAAFXE/VID8HWRSwI0/s1600/Screen%2BShot%2B2014-08-31%2Bat%2B4.14.05%2BPM.png" width="640" height="370" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Mesos Console</td></tr>
</tbody></table>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellspacing="0" cellpadding="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-7M_hB-VlVAI/VAOCjFOGWBI/AAAAAAAAFXM/h9oHEqEpyGQ/s1600/Screen%2BShot%2B2014-08-31%2Bat%2B4.15.49%2BPM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://3.bp.blogspot.com/-7M_hB-VlVAI/VAOCjFOGWBI/AAAAAAAAFXM/h9oHEqEpyGQ/s1600/Screen%2BShot%2B2014-08-31%2Bat%2B4.15.49%2BPM.png" width="640" height="122" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Marathon Console</td></tr>
</tbody></table>
<div style="text-align: left;">
<span style="font-family: Verdana, sans-serif;">Please go through the 
various tabs in Mesos and Marathon UI, they are self 
explanatory.&nbsp;Specially checkout Slave and Frameworks tabs in Mesos 
UI.&nbsp;</span></div>
<h3 style="text-align: left;">
<span style="font-family: Verdana, sans-serif;"><u>Launch docker containers using Marathon Rest API</u></span></h3>
<div>
<span style="font-family: Verdana, sans-serif;">At this point, we are 
ready to launch docker containers using Marathon Rest API. Documentation
 of Marathon Rest API is available at&nbsp;<a href="http://localhost:8080/help">http://localhost:8080/help</a></span><br>
<br>
<span style="font-family: Verdana, sans-serif;">For this tutorial we will be launching the&nbsp;</span></div>
<div>
<div style="background-color: white; margin: 0px; outline: none; padding: 0px;">
<pre class="prettyprint well" style="background-color: #fcfcfc; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;"><span style="font-size: 14px; line-height: 23.7999992370605px;"># Submit request to launch docker container
curl -X POST -H "Content-Type: application/json" localhost:8080/v2/apps -d '
{
    "container": {
      "type": "DOCKER",
      "docker": {
        "image": "libmesos/ubuntu"
      }
    },
    "id": "mohit",
    "instances": "1",
    "cpus": "0.5",
    "mem": "128",
    "uris": [],
    "cmd": "while sleep 10; do date -u +%T; done"
}'</span></span></pre>
</div>
</div>
<div>
<span style="font-family: Verdana, sans-serif;">Once your request is 
acknowledged, you would see the launch of the Mesos Docker task with an 
instances count of 0/1 in Marathon UI as shown below.&nbsp;</span><br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://4.bp.blogspot.com/-jAfCMLndh48/VAev8nQST8I/AAAAAAAAFbc/hGl5uHGkQhk/s1600/Screen%2BShot%2B2014-09-03%2Bat%2B8.17.31%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://4.bp.blogspot.com/-jAfCMLndh48/VAev8nQST8I/AAAAAAAAFbc/hGl5uHGkQhk/s1600/Screen%2BShot%2B2014-09-03%2Bat%2B8.17.31%2BPM.png" width="640" height="84" border="0"></a></div>
<span style="font-family: Verdana, sans-serif;">Mesos Docker task 
requires the slave running the task to perform a docker pull. The first 
Docker pull can take several minutes. When it is completed, Marathon 
instances should change to 1/1 as shown below.</span></div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-Dx7ThoxEXa4/VAewDZ3pkpI/AAAAAAAAFbk/_XwQoIH7I_0/s1600/Screen%2BShot%2B2014-09-03%2Bat%2B8.17.50%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://2.bp.blogspot.com/-Dx7ThoxEXa4/VAewDZ3pkpI/AAAAAAAAFbk/_XwQoIH7I_0/s1600/Screen%2BShot%2B2014-09-03%2Bat%2B8.17.50%2BPM.png" width="640" height="70" border="0"></a></div>
<div>
<span style="font-family: Verdana, sans-serif;">At this point, if you check mesos UI, you would see a task in running status as shown below</span></div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://4.bp.blogspot.com/-7vhSjrB_UXM/VAewH8SG_YI/AAAAAAAAFbs/rC-ZAdMxP-0/s1600/Screen%2BShot%2B2014-09-03%2Bat%2B8.18.01%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://4.bp.blogspot.com/-7vhSjrB_UXM/VAewH8SG_YI/AAAAAAAAFbs/rC-ZAdMxP-0/s1600/Screen%2BShot%2B2014-09-03%2Bat%2B8.18.01%2BPM.png" width="640" height="198" border="0"></a></div>
<div>
<span style="font-family: Verdana, sans-serif;">Another way to validate is get the list of docker containers running on machine</span></div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-yChqwraWx_o/VAewMvy0glI/AAAAAAAAFb0/um6kQZ06uBY/s1600/Screen%2BShot%2B2014-09-03%2Bat%2B8.18.33%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://2.bp.blogspot.com/-yChqwraWx_o/VAewMvy0glI/AAAAAAAAFb0/um6kQZ06uBY/s1600/Screen%2BShot%2B2014-09-03%2Bat%2B8.18.33%2BPM.png" width="640" height="30" border="0"></a></div>
<div class="separator" style="clear: both; text-align: center;">
</div>
<span style="font-family: Verdana, sans-serif;">At this point from 
Marathon UI, try to kill the container that we started, you will notice 
that new container starts automatically. This happens because mesos is 
managing your cluster and mesos knows that you launched a container 
which went down, hence mesos automatically starts a new one.&nbsp;</span><span style="font-family: Verdana, sans-serif;">Pretty cool right..</span><br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-pu6JuP26CWg/VAew2_Ub6RI/AAAAAAAAFb8/DAqR3bvlrg8/s1600/Screen%2BShot%2B2014-09-03%2Bat%2B8.21.57%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://2.bp.blogspot.com/-pu6JuP26CWg/VAew2_Ub6RI/AAAAAAAAFb8/DAqR3bvlrg8/s1600/Screen%2BShot%2B2014-09-03%2Bat%2B8.21.57%2BPM.png" width="640" height="170" border="0"></a></div>
<h3 style="text-align: left;">
<span style="font-family: Verdana, sans-serif;"><u>Scaling Using Marathon:</u></span></h3>
<div>
<span style="font-family: Verdana, sans-serif;">Using marathon UI or 
rest api endpoints you can scale up or scale down depending on your 
need. In real production environment, you will automate the scaling 
process. For this tutorial I increased the instance count to 2 from 
Marathon UI and 2 docker containers were launched as shown below</span></div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-Yf3UJVMKgxM/VAexkYAXlyI/AAAAAAAAFcE/16ECcqGs9j4/s1600/Screen%2BShot%2B2014-09-03%2Bat%2B8.24.14%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://1.bp.blogspot.com/-Yf3UJVMKgxM/VAexkYAXlyI/AAAAAAAAFcE/16ECcqGs9j4/s1600/Screen%2BShot%2B2014-09-03%2Bat%2B8.24.14%2BPM.png" width="640" height="196" border="0"></a></div>
<div>
<span style="font-family: Verdana, sans-serif;">Similarly i selected a container and hit "Kill and Scale" to scale down. That also worked perfectly fine.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">This was an introductory
 post of Docker + Mesos + Marathon. We all know Mesos in itself is a 
great cluster management tool, now with support of Docker, it will be 
more widely accepted.&nbsp;</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">In my next blog I would launch the topology I used in my <a href="http://2mohitarora.blogspot.com/2014/08/service-discovery-using-consul.html">previous blog</a>
 using Mesos and Marathon where an nginx server will be running in front
 of application containers, we will scale up and scale down application 
containers.&nbsp;</span></div>
</div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2014-09-04T00:33:00.001Z" itemprop="datePublished">4th September 2014</abbr> by <a class="url fn" href="http://www.blogger.com/profile/06918659071352983654" rel="author" itemprop="author">Mohit Arora</a>
  
  
</div>

    


    
    <div class="labels" itemprop="keywords">
      Labels: <a class="label" href="http://2mohitarora.blogspot.in/search/label/Docker" target="_self">Docker</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/docker%20native%20support%20in%20mesos" target="_self">docker native support in mesos</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/marathon" target="_self">marathon</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/mesos" target="_self">mesos</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/mesos%20docker" target="_self">mesos docker</a> 
    </div>
    
    
    
<div class="share-controls defer delay" data-defer="true" data-delay="1000">
<span class="share-plusone g-plusone defer" data-href="http://2mohitarora.blogspot.com/2014/09/managing-docker-containers-using-mesos.html" data-hl="en" data-size="" data-source="blogger:blog:plusone" data-annotation="" data-width="90" data-text="Managing Docker containers using Mesos and Marathon"></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button defer" data-url="http://2mohitarora.blogspot.com/2014/09/managing-docker-containers-using-mesos.html" data-count="" data-size="" data-text="Managing Docker containers using Mesos and Marathon"></span>


<span class="share-facebook defer" data-url="http://2mohitarora.blogspot.com/2014/09/managing-docker-containers-using-mesos.html" data-count="" data-layout="" data-text="Managing Docker containers using Mesos and Marathon"></span>

</div>

    
  </div>

  

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="1 comment">
  <span class="bubble-content">1</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    View comments
    
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="5755317578087903498">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="https://www.blogger.com/comment-iframe.g?blogID=9015838297196321746&amp;postID=5755317578087903498" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  
</div>

  
</li><li class="item" data-id="4960798995733020205">
  
<div class="article hentry consul consul_key_value_store consulhaproxy envconsul service_discovery " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://2.bp.blogspot.com/-vIH6INApJpo/U_VeumeuA6I/AAAAAAAAFVo/dXLs6JL4v1c/s1600/Screen%2BShot%2B2014-08-20%2Bat%2B10.51.00%2BPM.png">
    <meta itemprop="thumbnailUrl" content="http://2.bp.blogspot.com/-vIH6INApJpo/U_VeumeuA6I/AAAAAAAAFVo/dXLs6JL4v1c/s1600/Screen%2BShot%2B2014-08-20%2Bat%2B10.51.00%2BPM.png">
  
  <meta itemprop="blogId" content="9015838297196321746">
  <meta itemprop="postId" content="4960798995733020205">

  
  <div class="article-header">


<a class="ribbon date " title="23rd August 2014" href="http://2mohitarora.blogspot.com/2014/08/service-discovery-using-consul.html" itemprop="url">


  <div class="top ribbon-piece">Aug</div>
  <div class="bottom ribbon-piece">23</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://2mohitarora.blogspot.com/2014/08/service-discovery-using-consul.html" rel="bookmark" itemprop="url" data-item-type="post" data-id="4960798995733020205">



Consul Service Discovery in Docker containers</a>
  
  

<span class="blog-admin"><a class="edit" href="https://www.blogger.com/post-edit.g?blogID=9015838297196321746&amp;postID=4960798995733020205&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div dir="ltr" style="text-align: left;" trbidi="on">
<span style="font-family: Verdana, sans-serif;">Everyone is talking about <a href="http://microservices.io/">microservices</a>.&nbsp;Service
 Discovery has always been a key component in distributed systems, SOA 
based applications and now in microservices.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">I have been using etcd/confd for service discovery in my <a href="https://dropwizard.github.io/dropwizard/">dropwizard</a> and&nbsp;</span><span style="font-family: Verdana, sans-serif;">Docker/CoreOS based microservices architecture</span><span style="font-family: Verdana, sans-serif;">. Recently I came across an interesting project called </span><a href="http://www.consul.io/" style="font-family: Verdana, sans-serif;">consul</a><span style="font-family: Verdana, sans-serif;"> from </span><a href="http://www.hashicorp.com/" style="font-family: Verdana, sans-serif;">hashicorp</a><span style="font-family: Verdana, sans-serif;">.
 I was pretty impressed by consul and was able to solve couple of 
important use cases (Including service discovery) with consul in the 
modern era of microservices architecture running inside docker 
containers. In this blog, I will be talking about following consul 
concepts/projects&nbsp;</span><br>
<ul style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">Out of the box UI to view all services and nodes running in your datacenter</span></li>
<li><span style="font-family: Verdana, sans-serif;">Failure Detection / Health Checks</span></li>
<li><span style="font-family: Verdana, sans-serif;">Painless and automatic service discovery using consul DNS query interface</span></li>
<li><a href="https://github.com/hashicorp/consul-haproxy" style="font-family: Verdana, sans-serif;">consul-haproxy</a><span style="font-family: Verdana, sans-serif;">, Ideally this project should be called </span><b style="font-family: Verdana, sans-serif;">consul-watch</b><span style="font-family: Verdana, sans-serif;">. I have forked this project </span><a href="https://github.com/mohitarora/consul-watch" style="font-family: Verdana, sans-serif;">here</a><span style="font-family: Verdana, sans-serif;"> and will be using my fork in this blog.</span></li>
<li><span style="font-family: Verdana, sans-serif;">Key Value Store for Application Configuration using&nbsp;<a href="https://github.com/hashicorp/envconsul">envconsul</a></span></li>
</ul>
<span style="font-family: Verdana, sans-serif;">Consul is not the first tool that is trying to solve service discovery problem. People have been using&nbsp;</span><span style="font-family: Verdana, sans-serif;">coordination services like&nbsp;<a href="http://www.consul.io/intro/vs/zookeeper.html">Zookeeper, Doozer and Etcd</a> for service discovery as well and there are some open source projects like <a href="http://nerds.airbnb.com/smartstack-service-discovery-cloud/">SmartStack</a>, <a href="https://github.com/Netflix/eureka">Eureka</a>, <a href="http://www.consul.io/intro/vs/skydns.html">SkyDNS</a>.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">If you know nothing about consul, please explore&nbsp;<a href="http://www.consul.io/">consul here</a>&nbsp;before reading further.</span><br>
<h2>
<span style="font-family: Verdana, sans-serif;"><u>Pre-requisites</u></span></h2>
<span style="font-family: Verdana, sans-serif;">Add following arguments 
to /etc/sysconfig/docker (if you are running RHEL) on machine where 
docker is running. If you are not running RHEL modify DOCKER_OPTS</span><br>
<div>
<div>
<pre class="prettyprint well" style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="background-color: #fcfcfc; color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;"><span style="font-size: 14px; line-height: 23.799999237060547px;">other_args="--dns 127.0.0.1 --dns-search service.consul"</span></span>
</pre>
</div>
<span style="font-family: Verdana, sans-serif;">After doing above mentioned change, please restart docker. I would explain the importance of this later.</span></div>
<h2>
<span style="font-family: Verdana, sans-serif;"><u>Consul Agent(s) in server and client mode</u></span></h2>
<span style="font-family: Verdana, sans-serif;">First we need to launch a consul cluster, I have created a <a href="https://registry.hub.docker.com/u/mohitarora/consul/">consul docker image</a>
 and uploaded to docker hub. This image can be used to launch consul 
both in server and client mode. Dockerfile that i used to build consul 
docker image is available&nbsp;<a href="https://github.com/mohitarora/consul-docker/tree/master/consul">here</a>.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">For this tutorial, I will just be a launching a <b>single</b>
 agent in server mode, you should launch at least 3 nodes in server mode
 in a real world scenario. Run the following command on a machine where 
docker is installed</span><br>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><code style="background-color: transparent; border: 0px; color: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 14px; line-height: 1.7; overflow-wrap: normal; padding: 0px;"><span class="pln" style="color: #48484c; line-height: 1.7;">$ </span></code><span style="background-color: transparent; font-size: 14px; line-height: 23.799999237060547px;"><span style="color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;">sudo docker run -p 8300:8300 -p 8301:8301 -p 8301:8301/udp -p 8302:8302 -p 8302:8302/udp -p 8400:8400 -p 8500:8500 -p 8600:53/udp -v /data:/data -h node1 -d mohitarora/consul -server -bootstrap</span></span></pre>
<span style="font-family: Verdana, sans-serif;">Above command will download the consul docker image and run a container. Once the container is started, hit <a href="http://localhost:8500/ui">http://localhost:8500/ui</a> on the host machine and you should see consul UI page as shown below</span><br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-vIH6INApJpo/U_VeumeuA6I/AAAAAAAAFVo/dXLs6JL4v1c/s1600/Screen%2BShot%2B2014-08-20%2Bat%2B10.51.00%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://2.bp.blogspot.com/-vIH6INApJpo/U_VeumeuA6I/AAAAAAAAFVo/dXLs6JL4v1c/s1600/Screen%2BShot%2B2014-08-20%2Bat%2B10.51.00%2BPM.png" width="640" height="211" border="0"></a></div>
<span style="font-family: Verdana, sans-serif;">As you can see, we have 
only one consul agent running in server mode. If you would have started 3
 nodes in server mode (as recommended in a real world scenario), you 
will see 3 nodes in consul ui.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Now let's start another 
docker container which hosts our application. My application is a java 
based application which hosts one rest endpoint. Dockerfile and the 
binary used to build the application docker image are available&nbsp;<a href="https://github.com/mohitarora/consul-docker/tree/master/application">here</a>. Couple of things to notice:</span><br>
<span style="font-family: Verdana, sans-serif;"></span><br>
<ul style="text-align: left;"><span style="font-family: Verdana, sans-serif;">
<li>Application docker image is built on top of&nbsp;<span style="background-color: white; color: #333333; line-height: 16.799999237060547px; white-space: pre;">mohitarora/consul,</span><span style="background-color: white; color: #333333; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 12px; line-height: 16.799999237060547px; white-space: pre;"> </span>which means consul agent is running in application docker container as well.&nbsp;</li>
<li>We are adding a consul <a href="https://github.com/mohitarora/consul-docker/blob/master/application/config/app.json">service definition file</a>&nbsp;to docker image so that service and its health checks gets registered with consul when container starts.</li>
<li>When the container starts we execute app.sh which essentially does 2 things</li>
</span></ul>
<ol style="text-align: left;"><ol>
<li><span style="font-family: Verdana, sans-serif;">Starts the application in background.&nbsp;</span></li>
<li><span style="font-family: Verdana, sans-serif;">Start the consul 
agent in client mode. Agent joins the consul cluster defined above. In 
real world scenario you would resolve consul cluster node via DNS.</span></li>
</ol>
</ol>
<ol style="text-align: left;"><ol>
</ol>
</ol>
<div>
<span style="font-family: Verdana, sans-serif;">I have uploaded the <a href="https://registry.hub.docker.com/u/mohitarora/consul-app/">application docker image</a> as well on docker hub. You can directly run the following command</span><br>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><code style="background-color: transparent; border: 0px; color: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 14px; line-height: 1.7; overflow-wrap: normal; padding: 0px;"><span class="pln" style="color: #48484c; line-height: 1.7;">$ </span></code><span style="background-color: transparent; font-size: 14px; line-height: 23.799999237060547px;"><span style="color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;">sudo docker run -p 8080:8080 -d mohitarora/consul-app </span></span><span style="background-color: transparent; font-size: 14px; line-height: 23.799999237060547px;"><span style="color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;">-join=172.17.0.2</span></span></pre>
<div>
<span style="font-family: Verdana, sans-serif;">Once the application container starts successfully, if you refresh the consul-ui, you should see something like this.</span></div>
</div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-62UJ_h7oq0Y/U_elV0yJxyI/AAAAAAAAFWI/GmUv5Z6vxaI/s1600/Screen%2BShot%2B2014-08-22%2Bat%2B4.17.01%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://3.bp.blogspot.com/-62UJ_h7oq0Y/U_elV0yJxyI/AAAAAAAAFWI/GmUv5Z6vxaI/s1600/Screen%2BShot%2B2014-08-22%2Bat%2B4.17.01%2BPM.png" width="640" height="220" border="0"></a></div>
<div>
<span style="font-family: Verdana, sans-serif;">Pretty impressive right,
 you can see the sample-app running on one node in consul ui with its 
health check status. You should install consul agent in client mode on 
all the machines/containers in your datacenter and you can see the 
status of all the nodes are services in a single place. Consul service 
definition details are available&nbsp;<a href="http://www.consul.io/docs/agent/services.html">here</a>, and health check details are available <a href="http://www.consul.io/docs/agent/checks.html">here</a>.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Let's launch one more instance of sample application</span></div>
<div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><code style="background-color: transparent; border: 0px; color: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 14px; line-height: 1.7; overflow-wrap: normal; padding: 0px;"><span class="pln" style="color: #48484c; line-height: 1.7;">$ </span></code><span style="background-color: transparent; font-size: 14px; line-height: 23.799999237060547px;"><span style="color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;">sudo docker run -p 8081:8080 -d mohitarora/consul-app </span></span><span style="background-color: transparent; font-size: 14px; line-height: 23.799999237060547px;"><span style="color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;">-join=172.17.0.2</span></span></pre>
<div>
<span style="font-family: Verdana, sans-serif;">Once the second instance is launched, consul ui shows sample-app running on 2 nodes</span></div>
</div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://4.bp.blogspot.com/-89dO00rxmR0/U_eoWcsjmRI/AAAAAAAAFWU/ItCPthWCWH4/s1600/Screen%2BShot%2B2014-08-22%2Bat%2B4.29.51%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://4.bp.blogspot.com/-89dO00rxmR0/U_eoWcsjmRI/AAAAAAAAFWU/ItCPthWCWH4/s1600/Screen%2BShot%2B2014-08-22%2Bat%2B4.29.51%2BPM.png" width="640" height="290" border="0"></a></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Needless to say, application is also running. If you hit&nbsp;<a href="http://localhost:8080/sample">http://localhost:8080/sample</a> and&nbsp;<a href="http://localhost:8081/sample">http://localhost:8081/sample</a>, you should see response from both instances of application we started above</span></div>
<div>
<h2>
<span style="font-family: Verdana, sans-serif;"><u>Painless service discovery using consul:</u></span></h2>
</div>
<div>
<span style="font-family: Verdana, sans-serif;">As i said above, i</span><span style="font-family: Verdana, sans-serif;">dea
 is to install consul agent in client mode on all the 
machines/containers in your datacenter. Once you have consul agents 
running on all the machines/containers in your datacenter, any 
application can query local consul agent to find where other services 
are. If you are not able to install consul agent on a machine/container 
for some reason, you can still query remote node where consul agent is 
running.&nbsp;</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">At this point, let's 
start another docker container which has consul agent running on it that
 joins the above defined cluster and try to query services.</span></div>
<div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><code style="background-color: transparent; border: 0px; color: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 14px; line-height: 1.7; overflow-wrap: normal; padding: 0px;"><span class="pln" style="color: #48484c; line-height: 1.7;">$ </span></code><span style="background-color: transparent; font-size: 14px; line-height: 23.799999237060547px;"><span style="color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;">sudo docker run -i -t --entrypoint /bin/bash mohitarora/consul</span></span></pre>
</div>
<div>
<i style="font-family: Verdana, sans-serif;"><span style="font-size: x-small;">Note:
 This is just a demo container we are starting in foreground mode to 
prove how painless service discovery is. This will not run any 
application</span></i><br>
<i style="font-family: Verdana, sans-serif;"><span style="font-size: x-small;"><br></span></i>
<span style="font-family: Verdana, sans-serif;">As a next step lets start the consul agent in client mode in this container.</span></div>
<div>
<div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><code style="background-color: transparent; border: 0px; color: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 14px; line-height: 1.7; overflow-wrap: normal; padding: 0px;"><span class="pln" style="color: #48484c; line-height: 1.7;">$ </span></code><span style="background-color: transparent; font-size: 14px; line-height: 23.799999237060547px;"><span style="color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;">consul agent -config-dir=/config -join=172.17.0.2 &amp;</span></span></pre>
</div>
</div>
<div>
<span style="font-family: Verdana, sans-serif;">Once you run the above 
command, you will see an extra node in consul-ui with 0 service because 
this node doesn't have any service running on it.</span></div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-eoI87Iciph0/U_f2k557gVI/AAAAAAAAFW0/w6YGXiTYCjE/s1600/Screen%2BShot%2B2014-08-22%2Bat%2B10.03.17%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://3.bp.blogspot.com/-eoI87Iciph0/U_f2k557gVI/AAAAAAAAFW0/w6YGXiTYCjE/s1600/Screen%2BShot%2B2014-08-22%2Bat%2B10.03.17%2BPM.png" width="640" height="62" border="0"></a></div>
<div>
<div>
<span style="font-family: Verdana, sans-serif;">At this point, if you hit&nbsp;<a href="http://localhost:8500/v1/catalog/service/sample-app">http://localhost:8500/v1/catalog/service/sample-app</a>&nbsp;within
 the container, you will get the json payload back which will tell you 
where sample-app is running. This is useful but no one wants to use the 
Http API for service discovery because application will have to write 
logic to query HTTP endpoint, parse it and use the result. Consul has a 
much better way,its DNS interface. The DNS interface allows applications
 to make use of service discovery without any high-touch integration 
with Consul. For example, instead of making any HTTP API requests to 
Consul, you can use the DNS server directly and just do a name lookup</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">To test service discovery using DNS interface, install bind-utils in this test container using following command</span></div>
</div>
<div>
<div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><code style="background-color: transparent; border: 0px; color: inherit; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 14px; line-height: 1.7; overflow-wrap: normal; padding: 0px;"><span class="pln" style="color: #48484c; line-height: 1.7;">$ </span></code><span style="background-color: transparent; font-size: 14px; line-height: 23.799999237060547px;"><span style="color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;">yum install -y bind-utils</span></span></pre>
</div>
</div>
<div>
<div>
<span style="font-family: Verdana, sans-serif;">At this point, if you run&nbsp;<a href="http://127.0.0.1%20sample-app.service.consul/">dig @127.0.0.1 sample-app.service.consul</a>, you will see following output.&nbsp;</span></div>
<div>
<div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;"><span style="font-size: 14px; line-height: 23.799999237060547px;">;; ANSWER SECTION:
sample-app.service.dc1.consul. 0 IN A 172.17.0.8
sample-app.service.dc1.consul. 0 IN A 172.17.0.6</span></span></pre>
</div>
<div>
</div>
</div>
<div>
<div>
</div>
</div>
</div>
<span style="font-family: Verdana, sans-serif;">This is helpful but 
there is still an issue, consul dns is not the default dns for container
 so applications will still not get any result back when application 
query sample-app.service.dc.consul.</span><br>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span>
<br>
<div>
<span style="font-family: Verdana, sans-serif; font-size: small; font-weight: normal;">This
 is where our pre-requisite step comes into picture, we have already 
taken required step to set primary dns of container to 127.0.0.1, hence 
if you just run&nbsp;</span><a href="http://dig%20sample-app.service.consul/" style="font-family: Verdana, sans-serif;">dig sample-app.service.consul</a>,&nbsp;<span style="font-family: Verdana, sans-serif;">you will get the same result.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Impressive right...There
 was another argument that we passed in our pre-requisite step called 
--dns-search which will make things event better, it enables lookup by 
short-host names. Try running following command</span></div>
<div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="font-family: Monaco, Menlo, Consolas, Courier New, monospace;"><span style="font-size: 14px; line-height: 23.799999237060547px;"><span style="color: #48484c;">curl http://sample-app:8080/sample
</span><span style="color: blue;">Output: {"id":49,"content":"Hello, Stranger!"}</span></span></span></pre>
</div>
<span style="font-family: Verdana, sans-serif;">This is what i call is 
painless service discovery. You can hardcode short name of service in 
application code itself e.g redis, elasticsearch etc. Consul will do the
 rest for you, as long as you install consul agent on node/container 
running the service and it joins the cluster. You will never have to 
worry changing service endpoints as application moves from environment 
to environment. Consul DNS interface will also make sure that it never 
returns the unhealthy instance back.</span><br>
<h2 style="text-align: left;">
<u style="font-family: Verdana, sans-serif;">Related Projects:</u></h2>
<h3 style="text-align: left;">
<span style="font-family: Verdana, sans-serif;"><u>consul-watch</u></span></h3>
<div>
<span style="font-family: Verdana, sans-serif;">At this point I would like to introduce consul service discovery related project called&nbsp;</span><a href="https://github.com/hashicorp/consul-haproxy" style="font-family: Verdana, sans-serif;">consul-haproxy</a>.&nbsp;<span style="font-family: Verdana, sans-serif;">I have forked this&nbsp;</span><span style="font-family: Verdana, sans-serif;">project&nbsp;</span><a href="https://github.com/mohitarora/consul-watch" style="font-family: Verdana, sans-serif;">here</a>&nbsp;<span style="font-family: Verdana, sans-serif;">and I call it consul-watch with my own changes.&nbsp;</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Let's say you have a 
nginx sitting as load balancer in front of sample application running in
 different containers above. You would have 2 very basic requirements 
for nginx server.</span></div>
<div>
<ol style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">nginx load balancing
 should be elastic so that if a new application container starts, nginx 
should start routing traffic to it and if a container stops, nginx 
should stop routing traffic to the container.</span></li>
<li><span style="font-family: Verdana, sans-serif;">nginx should not be 
routing traffic to instances on which application health checks (that we
 registered as part of consul service definition file) are failing.</span></li>
</ol>
<span style="font-family: Verdana, sans-serif;">consul-watch would solve
 both these problems for us. Let's start another docker container which 
has nginx running. Dockerfile that i used to build this nginx image is 
available <a href="https://github.com/mohitarora/consul-docker/blob/master/nginx/Dockerfile">here</a>&nbsp;and I have already uploaded the <a href="https://registry.hub.docker.com/u/mohitarora/consul-sample-nginx/">nginx docker image</a> on docker hub, you can directly run the following command</span></div>
<div>
<pre class="prettyprint well" style="background-color: #fcfcfc; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgb(227, 227, 227); margin-bottom: 20px; min-height: 20px; overflow-x: auto; padding: 8px; word-break: break-all; word-wrap: break-word;"><span style="background-color: transparent;"><span style="color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;"><span style="font-size: 14px; line-height: 23.799999237060547px;">sudo docker run -p 80:80 -d mohitarora/consul-sample-nginx </span></span></span><span style="background-color: transparent; font-size: 14px; line-height: 23.799999237060547px;"><span style="color: #48484c; font-family: Monaco, Menlo, Consolas, Courier New, monospace;">-join=172.17.0.2</span></span></pre>
</div>
<div style="text-align: left;">
<span style="font-family: Verdana, sans-serif;">As soon as the nginx container starts and you hit <a href="http://sample.test.com/sample">http://sample.test.com/sample</a>&nbsp;from
 host machine, you would see traffic is getting routed to 2 application 
backends that we started above in a round robin fashion.&nbsp;</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><i><span style="font-size: x-small;">Note: You will have to add a host entry on host machine for sample.test.com mapping to 127.0.0.1</span></i></span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Pretty magical right. 
Trust me nothing is hardcoded, consul-watch is doing all the magic. I am
 not going into details here how consul-watch works. Please read <a href="http://www.hashicorp.com/blog/haproxy-with-consul.html">this</a> blog and checkout the files <a href="https://github.com/mohitarora/consul-docker/tree/master/nginx/consul-watch-config">here</a>
 to understand how I made it work for this tutorial. Bottomline is that 
consul is running in client mode in nginx container as well and has 
joined the consul cluster, thats how nginx gets the details about where 
application services are running.</span></div>
<div>
<span style="font-family: Verdana, sans-serif; font-size: x-small;"><i>Note: If you need more details, please let me know. I will write a separate blog for that.</i></span></div>
<div>
<br></div>
<div>
<span style="font-family: Verdana, sans-serif;">Consul-ui will provide nginx node/service details as well</span></div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-8Bjikjsn9Ew/U_fND-v6mPI/AAAAAAAAFWk/ANnj_IPH_oQ/s1600/Screen%2BShot%2B2014-08-22%2Bat%2B7.06.35%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://1.bp.blogspot.com/-8Bjikjsn9Ew/U_fND-v6mPI/AAAAAAAAFWk/ANnj_IPH_oQ/s1600/Screen%2BShot%2B2014-08-22%2Bat%2B7.06.35%2BPM.png" width="640" height="228" border="0"></a></div>
<div>
<span style="font-family: Verdana, sans-serif;">Lets stop one application container at this point and see what happens. As soon as you stop an application container using <i>sudo docker stop &lt;id&gt;</i>
 command, you will notice that nginx will stop routing traffic to 
stopped application container, it will now only route traffic to only 
one healthy container. At this time if you want, you can start one more 
application container and see nginx auto detects it and adds to load 
balancing set.&nbsp;</span></div>
<div>
<span style="font-family: Verdana, sans-serif; font-size: x-small;"><i>Note:
 If you would notice, stopped container is still visible in consul-ui in
 a failed status. The reason is because when we stopped the container, 
consul process was not shut down gracefully. That is where supervisor 
power comes in docker container. In a real world scenario you should use
 supervisor to start your processes instead of bash script as i have 
done is this tutorial. I have already written a tutorial <a href="http://2mohitarora.blogspot.com/2014/02/dockerfile-tutorial-running-apache-http.html">here</a>. Consul will automatically remove this node after 72 hours.</i></span></div>
<div>
<h3>
<span style="font-family: Verdana, sans-serif;"><u>envconsul</u></span></h3>
</div>
<div>
<span style="font-family: Verdana, sans-serif;">In the end, I would like to introduce one more consul related projects called&nbsp;<a href="https://github.com/hashicorp/envconsul">envconsul</a>.
 Consul is not only meant for service discovery via http &amp; dns 
interface, it also has a K/V store which you can use to store your 
application configuration. Once the configuration K/V pairs are stored 
in consul, they can be retrieved via Http interface as explained <a href="http://www.consul.io/intro/getting-started/kv.html">here</a>&nbsp;in your application or you can use&nbsp;</span><a href="https://github.com/hashicorp/envconsul" style="font-family: Verdana, sans-serif;">envconsul</a>. <span style="font-family: Verdana, sans-serif;">A detailed tutorial on&nbsp;</span><a href="https://github.com/hashicorp/envconsul" style="font-family: Verdana, sans-serif;">envconsul</a>&nbsp;<span style="font-family: Verdana, sans-serif;">is available <a href="http://www.hashicorp.com/blog/twelve-factor-consul.html">here</a>.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">I would expect that you will explore consul for</span></div>
<div>
<ul style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">Service Discovery</span></li>
<li><span style="font-family: Verdana, sans-serif;">Configuration Store</span></li>
<li><span style="font-family: Verdana, sans-serif;">View all service/nodes in your data center</span></li>
<li><span style="font-family: Verdana, sans-serif;">Health Checks</span></li>
</ul>
<div>
<span style="font-family: Verdana, sans-serif;">You should also consider <a href="https://github.com/mohitarora/consul-watch">consul-watch</a> for use cases similar to nginx load balancer explained above.</span></div>
</div>
</div>
</div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2014-08-23T04:34:00.002Z" itemprop="datePublished">23rd August 2014</abbr> by <a class="url fn" href="http://www.blogger.com/profile/06918659071352983654" rel="author" itemprop="author">Mohit Arora</a>
  
  
</div>

    


    
    <div class="labels" itemprop="keywords">
      Labels: <a class="label" href="http://2mohitarora.blogspot.in/search/label/consul" target="_self">consul</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/consul%20key%20value%20store" target="_self">consul key value store</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/consul-haproxy" target="_self">consul-haproxy</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/envconsul" target="_self">envconsul</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/service%20discovery" target="_self">service discovery</a> 
    </div>
    
    
    
<div class="share-controls defer delay" data-defer="true" data-delay="1000">
<span class="share-plusone g-plusone defer" data-href="http://2mohitarora.blogspot.com/2014/08/service-discovery-using-consul.html" data-hl="en" data-size="" data-source="blogger:blog:plusone" data-annotation="" data-width="90" data-text="Consul Service Discovery in Docker containers"></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button defer" data-url="http://2mohitarora.blogspot.com/2014/08/service-discovery-using-consul.html" data-count="" data-size="" data-text="Consul Service Discovery in Docker containers"></span>


<span class="share-facebook defer" data-url="http://2mohitarora.blogspot.com/2014/08/service-discovery-using-consul.html" data-count="" data-layout="" data-text="Consul Service Discovery in Docker containers"></span>

</div>

    
  </div>

  

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="0 comments">
  <span class="bubble-content">0</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    
    Add a comment
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="4960798995733020205">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="https://www.blogger.com/comment-iframe.g?blogID=9015838297196321746&amp;postID=4960798995733020205" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  
</div>

  
</li><li class="item" data-id="4237220906373740722">
  
<div class="article hentry continuous_delievery_using_docker manage_docker_containers " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://1.bp.blogspot.com/-Ical0QzhzeU/U4NGLPDwY5I/AAAAAAAAFTQ/aNpuZit238E/s1600/a.png">
    <meta itemprop="thumbnailUrl" content="http://1.bp.blogspot.com/-Ical0QzhzeU/U4NGLPDwY5I/AAAAAAAAFTQ/aNpuZit238E/s1600/a.png">
  
  <meta itemprop="blogId" content="9015838297196321746">
  <meta itemprop="postId" content="4237220906373740722">

  
  <div class="article-header">


<a class="ribbon date " title="27th May 2014" href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_26.html" itemprop="url">


  <div class="top ribbon-piece">May</div>
  <div class="bottom ribbon-piece">27</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_26.html" rel="bookmark" itemprop="url" data-item-type="post" data-id="4237220906373740722">



Manage Docker Containers using CoreOS - Part 4</a>
  
  

<span class="blog-admin"><a class="edit" href="https://www.blogger.com/post-edit.g?blogID=9015838297196321746&amp;postID=4237220906373740722&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div dir="ltr" style="text-align: left;" trbidi="on">
<span style="font-family: Verdana, sans-serif;">This is last part of the series on&nbsp;"How to manage Docker containers using CoreOS". Please read <a href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos.html">Part 1</a>, <a href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_18.html">Part 2</a> and <a href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_22.html">Part 3</a> before reading this one.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">In this part, we will build a continuous delivery pipeline for our sample application. I explored <i><a href="https://www.atlassian.com/software/bamboo">Bamboo</a></i>, <i><a href="http://www.go.cd/">Go</a></i> and <i><a href="http://jenkins-ci.org/">Jenkins</a></i>
 to build this delivery pipeline and selected Go in the end. The 
detailed comparison of delivery tools is not in scope of this article. 
The main reason of selecting Go is&nbsp;<a href="http://www.thoughtworks.com/products/docs/go/current/help/value_stream_map.html">its Value Stream Map</a>. Bamboo has a killer feature called&nbsp;<a href="https://confluence.atlassian.com/display/BAMBOO/Using+plan+branches">plan branches</a>&nbsp;but i picked Value Stream Map over plan branches. Main concepts of Go are explained&nbsp;<a href="http://www.thoughtworks.com/products/docs/go/current/help/concepts_in_go.html">here</a>.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;"><b><u>Go Server and Agent Setup</u></b>:</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Like any 
other&nbsp;modern continuous integration systems, Go lets you distribute
 your builds across many computers called agents.&nbsp;Agents 
periodically contact the Go server to ask if there is any work. The 
server checks to see what resources the Agent has, and assigns any 
available Jobs that match those resources. Agent resources concept is 
explained&nbsp;<a href="http://www.thoughtworks.com/products/docs/go/current/help/managing_a_build_cloud.html">here</a>. Here is the diagram of our setup.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-Ical0QzhzeU/U4NGLPDwY5I/AAAAAAAAFTQ/aNpuZit238E/s1600/a.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://1.bp.blogspot.com/-Ical0QzhzeU/U4NGLPDwY5I/AAAAAAAAFTQ/aNpuZit238E/s1600/a.png" width="640" height="392" border="0"></a></div>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Couple of things to note in above setup:</span><br>
<ul style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">Go Server will only 
assign&nbsp;continuous integration related jobs to&nbsp;Agent 1 and 
Agent 2 . Agent 1 will do CI work related to base images and Agent 2 
will do CI work related to application.</span></li>
<li><span style="font-family: Verdana, sans-serif;">Go Server will only 
assign deployment related jobs to Agent 3, Agent 4 and Agent 5 for their
 respective environment. They will start/stop docker containers in 
corresponding cluster via fleetctl.</span></li>
<li><span style="font-family: Verdana, sans-serif;">Having a dedicated 
agent for deployment on each environment will make sure that there is no
 delay in starting the deployment job. Otherwise we can end up in a 
situation where all agents are busy and deployment is delayed.</span></li>
</ul>
<span style="font-family: Verdana, sans-serif;"><b><u>Go Pipeline(s) Setup</u></b>:</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Go Pipeline concepts are explained&nbsp;<a href="http://www.thoughtworks.com/products/docs/go/current/help/concepts_in_go.html">here</a>.
 It is not possible to write step by step instructions for pipeline 
setup, I have shared some screenshots below. Please shoot me an email if
 you need more information related to pipeline setup.</span><br>
<u style="font-family: Verdana, sans-serif;"><br></u>
<u style="font-family: Verdana, sans-serif;">Continuous Integration Pipelines:</u><br>
<u style="font-family: Verdana, sans-serif;"><br></u>
<span style="font-family: Verdana, sans-serif;">When I was setting Go 
Pipelines, I initially focussed on 5 Continuous Integration pipelines, 
one for each of our packer + ansible git repo as mentioned in&nbsp;</span><a href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_22.html" style="font-family: Verdana, sans-serif;">Part 3</a><span style="font-family: Verdana, sans-serif;">. Here&nbsp;are some screenshots.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellspacing="0" cellpadding="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-xnkn1fggN4I/U4O5Vql8hHI/AAAAAAAAFTg/poM_NREVDI0/s1600/Screen+Shot+2014-05-26+at+5.46.53+PM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://4.bp.blogspot.com/-xnkn1fggN4I/U4O5Vql8hHI/AAAAAAAAFTg/poM_NREVDI0/s1600/Screen+Shot+2014-05-26+at+5.46.53+PM.png" width="640" height="321" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Pipelines Dashboard. At this point it only shows CI pipelines</td></tr>
</tbody></table>
<br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellspacing="0" cellpadding="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-spREnXQCmG8/U4O5hz0BJSI/AAAAAAAAFTo/mmQnpB2KfN8/s1600/Screen+Shot+2014-05-26+at+5.48.06+PM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://2.bp.blogspot.com/-spREnXQCmG8/U4O5hz0BJSI/AAAAAAAAFTo/mmQnpB2KfN8/s1600/Screen+Shot+2014-05-26+at+5.48.06+PM.png" width="640" height="315" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">sample-app Pipeline flow - It clearly shows the pipeline dependency</td></tr>
</tbody></table>
<br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellspacing="0" cellpadding="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-X-UUmqIO7gw/U4O6KnqilNI/AAAAAAAAFTw/C3wpBAXouRY/s1600/Screen+Shot+2014-05-26+at+5.48.26+PM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://2.bp.blogspot.com/-X-UUmqIO7gw/U4O6KnqilNI/AAAAAAAAFTw/C3wpBAXouRY/s1600/Screen+Shot+2014-05-26+at+5.48.26+PM.png" width="640" height="315" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">sample-app-httpd pipeline flow - It clearly shows pipeline dependency</td></tr>
</tbody></table>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Couple of points to note:</span><br>
<br>
<ol style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">Each pipeline above 
is essentially doing the same thing - Build Docker image using packer, 
tag the code and push the image to docker index, hence it was a perfect 
fit for Go <a href="http://www.thoughtworks.com/products/docs/go/current/help/pipeline_templates.html">Pipeline Template</a>.
 I ended up creating a Pipeline template; all these pipelines are based 
on that template. In a real world scenario, application CI pipeline will
 do extra work of building artifacts as well.</span></li>
<li><span style="font-family: Verdana, sans-serif;">Every pipeline except <i>centos-base</i> depend on a git repo and a parent pipeline which means they get triggered</span></li>
<ul>
<li><span style="font-family: Verdana, sans-serif;">When parent pipeline&nbsp;succeeds</span></li>
<li><span style="font-family: Verdana, sans-serif;">When there is a checkin in Git repo</span></li>
</ul>
<li><span style="font-family: Verdana, sans-serif;">Parent pipeline 
exposes some extra environment variables for child pipeline to use. This
 extra information is available to child pipeline irrespective of the 
triggering mechanism. When the triggering mechanism is Git checkin, 
information of&nbsp;last successful&nbsp;parent pipeline run is 
available to child pipeline.</span></li>
<li><span style="font-family: Verdana, sans-serif;">You can easily see the hierarchy of images. &nbsp;&nbsp;</span></li>
</ol>
<span style="font-family: Verdana, sans-serif;"><u>Continuous Delivery Pipelines:</u></span><br>
<span style="font-family: Verdana, sans-serif;"><u><br></u></span>
<span style="font-family: Verdana, sans-serif;">Once the Continuous 
Integration pipelines were up and running, I added 3 Continuous Delivery
 pipelines for sample application, 1 for each environment DEV, QA and 
prod</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellspacing="0" cellpadding="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-krWEEB0gwUE/U4PrKLG1qoI/AAAAAAAAFUU/7P4Rdy9EoJA/s1600/Screen+Shot+2014-05-26+at+9.31.18+PM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://1.bp.blogspot.com/-krWEEB0gwUE/U4PrKLG1qoI/AAAAAAAAFUU/7P4Rdy9EoJA/s1600/Screen+Shot+2014-05-26+at+9.31.18+PM.png" width="640" height="316" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Pipeline Dashboard</td></tr>
</tbody></table>
<span style="font-family: Verdana, sans-serif;"><u><br></u></span>
<br>
<div class="separator" style="clear: both; text-align: center;">
</div>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellspacing="0" cellpadding="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-Ql0-Kp96utk/U4Pm6CKoEVI/AAAAAAAAFUM/Twb4eqQPzbk/s1600/Screen+Shot+2014-05-26+at+8.02.53+PM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://1.bp.blogspot.com/-Ql0-Kp96utk/U4Pm6CKoEVI/AAAAAAAAFUM/Twb4eqQPzbk/s1600/Screen+Shot+2014-05-26+at+8.02.53+PM.png" width="640" height="163" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">sample-app Pipeline flow - Complete setup</td></tr>
</tbody></table>
<div>
<br>
<span style="font-family: Verdana, sans-serif;">Couple of&nbsp;points to note</span><br>
<br>
<ol style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">Prod deployment 
pipeline is not triggered automatically. It need manual approval. If you
 want, you can have approval gates for Dev/QA deployment pipelines as 
well.</span></li>
<li><span style="font-family: Verdana, sans-serif;">There will be 
testing pipelines to run tests once the application is deployed on any 
environment. I have skipped them in this example.</span></li>
<li><span style="font-family: Verdana, sans-serif;">Agents running 
deployments on Dev, QA and prod should be able to communicate with 
CoreOS cluster using fleetctl. Please refer to Part 1 for more details.</span></li>
<li><span style="font-family: Verdana, sans-serif;">Each Continuous 
Delivery pipeline is essentially doing the 5 things which can also be 
abstracted out to a template (as we did for CI pipelines)</span></li>
<ul>
<li><span style="font-family: Verdana, sans-serif;">Check if the application is already deployed on CoreOS cluster.</span></li>
<li><span style="font-family: Verdana, sans-serif;">If yes, kill the containers</span></li>
<li><span style="font-family: Verdana, sans-serif;">Clone the git repo that has application systemd service unit files.</span></li>
<li><span style="font-family: Verdana, sans-serif;">Prepare the service unit file for the application version that pipeline needs to deploy</span></li>
<li><span style="font-family: Verdana, sans-serif;">Submit and start the systemd service unit file via fleetctl.</span></li>
</ul>
</ol>
<div>
<span style="font-family: Verdana, sans-serif;"><u>Few Other cool features of Go</u></span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><u><br></u></span></div>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellspacing="0" cellpadding="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-SIrkZsUOgjo/U4Pscnk3bLI/AAAAAAAAFUg/-5WcwQ0uvtw/s1600/Screen+Shot+2014-05-26+at+7.55.46+PM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><span style="color: black;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://1.bp.blogspot.com/-SIrkZsUOgjo/U4Pscnk3bLI/AAAAAAAAFUg/-5WcwQ0uvtw/s1600/Screen+Shot+2014-05-26+at+7.55.46+PM.png" width="125" height="400" border="0"></span></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;"><span style="font-size: small; text-align: left;">Environments dashboard - give you a bird's eye view of which versions are deployed in which environment</span></td></tr>
</tbody></table>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellspacing="0" cellpadding="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-Q4bCPKFy0Dc/U4Puor-O9XI/AAAAAAAAFUs/Trh6UAuBa_A/s1600/Screen+Shot+2014-05-26+at+9.46.14+PM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://1.bp.blogspot.com/-Q4bCPKFy0Dc/U4Puor-O9XI/AAAAAAAAFUs/Trh6UAuBa_A/s1600/Screen+Shot+2014-05-26+at+9.46.14+PM.png" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;"><span style="font-size: small;">Each
 pipeline has above button which is pretty useful if you are running the
 pipeline manually and want to provide custom inputs.</span></td></tr>
</tbody></table>
<div>
<span style="font-family: Verdana, sans-serif;"><u><br></u></span></div>
<span style="font-family: Verdana, sans-serif;"><b><u>Conclusion:</u></b></span><br>
<br>
<ul style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">Having hierarchy of 
docker images is really a good idea. This will make sure that 
application images are very small, hence image building will be very 
quick.</span></li>
<li><span style="font-family: Verdana, sans-serif;">Application Builds 
should produce docker containers as artifacts. These docker containers 
will have all the dependencies built into it.</span></li>
<li><span style="font-family: Verdana, sans-serif;">Docker containers 
are immutable in nature so instead of bringing an immutable server up 
after every build, you can kill the running container and start a new 
one. This is much faster than bringing a new server up. Also there is 
better utilization of resources in this case.</span></li>
</ul>
<br>
<span style="font-family: Verdana, sans-serif;">I really hope that this 
series will help you get started with Docker, CoreOS and build 
Continuous Delivery Pipeline with docker containers.</span><br>
<ul style="text-align: left;"><ul>
</ul>
</ul>
</div>
</div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2014-05-27T01:32:00.005Z" itemprop="datePublished">27th May 2014</abbr> by <a class="url fn" href="http://www.blogger.com/profile/06918659071352983654" rel="author" itemprop="author">Mohit Arora</a>
  
  
</div>

    


    
    <div class="labels" itemprop="keywords">
      Labels: <a class="label" href="http://2mohitarora.blogspot.in/search/label/Continuous%20Delievery%20using%20Docker" target="_self">Continuous Delievery using Docker</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/Manage%20Docker%20Containers" target="_self">Manage Docker Containers</a> 
    </div>
    
    
    
<div class="share-controls defer delay" data-defer="true" data-delay="1000">
<span class="share-plusone g-plusone defer" data-href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_26.html" data-hl="en" data-size="" data-source="blogger:blog:plusone" data-annotation="" data-width="90" data-text="Manage Docker Containers using CoreOS - Part 4"></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button defer" data-url="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_26.html" data-count="" data-size="" data-text="Manage Docker Containers using CoreOS - Part 4"></span>


<span class="share-facebook defer" data-url="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_26.html" data-count="" data-layout="" data-text="Manage Docker Containers using CoreOS - Part 4"></span>

</div>

    
  </div>

  

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="2 comments">
  <span class="bubble-content">2</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    View comments
    
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="4237220906373740722">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="https://www.blogger.com/comment-iframe.g?blogID=9015838297196321746&amp;postID=4237220906373740722" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  
</div>

  
</li><li class="item" data-id="6310938356424098395">
  
<div class="article hentry ansible docker manage_docker_containers packer " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://3.bp.blogspot.com/-aXK1o7E1g9s/U35LMEKNuSI/AAAAAAAAFS8/pnKqNT44t7Y/s1600/Untitled+Diagram.jpg">
    <meta itemprop="thumbnailUrl" content="http://3.bp.blogspot.com/-aXK1o7E1g9s/U35LMEKNuSI/AAAAAAAAFS8/pnKqNT44t7Y/s1600/Untitled+Diagram.jpg">
  
  <meta itemprop="blogId" content="9015838297196321746">
  <meta itemprop="postId" content="6310938356424098395">

  
  <div class="article-header">


<a class="ribbon date " title="23rd May 2014" href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_22.html" itemprop="url">


  <div class="top ribbon-piece">May</div>
  <div class="bottom ribbon-piece">23</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_22.html" rel="bookmark" itemprop="url" data-item-type="post" data-id="6310938356424098395">



Manage Docker Containers using CoreOS - Part 3</a>
  
  

<span class="blog-admin"><a class="edit" href="https://www.blogger.com/post-edit.g?blogID=9015838297196321746&amp;postID=6310938356424098395&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div dir="ltr" style="text-align: left;" trbidi="on">
<span style="background-color: white; color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;">This is part 3 of the series on "<i>How to manage Docker containers using CoreOS</i>". Please read&nbsp;</span><a href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos.html" style="background-color: white; font-family: Verdana, sans-serif; line-height: 18.479999542236328px; text-decoration: none;"><span style="color: blue;">Part 1</span></a><span style="background-color: white; color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;">&nbsp;and <a href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_18.html">Part 2</a>&nbsp;before reading this one and make sure you understand the basic concepts. In&nbsp;</span><a href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_18.html" style="font-family: Verdana, sans-serif; line-height: 18.479999542236328px;">Part 2</a><span style="background-color: white;"><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">&nbsp;of this series, we used docker images (</span></span><a href="https://index.docker.io/u/mohitarora/sample-app/" style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;">sample-app</a><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">&nbsp; and </span></span><a href="https://index.docker.io/u/mohitarora/sample-app-httpd/" style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;">sample-app-httpd</a><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">) which were already uploaded for us in docker central images repository. This article will&nbsp;mainly&nbsp;focus&nbsp;on <i>"<b>How to build and maintain docker images easily</b>". </i>Before we start, I would like to introduce two open source projects (<a href="http://www.packer.io/">Packer</a> and <a href="http://www.ansible.com/home">Ansible</a>) that we will use to build docker images.</span></span></span><br>
<span style="background-color: white;"><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><br></span></span></span>
<span style="background-color: white;"><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><b><u>Packer 101</u></b>:&nbsp;</span></span></span><a href="http://www.packer.io/" style="background-color: white; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;">Packer</a><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">&nbsp;is
 a tool for creating identical machine images for multiple platforms 
from a single source configuration. It is designed to allow the same 
provisioners, whether that be Puppet, Chef, Ansible or plain shell 
scripts, to spit out images for EC2,&nbsp;</span></span><span style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;">Docker,&nbsp;</span><span style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;">Digital Ocean or Vagrant boxes.&nbsp;</span><br>
<span style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;"><b><u><br></u></b></span>
<span style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;"><u>Why not Dockerfiles?</u>
 Dockerfiles can also be used to build Docker images but you can 
configure Packer to build both "Docker images" and "Vagrant Boxes for 
your developers", which is a great win. If your developer environment is
 provisioned in the same way as your production environment, you will 
never get any surprises.</span><br>
<span style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;"><br></span>
<span style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;"><b><u>Ansible 101</u></b>:&nbsp;</span><a href="http://www.ansible.com/home" style="background-color: white; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;">Ansible</a><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">&nbsp;is
 a simple, but powerful, server and configuration management tool. With 
Ansible you don't have to write scripts or custom code to provision 
your&nbsp;infrastructure.&nbsp;</span></span><a href="http://www.ansible.com/home" style="background-color: white; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;">Ansible</a><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">&nbsp;is very similar&nbsp;to tools like Puppet, Chef, Salt&nbsp;etc but it is much simpler in design.</span></span><br>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><br></span></span>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">Ansible documentation is pretty good, please familiarize yourself with <a href="http://docs.ansible.com/playbooks.html">ansible-playbook</a> and ansible <a href="http://docs.ansible.com/playbooks_roles.html">roles</a> concepts.</span></span><br>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><br></span></span>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><b>We will use Packer to create our docker images and Ansible to provision our docker images.</b></span></span><br>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><b><br></b></span></span><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><b><u>Image Hierarchy</u></b>:</span></span><br>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><br></span></span>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">Another very important concept that i always propose is that we should always&nbsp;</span><span style="line-height: 18.479999542236328px;">develop
 a hierarchy of images (as shown below) whose base layers are the most 
stable, and where changes occur as close to the leaf nodes of the tree 
as possible.</span></span><br>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><br></span></span>
<br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-aXK1o7E1g9s/U35LMEKNuSI/AAAAAAAAFS8/pnKqNT44t7Y/s1600/Untitled+Diagram.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://3.bp.blogspot.com/-aXK1o7E1g9s/U35LMEKNuSI/AAAAAAAAFS8/pnKqNT44t7Y/s1600/Untitled+Diagram.jpg" width="640" height="240" border="0"></a></div>
<span style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;"><br></span>
<span style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;">We have total 5 docker images involved in the sample-app that we launched in part 2 of this series.</span><br>
<ol style="text-align: left;">
<li><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><b><u>centos-base</u></b>:&nbsp;The
 centos-base image is simply an updated centos image available in docker
 index. Only additions are some common tools (wget, tar, vi etc), 
ansible and confd. You can explore it&nbsp;<a href="https://github.com/mohitarora/docker-centos-base">here</a>.
 All other docker images will be built on top of this. Anytime we need 
to add a tool that is needed for all the images, we will be rebuilding 
this image.</span></span></li>
<li><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><u style="font-weight: bold;">jdk7-base</u>:&nbsp;jdk7-base is an image based on centos-base with Java 7 installed. You can explore it&nbsp;<a href="https://github.com/mohitarora/docker-jdk7-base">here</a>.
 This image can be used to build docker images of any java based 
application. This image will be automatically re-built when new version 
of centos-base image is built.</span></span></li>
<li><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><u style="font-weight: bold;">httpd-base</u>: httpd-base is an image based on centos-base with apache http server installed. You can explore it <a href="https://github.com/mohitarora/docker-httpd-base">here</a>. This image can be used to build docker images of any application's apache http server.&nbsp;</span></span><span style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;">This image will be automatically re-built when new version of centos-base image is built.</span></li>
<li><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><u style="font-weight: bold;">sample-app-httpd</u>:
 sample-app-httpd is an image on top of httpd-base image with 
customization targeted for sample app web server. One of the sample app 
specific customization it has is confd files targeted for sample app. 
You can explore it&nbsp;<a href="https://github.com/mohitarora/docker-sample-app-httpd">here</a>.</span></span></li>
<li><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><u style="font-weight: bold;">sample-app</u>:
 sample-app is an image on top of jdk7-base image. This image has 
application binary and application configuration file. Every time there 
is a change checked in by developer in version control system, 
Continuous Integration system will be building new version of docker 
image. We will use the appropriate version to deploy on our CoreOS 
cluster. You can explore it&nbsp;<a href="https://github.com/mohitarora/docker-sample-app">here</a>. <i><span style="font-size: x-small;">(Note:&nbsp;</span></i></span></span><span style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;"><i><span style="font-size: x-small;">In
 real world application, configuration file itself will not be part of 
the application docker image because config file changes according to 
environment. Confd template of configuration file will be bundled in the
 image and configuration file will be generated by confd when docker 
container starts. Config values will be managed in etcd cluster of every
 environment. You can even use <a href="http://www.devnull.org/zuul">zuul</a>&nbsp;instead of etcd.)</span></i></span></li>
</ol>
<ol style="text-align: left;">
</ol>
<div>
<span style="font-family: Verdana, sans-serif;">We will be working on 
the pipeline of image building in next part of this series. As of now, 
let's focus on building and versioning one image using Packer and 
Ansible. We will take <a href="https://github.com/mohitarora/docker-jdk7-base">jdk7-base</a> image as an example:</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Following is the Packer 
file used to build jdk7-base image. It is kind of self explanatory. We 
are asking packer to build a docker image based on centos-base image and
 provision it using ansible. Ansible playbook and roles files are also 
checked in parallel to packer configuration file.</span><br>
<div style="background-color: white; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; line-height: 18.479999542236328px;">
<pre style="background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(221, 221, 221); box-sizing: border-box; color: #333333; font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 13px; line-height: 19px; margin-bottom: 15px; margin-top: 15px; overflow: auto; padding: 6px 10px; word-wrap: normal;"><code style="background-color: transparent; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: none; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; line-height: inherit; margin: 0px; padding: 0px; word-wrap: normal;">{
    "variables": {
        "version": "",
        "base-image-version": ""
    },
    "builders":[{
        "type": "docker",
        "image": "mohitarora/centos-base:{{user `base-image-version`}}",
        "pull": true,
        "export_path": "jdk7-base-{{user `version`}}.tar"
    }],
    "provisioners":[
        {
            "type": "ansible-local",
            "playbook_file": "playbooks/local.yml",
            "role_paths":[
                "roles/java"
            ]
        }
    ],
    "post-processors": [
        {
            "type": "docker-import",
            "repository": "mohitarora/jdk7-base",
            "tag": "{{user `version`}}"
        }
    ]
}</code></pre>
</div>
<i style="font-family: Verdana, sans-serif;"><span style="font-size: x-small;">Note: Ansible is already installed on base image so all other images gets it for free.</span></i><br>
<i style="font-family: Verdana, sans-serif;"><br></i>
<b style="background-color: white; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; line-height: 18.479999542236328px;"><u>How to run packer:</u></b></div>
<div style="background-color: white;">
<pre style="background-color: #f8f8f8; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(221, 221, 221); box-sizing: border-box; margin-bottom: 15px; margin-top: 15px; overflow: auto; padding: 6px 10px; word-wrap: normal;"><span style="font-family: Consolas, Liberation Mono, Courier, monospace;"><span style="font-size: 12px; line-height: 19px;"><span style="color: #333333;">packer build -var 'version=v1.0.0' -var 'base-image-version=v1.0.0' jdk7-base.json
</span><span style="color: blue;"># Using base-image-version argument you can choose what version of base image will 
be used as base of this image.</span></span></span></pre>
</div>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">You can read more details about Packer's ansible-local provisioner&nbsp;<a href="http://www.packer.io/docs/provisioners/ansible-local.html">here.</a>&nbsp;It is pretty easy to crack.</span></span><br>
<br>
<b style="color: #222222; font-family: Verdana, sans-serif; line-height: 18.479999542236328px;"><u>Who will trigger packer to build docker images and When?</u></b><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">:</span></span><br>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><br></span></span>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">Our
 Continuous Integration system will trigger packer to build docker 
images whenever there is a change in corresponding repository. (Will be 
explained in detail in next part).</span></span><br>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><br></span></span>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">If you prefer Puppet or Chef over Ansible, you can use them with Packer instead of Ansible.&nbsp;</span></span><br>
<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;"><br></span></span>

<span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 18.479999542236328px;">In
 next part of this series, i will be bringing concepts explained in part
 1, part2 and part3 together to build a continuous delivery system.</span></span>
<span style="color: #222222; font-family: Verdana, sans-serif; font-size: x-small;"><span style="line-height: 18.479999542236328px;"><br></span></span></div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2014-05-22T19:09:00.001Z" itemprop="datePublished">23rd May 2014</abbr> by <a class="url fn" href="http://www.blogger.com/profile/06918659071352983654" rel="author" itemprop="author">Mohit Arora</a>
  
  
</div>

    


    
    <div class="labels" itemprop="keywords">
      Labels: <a class="label" href="http://2mohitarora.blogspot.in/search/label/Ansible" target="_self">Ansible</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/Docker" target="_self">Docker</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/Manage%20Docker%20Containers" target="_self">Manage Docker Containers</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/packer" target="_self">packer</a> 
    </div>
    
    
    
<div class="share-controls defer delay" data-defer="true" data-delay="1000">
<span class="share-plusone g-plusone defer" data-href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_22.html" data-hl="en" data-size="" data-source="blogger:blog:plusone" data-annotation="" data-width="90" data-text="Manage Docker Containers using CoreOS - Part 3"></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button defer" data-url="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_22.html" data-count="" data-size="" data-text="Manage Docker Containers using CoreOS - Part 3"></span>


<span class="share-facebook defer" data-url="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_22.html" data-count="" data-layout="" data-text="Manage Docker Containers using CoreOS - Part 3"></span>

</div>

    
  </div>

  

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="0 comments">
  <span class="bubble-content">0</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    
    Add a comment
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="6310938356424098395">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="https://www.blogger.com/comment-iframe.g?blogID=9015838297196321746&amp;postID=6310938356424098395" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  
</div>

  
</li><li class="item" data-id="5035390124790481892">
  
<div class="article hentry coreos etcd fleet manage_docker_containers systemd " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://2.bp.blogspot.com/-fYn4_i8bdxI/U3Q5d4llhHI/AAAAAAAAFSs/lF_EsqFc5RI/s1600/1.png">
    <meta itemprop="thumbnailUrl" content="http://2.bp.blogspot.com/-fYn4_i8bdxI/U3Q5d4llhHI/AAAAAAAAFSs/lF_EsqFc5RI/s1600/1.png">
  
  <meta itemprop="blogId" content="9015838297196321746">
  <meta itemprop="postId" content="5035390124790481892">

  
  <div class="article-header">


<a class="ribbon date " title="19th May 2014" href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_18.html" itemprop="url">


  <div class="top ribbon-piece">May</div>
  <div class="bottom ribbon-piece">19</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_18.html" rel="bookmark" itemprop="url" data-item-type="post" data-id="5035390124790481892">



Manage Docker Containers using CoreOS - Part 2</a>
  
  

<span class="blog-admin"><a class="edit" href="https://www.blogger.com/post-edit.g?blogID=9015838297196321746&amp;postID=5035390124790481892&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div dir="ltr" style="text-align: left;" trbidi="on">
<span style="font-family: Verdana, sans-serif;">This is part 2 of the series on "How to manage Docker containers using CoreOS". Please read <a href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos.html">Part 1</a>&nbsp;before reading this one and make sure you understand the basic concepts/ideas of CoreOS.</span><br>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">In this part we will 
launch 5 application docker containers and 1 apache httpd container in 
our CoreOS cluster as shown below. Apache httpd will act as a load 
balancer in this case and will use&nbsp;<a href="https://httpd.apache.org/docs/trunk/mod/mod_proxy_balancer.html">mod_proxy_balancer</a>&nbsp;for load balancing.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div class="separator" style="clear: both; text-align: center;">
</div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-fYn4_i8bdxI/U3Q5d4llhHI/AAAAAAAAFSs/lF_EsqFc5RI/s1600/1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://2.bp.blogspot.com/-fYn4_i8bdxI/U3Q5d4llhHI/AAAAAAAAFSs/lF_EsqFc5RI/s1600/1.png" width="320" height="307" border="0"></a></div>
<div>
<br></div>
<div>
<b style="font-family: Verdana, sans-serif;"><u>Assumptions:</u></b></div>
<div>
<ol style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">CoreOS cluster (as explained in Part 1) is up and running.</span></li>
<li><span style="font-family: Verdana, sans-serif;">You have fleetctl 
configured and installed on a separate machine as explained in Part 1. 
We will be using fleetctl from this separate machine (called controller 
machine from this point onwards) to manage our CoreOS cluster.</span></li>
</ol>
<div>
<span style="font-family: Verdana, sans-serif;"><u><b>Note:</b></u></span></div>
<div>
<ol style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">Application docker container image that we will use is already uploaded to docker index. You can browse it <a href="https://index.docker.io/u/mohitarora/sample-app/">here</a>. Application is a very simple java web application that exposes one rest end point.</span></li>
<li><span style="font-family: Verdana, sans-serif;">HTTPD docker container image is also uploaded to docker index. You can browse it <a href="https://index.docker.io/u/mohitarora/sample-app-httpd/">here</a>. &nbsp;</span></li>
</ol>
<span style="font-family: Verdana, sans-serif;">In next part, I will talk about how to create container images.</span><br>
<br>
<div>
<span style="font-family: Verdana, sans-serif;"><span style="font-family: Verdana, sans-serif;"><b><u>Start First instance of application docker container in cluster</u></b></span></span></div>
<span style="font-family: Verdana, sans-serif;">
</span>
<br>
<div>
<span style="font-family: Verdana, sans-serif;"><span style="font-family: Verdana, sans-serif;"><br></span></span></div>
<span style="font-family: Verdana, sans-serif;">
Let's start an application docker container in our CoreOS cluster using 
fleetctl. Launching container guide using fleet is available <a href="https://coreos.com/docs/launching-containers/launching/launching-containers-fleet/">here</a>. Basic idea is that we need to prepare&nbsp;</span><span style="font-family: Verdana, sans-serif;"><b>systemd</b> units combined with a few fleet-specific properties and submit it to CoreOS cluster using <b>fleetctl</b>. For this tutorial, I have checked in the "application systemd unit files" in <a href="https://github.com/mohitarora/coreos-vagrant/tree/master/application">github repository</a>.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Step 1: Clone <a href="https://github.com/mohitarora/coreos-vagrant.git">github repo</a> on controller machine.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Step 2: Navigate to the application directory in cloned repository.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Step 3: Submit the "application systemd unit" to CoreOS cluster</span></div>
<pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); margin-bottom: 10px; padding: 9.5px; word-break: break-all; word-wrap: break-word;"><span style="line-height: 20px; white-space: pre-wrap;"><span style="color: #333333;">fleetctl --strict-host-key-checking=false submit sample.application.1@8080.service</span></span><span style="color: #333333; font-size: 13px; line-height: 20px; white-space: pre-wrap;">
</span></pre>
<div>
<div>
<span style="font-family: Verdana, sans-serif;">Step 4: Start the service</span></div>
<pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); margin-bottom: 10px; padding: 9.5px; word-break: break-all; word-wrap: break-word;"><span style="line-height: 20px; white-space: pre-wrap;"><span style="color: #333333;">fleetctl --strict-host-key-checking=false start sample.application.1@8080.service
</span><span style="color: blue;">Output: </span></span><span style="background-color: transparent; line-height: 20px; white-space: pre-wrap;"><span style="color: blue;">Job sample.application.1@8080.service launched on 4468cdab.../172.17.8.103</span></span></pre>
</div>
<div>
<div>
<span style="font-family: Verdana, sans-serif;">Step 5: Check status</span></div>
<pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); margin-bottom: 10px; padding: 9.5px; word-break: break-all; word-wrap: break-word;"><span style="color: #333333; line-height: 20px; white-space: pre-wrap;">fleetctl --strict-host-key-checking=false list-units
</span><span style="color: blue;"><span style="line-height: 20px; white-space: pre-wrap;">UNIT STATE  LOAD ACTIVE SUB DESC   MACHINE
sample.application.1@8080.service launched loaded active running sample-application </span></span><span style="background-color: transparent; line-height: 20px; white-space: pre-wrap;"><span style="color: blue;">4468cdab.../172.17.8.103</span></span></pre>
</div>
<div>
<span style="font-family: Verdana, sans-serif;">&nbsp;</span><span style="font-family: Verdana, sans-serif;">Step 6: Once you see service is active, Hit the service on appropriate host. In this case Hit url&nbsp;</span><span style="font-family: Verdana, sans-serif;"><a href="http://172.17.8.103:8080/sample">http://172.17.8.103:8080/sample</a>&nbsp;and you should see following output.</span></div>
<div>
<pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); margin-bottom: 10px; padding: 9.5px; word-break: break-all; word-wrap: break-word;"><pre style="white-space: pre-wrap; word-wrap: break-word;"><span style="color: blue;">{"id":1,"content":"Hello, Stranger!"}</span></pre>
</pre>
</div>
<div>
</div>
<div>
<span style="font-family: Verdana, sans-serif;">Impressive right. Our 
application is up and running inside a docker container on one of the 
machine in our CoreOS cluster. In case you face any issues, following 
commands can provide better insight</span></div>
</div>
<div>
<pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); margin-bottom: 10px; padding: 9.5px; word-break: break-all; word-wrap: break-word;"><span style="color: #333333;"><span style="line-height: 20px; white-space: pre-wrap;">fleetctl --strict-host-key-checking=false cat sample.application.1@8080.service

fleetctl --strict-host-key-checking=false status sample.application.1@8080.service

fleetctl --strict-host-key-checking=false journal sample.application.1@8080.service (you can pass </span></span><span style="background-color: transparent; line-height: 20px; white-space: pre-wrap;"><span style="color: #333333;">-f flag to streams the output of the service on terminal)</span></span>
</pre>
</div>
<div>
<br></div>
<div>
<span style="font-family: Verdana, sans-serif;"><b><u>SystemD unit file Details</u></b></span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><b><u><br></u></b></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Before we move forward 
and launch second application instance, it is very important to 
understand following service unit file that we cloned from git repo and 
submitted. A detailed tutorial of systemd is available&nbsp;<a href="https://coreos.com/docs/launching-containers/launching/getting-started-with-systemd/">here</a>. I have annotated 7 lines below that I am going to explain in detail</span></div>
<pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); margin-bottom: 10px; padding: 9.5px; word-break: break-all; word-wrap: break-word;">[Unit]
Description=sample-application

[Service]
EnvironmentFile=/etc/environment <b><span style="color: blue;">#1</span></b>
ExecStartPre=/usr/bin/docker pull mohitarora/sample-app:v1.0.1 <b><span style="color: blue;">#2</span></b>
ExecStart=/usr/bin/docker run --name <span style="color: red;">%p</span> --expose 8080 -p <span style="color: red;">%i</span>:8080 mohitarora/sample-app:v1.0.1 /opt/launch.sh <b><span style="color: blue;">#3</span></b>
ExecStartPost=/usr/bin/etcdctl set /applications/sample/<span style="color: red;">%p</span> ${COREOS_PUBLIC_IPV4}:<span style="color: red;">%i</span> <b><span style="color: blue;">#4</span></b>
ExecStop=/usr/bin/docker stop <span style="color: red;">%p</span> <b><span style="color: blue;">#5</span></b>
ExecStopPost=/usr/bin/etcdctl rm /applications/sample/<span style="color: red;">%p</span> <b><span style="color: blue;">#6</span></b>
TimeoutSec=120min

[X-Fleet]
X-Conflicts=*@<span style="color: red;">%i</span>.service <b><span style="color: blue;">#7</span></b></pre>
<div>
<span style="font-family: Verdana, sans-serif;"><b style="color: blue;">#1 - </b>EnvironmentFile= allow you to&nbsp;</span><span style="font-family: Verdana, sans-serif;">exposes environment variables of a file to the current unit file</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><span style="color: blue; font-weight: bold;">#2 -&nbsp;</span></span><span style="font-family: Verdana, sans-serif;">ExecStartPre=
 allow you to specify any commands that will run before ExecStart. In 
this case we are pulling application docker image from docker index on 
CoreOS machine.</span></div>
<div>
<b style="font-family: Verdana, sans-serif;"><span style="color: blue;">#3 -&nbsp;</span></b><span style="font-family: Verdana, sans-serif;">ExecStart=
 allows you to specify any command that you'd like to run when this unit
 is started. In this case we are starting application docker container. 
In most cases, we will be starting docker container as part of Exec 
Start.&nbsp;</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><b style="color: blue;">#4 -&nbsp;</b></span><span style="font-family: Verdana, sans-serif;">ExecStartPost=
 allow you to specify any commands that will run after ExecStart. In 
this case we are creating a key value pair in etcd. We will use the same
 key value details when we launch apache server.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><span style="color: blue; font-weight: bold;">#5 - </span></span><span style="font-family: Verdana, sans-serif;">ExecStop=
 allow you to specify commands that will run when this unit is 
considered failed or if it is stopped. In this case we are stopping 
docker container.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><span style="color: blue; font-weight: bold;">#6 -&nbsp;</span></span><span style="font-family: Verdana, sans-serif;">ExecStopPost= allow you to specify any commands that will run after ExecStop. In this case we are removing entry from etcd</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><span style="color: blue; font-weight: bold;">#7 -&nbsp;</span></span><span style="font-family: Verdana, sans-serif;">X-Conflicts=&nbsp;</span><span style="font-family: Verdana, sans-serif;">X-Conflicts attribute tells fleet that these two services can't be run on the same machine</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Another thing you must 
be thinking is, what is this %i and %p that we are using (Highlighted in
 red). It is a pretty neat feature of systemd and is explained <a href="https://coreos.com/docs/launching-containers/launching/getting-started-with-systemd/#instantiated-units">here</a>.&nbsp;Basic
 idea is that If you create multiple symlinks to the same unit file, the
 following variables become available to you.</span><br>
<br>
<ol style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">%p</span><span class="Apple-tab-span" style="font-family: Verdana, sans-serif; white-space: pre;"> </span><span style="font-family: Verdana, sans-serif;">Prefix name</span><span class="Apple-tab-span" style="font-family: Verdana, sans-serif; white-space: pre;"> </span><span style="font-family: Verdana, sans-serif;">Refers to any string before @ in unit name.</span></li>
<li><span style="font-family: Verdana, sans-serif;">%i</span><span class="Apple-tab-span" style="font-family: Verdana, sans-serif; white-space: pre;"> </span><span style="font-family: Verdana, sans-serif;">Instance name</span><span class="Apple-tab-span" style="font-family: Verdana, sans-serif; white-space: pre;"> </span><span style="font-family: Verdana, sans-serif;">Refers to the string between the @ and the suffix.</span></li>
</ol>
<span style="font-family: Verdana, sans-serif;">This gives us the 
flexiblity to use a single unit file to announce multiple copies of the 
same container on a both a single machine (no port overlap) and on 
multiple machines (no hostname overlap). This trick is making sure above
 that only one application service is running with a specific port on 
same machine.</span><br>
<span style="font-family: Verdana, sans-serif;"></span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Without further delay, let's launch the second application docker container.</span></div>
<div>
<pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); margin-bottom: 10px; padding: 9.5px; word-break: break-all; word-wrap: break-word;">fleetctl --strict-host-key-checking=false submit sample.application.2@8080.service
fleetctl --strict-host-key-checking=false start sample.application.2@8080.service
<span style="color: blue;">Output: Job sample.application.2@8080.service launched on 6348bfb0.../172.17.8.101</span></pre>
</div>
<div>
<span style="font-family: Verdana, sans-serif;">Keep checking the status of second unit, when unit is active, test the service.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Let's validate our&nbsp;</span><span style="font-family: Verdana, sans-serif;"><b style="color: blue;">#4 -&nbsp;</b></span><span style="font-family: Verdana, sans-serif;">ExecStartPost as explained above. From any of the machines in cluster execute following command.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); margin-bottom: 10px; padding: 9.5px; word-break: break-all; word-wrap: break-word;">etcdctl ls /applications/sample
<span style="color: blue;">Output: /applications/sample/sample.application.1
        /applications/sample/sample.application.2</span></pre>
</div>
<div>
<div>
<span style="font-family: Verdana, sans-serif;">At this point you can launch 2 more units&nbsp;<i>sample.application.3@8080.service</i>&nbsp;and&nbsp;<i>sample.application.4@8081.service</i></span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">Now when you run 
list-units command, you will see that we have 4 application containers 
running in our coreOS cluster. Pretty impressive, right.</span></div>
</div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><span style="font-family: Verdana, sans-serif;"><b><u>Start Apache docker container in cluster</u></b></span></span><br>
<br>
<span style="font-family: Verdana, sans-serif;">Navigate to the httpd directory in cloned repository and Execute following command from controller machine.</span><br>
<br>
<div style="orphans: auto; text-align: left; text-indent: 0px; widows: auto;">
<pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); margin: 0px 0px 10px; padding: 9.5px; word-break: break-all; word-wrap: break-word;">fleetctl --strict-host-key-checking=false submit sample.application.httpd.1@80.service

fleetctl --strict-host-key-checking=false start sample.application.httpd.1@80.service
<span style="color: blue;">Output: Job httpd.service launched on 0092d846.../172.17.8.101</span></pre>
</div>
<span style="font-family: Verdana, sans-serif;">Now hit&nbsp;<a href="http://172.17.8.101/sample">http://172.17.8.101/sample</a>,
 You will see the response from application. At this point of time you 
have an apache server running inside a docker container in our CoreOS 
cluster which is routing requests to 4 application instances (in round 
robin) running in their own respective docker container in the same 
CoreOS cluster.</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">At this point, you must be thinking about service discovery</span><br>
<br>
<ol style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">How did apache HTTP server figure out the instances where application instances are running?</span></li>
<li><span style="font-family: Verdana, sans-serif;">What if I launch one more application docker container?</span></li>
<li><span style="font-family: Verdana, sans-serif;">What if I remove one application docker container?</span></li>
</ol>
<div>
<span style="font-family: Verdana, sans-serif;">In order to answer above questions, i would like to introduce one more open source project called&nbsp;<a href="https://github.com/kelseyhightower/confd">confd</a>. confd is a configuration management tool focused on&nbsp;</span></div>
<div>
<ul style="text-align: left;">
<li><span style="font-family: Verdana, sans-serif;">keeping local configuration files up-to-date by polling etcd and processing template resources.&nbsp;</span></li>
<li><span style="font-family: Verdana, sans-serif;">reloading applications to pick up new config file changes</span></li>
</ul>
<span style="font-family: Verdana, sans-serif;">If you remember whenever
 we launched/stopped an application docker container in our cluster we 
added/removed an entry in etcd as a post start step/post stop step. 
Hence at any point of time, if anyone needs to know how many application
 instances are alive, etcd will have up to date information. 
Apache&nbsp;</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">HTTP server will use&nbsp;</span><span style="font-family: Verdana, sans-serif;">confd and&nbsp;</span><span style="font-family: Verdana, sans-serif;">information
 stored in etcd to update its proxy configuration file. That is how it 
knows on what all instances application is running. Also inside the HTTP
 server docker container confd is running in background and polls etcd 
at regular intervals. If any entry is added or removed, confd will 
update apache configuration file and restart apache.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">I am not going into very low level details here because its easy to crack, Please go through the <a href="https://github.com/mohitarora/docker-sample-app-httpd/blob/master/roles/sample-app-httpd/tasks/main.yml">ansible file</a>&nbsp;i used to create Apache HTTP server docker image. Also pay some attention to confd files&nbsp;<a href="https://github.com/mohitarora/docker-sample-app-httpd/blob/master/roles/sample-app-httpd/files/httpd-proxy.conf.tmpl">here</a>&nbsp;and&nbsp;<a href="https://github.com/mohitarora/docker-sample-app-httpd/blob/master/roles/sample-app-httpd/files/httpd-proxy.toml">here</a>. Don't forget the&nbsp;<a href="https://github.com/mohitarora/docker-sample-app-httpd/blob/master/roles/sample-app-httpd/files/launch.sh">http server docker container boot script</a>.&nbsp;</span><br>
<span style="font-family: Verdana, sans-serif;"><br></span>
<span style="font-family: Verdana, sans-serif;">Now start 
the&nbsp;sample.application.5@8081.service and make sure apache has 
started routing traffic to newly started container.</span></div>
<div>
<span style="font-family: Verdana, sans-serif;"><br></span></div>
<div>
<span style="font-family: Verdana, sans-serif;">I am pretty impressed by
 all this and this completely fits into my continuous delivery vision. 
In next article of this series, i will be writing more 
about&nbsp;continuos&nbsp;delivery based on docker and CoreOS.</span></div>
</div>
<span style="font-family: Verdana, sans-serif;"></span><br>
<div>
</div>
<span style="font-family: Verdana, sans-serif;">
</span>
<br>
<div>
</div>
</div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2014-05-18T21:34:00.000Z" itemprop="datePublished">19th May 2014</abbr> by <a class="url fn" href="http://www.blogger.com/profile/06918659071352983654" rel="author" itemprop="author">Mohit Arora</a>
  
  
</div>

    


    
    <div class="labels" itemprop="keywords">
      Labels: <a class="label" href="http://2mohitarora.blogspot.in/search/label/CoreOS" target="_self">CoreOS</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/etcd" target="_self">etcd</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/fleet" target="_self">fleet</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/Manage%20Docker%20Containers" target="_self">Manage Docker Containers</a> <a class="label" href="http://2mohitarora.blogspot.in/search/label/systemd" target="_self">systemd</a> 
    </div>
    
    
    
<div class="share-controls defer delay" data-defer="true" data-delay="1000">
<span class="share-plusone g-plusone defer" data-href="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_18.html" data-hl="en" data-size="" data-source="blogger:blog:plusone" data-annotation="" data-width="90" data-text="Manage Docker Containers using CoreOS - Part 2"></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button defer" data-url="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_18.html" data-count="" data-size="" data-text="Manage Docker Containers using CoreOS - Part 2"></span>


<span class="share-facebook defer" data-url="http://2mohitarora.blogspot.com/2014/05/manage-docker-containers-using-coreos_18.html" data-count="" data-layout="" data-text="Manage Docker Containers using CoreOS - Part 2"></span>

</div>

    
  </div>

  

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="0 comments">
  <span class="bubble-content">0</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    
    Add a comment
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="5035390124790481892">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="https://www.blogger.com/comment-iframe.g?blogID=9015838297196321746&amp;postID=5035390124790481892" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  
</div>

  
</li></ol>
</div>


<div id="gadget-dock" class=""><div class="gadget-item" data-gadget-id="0">
</div><div class="gadget-item" data-gadget-id="1">
<div class="gadget-menu">
    <div class="gadget-icons">
      <img class="gadget-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAgMAAACdGdVrAAAACVBMVEX///8AAAD///9+749PAAAAAnRSTlMAAHaTzTgAAAAwSURBVHherYyxCQAwCAR/yhTZy8ZeC6c0BETU1msOjucBeyBF54s1FHEs5fZYWb12TL8307RAxVQAAAAASUVORK5CYII=">
      <img class="gadget-icon-selected" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAgMAAACdGdVrAAAACVBMVEX///8AAAAzMzMTx/ayAAAAAnRSTlMAAHaTzTgAAAAwSURBVHherYyxCQAwCAR/yhTZy8ZeC6c0BFS09pqD43nAHijR+WINZZxLuTN2Vq8dTL8301DjA9oAAAAASUVORK5CYII=">
    </div>
    <span class="gadget-title">Blog Archive</span>
  </div>
  <div class="gadget-container">
    <div class="gadget">
      <span class="gadget-title">Blog Archive</span>
      <div class="gadget-content"><div class="blogarchive-tree blogarchive-expanded">
  <ul class="blogarchive-dates">
  
  
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/search?updated-min=2016-01-01T00:00:00-08:00&amp;updated-max=2017-01-01T00:00:00-08:00&amp;max-results=1">2016</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2016_01_01_archive.html">January</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  

  
<li class="blogarchive-post">
  <a href="http://2mohitarora.blogspot.in/2016/01/git-tips.html">Git Tips</a>
</li>



  </ul>
</li>

  
  


  </ul>
</li>

  
  
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/search?updated-min=2015-01-01T00:00:00-08:00&amp;updated-max=2016-01-01T00:00:00-08:00&amp;max-results=3">2015</a><span class="blogarchive-post-count">3</span>
  </div>
  <ul class="blogarchive-dates">
  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2015_09_01_archive.html">September</a><span class="blogarchive-post-count">2</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2015_01_01_archive.html">January</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
  


  </ul>
</li>

  
  
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/search?updated-min=2014-01-01T00:00:00-08:00&amp;updated-max=2015-01-01T00:00:00-08:00&amp;max-results=14">2014</a><span class="blogarchive-post-count">14</span>
  </div>
  <ul class="blogarchive-dates">
  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2014_11_01_archive.html">November</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2014_09_01_archive.html">September</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2014_08_01_archive.html">August</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2014_05_01_archive.html">May</a><span class="blogarchive-post-count">5</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2014_02_01_archive.html">February</a><span class="blogarchive-post-count">5</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2014_01_01_archive.html">January</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
  


  </ul>
</li>

  
  
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/search?updated-min=2013-01-01T00:00:00-08:00&amp;updated-max=2014-01-01T00:00:00-08:00&amp;max-results=17">2013</a><span class="blogarchive-post-count">17</span>
  </div>
  <ul class="blogarchive-dates">
  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2013_12_01_archive.html">December</a><span class="blogarchive-post-count">3</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2013_11_01_archive.html">November</a><span class="blogarchive-post-count">2</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2013_10_01_archive.html">October</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2013_09_01_archive.html">September</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2013_07_01_archive.html">July</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2013_06_01_archive.html">June</a><span class="blogarchive-post-count">3</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2013_04_01_archive.html">April</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2013_03_01_archive.html">March</a><span class="blogarchive-post-count">5</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
  


  </ul>
</li>

  
  
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/search?updated-min=2012-01-01T00:00:00-08:00&amp;updated-max=2013-01-01T00:00:00-08:00&amp;max-results=19">2012</a><span class="blogarchive-post-count">19</span>
  </div>
  <ul class="blogarchive-dates">
  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2012_10_01_archive.html">October</a><span class="blogarchive-post-count">3</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2012_09_01_archive.html">September</a><span class="blogarchive-post-count">2</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2012_08_01_archive.html">August</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2012_07_01_archive.html">July</a><span class="blogarchive-post-count">4</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2012_06_01_archive.html">June</a><span class="blogarchive-post-count">7</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2012_04_01_archive.html">April</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2012_01_01_archive.html">January</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
  


  </ul>
</li>

  
  
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/search?updated-min=2011-01-01T00:00:00-08:00&amp;updated-max=2012-01-01T00:00:00-08:00&amp;max-results=9">2011</a><span class="blogarchive-post-count">9</span>
  </div>
  <ul class="blogarchive-dates">
  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2011_12_01_archive.html">December</a><span class="blogarchive-post-count">2</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2011_10_01_archive.html">October</a><span class="blogarchive-post-count">3</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2011_09_01_archive.html">September</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2011_07_01_archive.html">July</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2011_05_01_archive.html">May</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2011_04_01_archive.html">April</a><span class="blogarchive-post-count">1</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
  


  </ul>
</li>

  
  
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/search?updated-min=2010-01-01T00:00:00-08:00&amp;updated-max=2011-01-01T00:00:00-08:00&amp;max-results=9">2010</a><span class="blogarchive-post-count">9</span>
  </div>
  <ul class="blogarchive-dates">
  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2010_12_01_archive.html">December</a><span class="blogarchive-post-count">3</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2010_11_01_archive.html">November</a><span class="blogarchive-post-count">4</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://2mohitarora.blogspot.in/2010_08_01_archive.html">August</a><span class="blogarchive-post-count">2</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
  


  </ul>
</li>

  
  </ul>
</div></div>
    </div>
  </div></div><div class="gadget-item" data-gadget-id="2">
<div class="gadget-menu">
    <div class="gadget-icons">
      <img class="gadget-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAB40lEQVRIx7XWwWoTURQG4Lst0jTiolRa2qW4sAWhbrsTBJ8h2bpKNkUUBKGL2idQfIgGuhNsLW7UTaiPYTFpN92Y1s/NmTSEzGSmpj8MAzPnP//cc/97zqRUACyggX30cIlB3C/j2X7E1HJyJBSKtNGPZJ/wAg8xh3lsYhtHEdNDq7QQVnGCP3iJO2kKsIId/AruaqEQ1mMVh7iXKgJL6OIM6xOFYiV9fMTddENgEQchtjpJqIvDNAPEPn6PnNdCIxv/oIBcx7FrHKNeEL+B32hhaOE+3kz5ylGRodgUzl64sZbQxMU0d8lHfYobL9BI6OBribpXFgreZ3RSuONVCaHKpQvea/QT/uJJCUIlM4zwnuIqE6pVsG69jMDYubrKaj+fbglYzoQusVkQuIa30cPGcRLv1gr4zzOhHrZzgpo4Nx3naObk2M3MsI+jipYubXV8y+zdiM6wMgOhrQlGGKCZUIvy7dyC0Ic4pwvZgxZOsTQWuFXxqo9wH8fwbI+PiZNo64szsPT92Jtu0eA7wNx/inzJ9r1olJ/hJzZuIPIoWlP+KB9bWTeG1t4kN+a0mffhsO4op8zvVivceIEfeIdnkXQ5TvxujOxBHNp25f+6CKrFOetEza/Grn68aw4tnCP0D7HegqWQsg0fAAAAAElFTkSuQmCC">
      <img class="gadget-icon-selected" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAB8klEQVRIx7XWT0uUURTH8buVcJxoIYaiy2iRwgds6y4Ieg3OttW4kSgIAhfmKyh6ETPgLkiTNtVmsJeR5OjGTWpPm/MM0zjz/DE9cHng3nPO93nu/d1znpQKDDNYRwfHuMB5PC9irhM+jXE5sixLWZYVQjbQj2Qf8RwPMYVprGIT++FzjHZlEBZxiN94gTupxLCALfyM2MVCEJbjK/ZwL9U0zKGHEyzH3L+g+JI+PuBuuqZhFrsBWxwH6mEv3YDFOX6LnAlXDv5BQXATB8hiHKBZ4L+CX2hjIOE+Xpe85TBkACuJ2Qk1NhJaOCtT1xhIPpolajzDekIXXyrse21QxH1CN4U6XlYA1d66iHuFfsIfPK4QUEsMQ3FPcJmDGjWk26wCGLlXl/neT6dbMsznoAusFjgu4U3UsNEzOoy1pYL4ZznoGJsTnFo4LVBcPk7RmpBjOxdDB/s1JV1Z6viay3s9KsPCDYDWxgjhHK2ERmzf1i2A3sc9nckn2jjC3IjjWs3RHIoVzXNjUL1j4TDK+uwNSPp+nE2vqPHtYuo/IZ/zc78CGmrlJ/iBlWtAHkVpGrTysp+TXjStnXFqnFBm3oXCesMxVX632qHGM3zHWzyNpPNx47ejZZ/Hpd0YzVMKClgj7lk39vxyZPRjrTWQ8ATQX2/rqVTnkWAqAAAAAElFTkSuQmCC">
    </div>
    <span class="gadget-title">About Me</span>
  </div>
  <div class="gadget-container">
    <div class="gadget">
      <span class="gadget-title">About Me</span>
      <div class="gadget-content"><div class="profile">
  
    
    
      
<dl class="profile-data">
  
  <dt class="profile-name">
  <a data-gapiattached="true" data-gapiscan="true" href="https://www.blogger.com/profile/06918659071352983654" class="profile-name-link g-profile" rel="author" style="background-image: url('//www.blogger.com/img/logo-16.png');">Mohit Arora</a>
  </dt>
  
  
  
    
  
  
  
  
  <dd class="profile-aboutme"></dd>
  
</dl>

    
  
</div></div>
    </div>
  </div></div></div>



<div id="loading">
  <span>Loading</span>
</div>





<div id="attribution-container"><div class="attribution">Powered by <a href="https://www.blogger.com/" target="_blank">Blogger</a>.</div></div><iframe src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/skinedEmpty.html" scrolling="no" border="no" style="width: 1px; height: 1px; position: absolute; top: -100000px; left: -100000px; visibility: visible; overflow: hidden;" id="s" class="dealply-toast s" frameborder="0"></iframe><iframe src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/altHbHandler.html" scrolling="no" border="no" style="width: 1px; height: 1px; position: absolute; top: -100000px; left: -100000px; visibility: visible; overflow: hidden;" id="hb1457931120999" class="hb1457931120999" frameborder="0"></iframe><script gapi_processed="true" type="application/x-javascript" src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/opt_content.js"></script><iframe class="hb1482314352642" id="hb1482314352642" style="width: 1px; height: 1px; position: absolute; top: -100000px; left: -100000px; visibility: visible; overflow: hidden;" border="no" scrolling="no" src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/altHbHandler_002.html" frameborder="0"></iframe><iframe class="mailer1482314352680" id="mailer1482314352680" style="width: 1px; height: 1px; position: absolute; top: -100000px; left: -100000px; visibility: visible; overflow: hidden;" border="no" scrolling="no" src="3%28b%29.Mesos-Marathon-consul-%20Cluster%20-%20Part%202_files/mailer.html" frameborder="0"></iframe></body></html>